/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (function() { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/API.js":
/*!********************!*\
  !*** ./src/API.js ***!
  \********************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   callEvent: function() { return /* binding */ callEvent; },\n/* harmony export */   initAPI: function() { return /* binding */ initAPI; }\n/* harmony export */ });\n/* harmony import */ var _maps__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./maps */ \"./src/maps.js\");\n/* harmony import */ var _night_lights__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./night/lights */ \"./src/night/lights.js\");\n/* harmony import */ var _night_night__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./night/night */ \"./src/night/night.js\");\n/* harmony import */ var _npc_npc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./npc/npc */ \"./src/npc/npc.js\");\n/* harmony import */ var _npc_npc_actions_add__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./npc/npc-actions/add */ \"./src/npc/npc-actions/add.js\");\n/* harmony import */ var _npc_npc_actions_hide__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./npc/npc-actions/hide */ \"./src/npc/npc-actions/hide.js\");\n/* harmony import */ var _permissions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./permissions */ \"./src/permissions.js\");\n/* harmony import */ var _weather_weather__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./weather/weather */ \"./src/weather/weather.js\");\n\n\n\n\n\n\n\n\n\n/*\n Event names:\n - displayWeather\n - addTemporaryNpc\n - removeTemporaryNpc\n - loaded\n */\nvar callbacks = {};\nfunction callEvent(eventName, data) {\n  for (var callback in callbacks[eventName]) {\n    callbacks[eventName][callback](data);\n  }\n}\nfunction initAPI() {\n  window.nerthus = {\n    loaded: false,\n    addCallbackToEvent(eventName, func) {\n      if (!callbacks[eventName]) callbacks[eventName] = [];\n      callbacks[eventName].push(func);\n    },\n    permissions: {\n      checkPermissionLvl: _permissions__WEBPACK_IMPORTED_MODULE_6__.checkPermissionLvl,\n      hasNarrationRights: _permissions__WEBPACK_IMPORTED_MODULE_6__.hasNarrationRights\n    },\n    weather: {\n      getWeather: _weather_weather__WEBPACK_IMPORTED_MODULE_7__.getWeather\n    },\n    night: {\n      changeLight: _night_night__WEBPACK_IMPORTED_MODULE_2__.changeLight,\n      applyCurrentNight: _night_night__WEBPACK_IMPORTED_MODULE_2__.applyCurrentNight,\n      turnLightsOn: _night_lights__WEBPACK_IMPORTED_MODULE_1__.turnLightsOn\n    },\n    npcList: _npc_npc__WEBPACK_IMPORTED_MODULE_3__.customNpcs,\n    npc: {\n      npcList: _npc_npc__WEBPACK_IMPORTED_MODULE_3__.customNpcs,\n      addNpc: _npc_npc_actions_add__WEBPACK_IMPORTED_MODULE_4__.addNpc,\n      addNpcToList: _npc_npc_actions_add__WEBPACK_IMPORTED_MODULE_4__.addNpcToList,\n      hideGameNpc: _npc_npc_actions_hide__WEBPACK_IMPORTED_MODULE_5__.hideGameNpc,\n      loadNpcsFromFile: _npc_npc__WEBPACK_IMPORTED_MODULE_3__.loadNpcsFromFile\n    },\n    map: {\n      addToMapChangelist: _maps__WEBPACK_IMPORTED_MODULE_0__.addToMapChangelist,\n      removeFromMapChangelist: _maps__WEBPACK_IMPORTED_MODULE_0__.removeFromMapChangelist,\n      applyCurrentMapChange: _maps__WEBPACK_IMPORTED_MODULE_0__.applyCurrentMapChange\n    }\n  };\n  window.nerthus.addCallbackToEvent('loaded', function () {\n    window.nerthus.loaded = true;\n  });\n}\n\n/*\n  If something is missing in API and you would want to use it,\n  feel free to open an issue\n */\n\n//# sourceURL=webpack://nerthusaddon/./src/API.js?");

/***/ }),

/***/ "./src/chat/chat.js":
/*!**************************!*\
  !*** ./src/chat/chat.js ***!
  \**************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initChatMgr: function() { return /* binding */ initChatMgr; },\n/* harmony export */   registerChatCommand: function() { return /* binding */ registerChatCommand; }\n/* harmony export */ });\n/* harmony import */ var _permissions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../permissions */ \"./src/permissions.js\");\n/* harmony import */ var _utility_functions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utility-functions */ \"./src/utility-functions.js\");\n/* harmony import */ var _drunkenness__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./drunkenness */ \"./src/chat/drunkenness.js\");\n\n\n\nvar commandsMap = {};\nvar commandsPublicMap = {};\nfunction fixUrl(text) {\n  var url = RegExp(/(https?)\\*Krzywi się\\.\\*(\\S+)/);\n  return text.replace(url, '$1:/$2');\n}\nfunction fetchCmd(chatMessageData) {\n  if (chatMessageData.text[0] === '*') {\n    var command = /^\\*(\\S+)/.exec(chatMessageData.text);\n    //fixes bug with /dice, and presumably '* text' messages\n    if (command) return command[1];\n  }\n}\nfunction fetchCallback(command, msg) {\n  if (commandsMap[command] && (0,_permissions__WEBPACK_IMPORTED_MODULE_0__.hasNarrationRights)(msg.authorBusinessCard.getAcc())) return commandsMap[command];else return commandsPublicMap[command];\n}\nfunction parseMessage(chatMessageData) {\n  // change message by directly editing object passed as reference\n  var command = fetchCmd(chatMessageData);\n  if (command) {\n    var callback = fetchCallback(command, chatMessageData);\n    if (callback) {\n      chatMessageData.text = fixUrl(chatMessageData.text);\n      log((0,_utility_functions__WEBPACK_IMPORTED_MODULE_1__.sanitizeText)(`[${chatMessageData.channel}] ${chatMessageData.authorBusinessCard.getNick()} -> ${chatMessageData.text}`)); // [which tab] author -> command\n\n      return callback(chatMessageData);\n    }\n  }\n  return true;\n}\nfunction initParseNerthusCommandsProxy() {\n  if (true) {\n    var oldAddMessage = Engine.chatController.addMessage;\n    Engine.chatController.addMessage = function (data) {\n      parseMessage(data);\n      return oldAddMessage.apply(Engine.chatController, arguments);\n    };\n  } else { var _oldAddMessage; }\n}\nfunction initChatMgr() {\n  initParseNerthusCommandsProxy();\n  (0,_drunkenness__WEBPACK_IMPORTED_MODULE_2__.initChatDrunkenness)();\n}\nfunction registerChatCommand(name, func, isPublic) {\n  if (isPublic) commandsPublicMap[name] = func;else commandsMap[name] = func;\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/chat/chat.js?");

/***/ }),

/***/ "./src/chat/commands.js":
/*!******************************!*\
  !*** ./src/chat/commands.js ***!
  \******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initBasicChatCommands: function() { return /* binding */ initBasicChatCommands; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_toArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toArray */ \"./node_modules/@babel/runtime/helpers/esm/toArray.js\");\n/* harmony import */ var _maps__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../maps */ \"./src/maps.js\");\n/* harmony import */ var _night_night__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../night/night */ \"./src/night/night.js\");\n/* harmony import */ var _npc_npc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../npc/npc */ \"./src/npc/npc.js\");\n/* harmony import */ var _npc_npc_actions_add__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../npc/npc-actions/add */ \"./src/npc/npc-actions/add.js\");\n/* harmony import */ var _npc_npc_actions_hide__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../npc/npc-actions/hide */ \"./src/npc/npc-actions/hide.js\");\n/* harmony import */ var _npc_npc_actions_remove__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../npc/npc-actions/remove */ \"./src/npc/npc-actions/remove.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../settings */ \"./src/settings.js\");\n/* harmony import */ var _utility_functions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utility-functions */ \"./src/utility-functions.js\");\n/* harmony import */ var _weather_effects__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../weather/effects */ \"./src/weather/effects.js\");\n/* harmony import */ var _weather_weather__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../weather/weather */ \"./src/weather/weather.js\");\n/* harmony import */ var _chat__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./chat */ \"./src/chat/chat.js\");\n\n\n\n\n\n\n\n\n\n\n\n\nvar BLOCKED_CHANNELS = ['TRADE', 'GLOBAL'];\nfunction getAuthorBusinessCardProxy(businessCard, newAuthorNick) {\n  return new Proxy(businessCard, {\n    get(target, prop) {\n      if (prop === 'getNick') return () => newAuthorNick;\n      return Reflect.get(...arguments);\n    }\n  });\n}\nfunction hideMessageIdentity(msg) {\n  msg.authorBusinessCard = new Proxy({}, {\n    get: () => () => ''\n  });\n  if (msg.receiverBusinessCard) {\n    msg.receiverBusinessCard = new Proxy({}, {\n      get: () => () => ''\n    });\n  }\n}\nfunction nar1(msg) {\n  msg.style = 'nerthus-nar1';\n  msg.nick = msg.authorBusinessCard.getNick();\n  hideMessageIdentity(msg);\n  msg.text = msg.text.replace(/^\\*nar1? /, '');\n  return msg;\n}\nfunction nar2(msg) {\n  msg.style = 'nerthus-nar2';\n  msg.nick = msg.authorBusinessCard.getNick();\n  hideMessageIdentity(msg);\n  msg.text = msg.text.replace(/^\\*nar2 /, '');\n  return msg;\n}\nfunction nar3(msg) {\n  msg.style = 'nerthus-nar3';\n  msg.nick = msg.authorBusinessCard.getNick();\n  hideMessageIdentity(msg);\n  msg.text = msg.text.replace(/^\\*nar3 /, '');\n  return msg;\n}\nfunction dial1(msg) {\n  msg.style = 'nerthus-dial1';\n  msg.nick = msg.authorBusinessCard.getNick();\n  var _msg$text$split$slice = msg.text.split(' ').slice(1).join(' ').split(','),\n    _msg$text$split$slice2 = (0,_babel_runtime_helpers_toArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_msg$text$split$slice),\n    author = _msg$text$split$slice2[0],\n    messageParts = _msg$text$split$slice2.slice(1);\n  msg.authorBusinessCard = getAuthorBusinessCardProxy(msg.authorBusinessCard, author);\n  msg.text = messageParts.join(',');\n  return msg;\n}\nfunction dial2(msg) {\n  msg.style = 'nerthus-dial2';\n  msg.nick = msg.authorBusinessCard.getNick();\n  var _msg$text$split$slice3 = msg.text.split(' ').slice(1).join(' ').split(','),\n    _msg$text$split$slice4 = (0,_babel_runtime_helpers_toArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_msg$text$split$slice3),\n    author = _msg$text$split$slice4[0],\n    messageParts = _msg$text$split$slice4.slice(1);\n  msg.authorBusinessCard = getAuthorBusinessCardProxy(msg.authorBusinessCard, author);\n  msg.text = messageParts.join(',');\n  return msg;\n}\nfunction dial3(msg) {\n  msg.style = 'nerthus-dial3';\n  msg.nick = msg.authorBusinessCard.getNick();\n  var _msg$text$split$slice5 = msg.text.split(' ').slice(1).join(' ').split(','),\n    _msg$text$split$slice6 = (0,_babel_runtime_helpers_toArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_msg$text$split$slice5),\n    author = _msg$text$split$slice6[0],\n    messageParts = _msg$text$split$slice6.slice(1);\n  msg.authorBusinessCard = getAuthorBusinessCardProxy(msg.authorBusinessCard, author);\n  msg.text = messageParts.join(',');\n  return msg;\n}\nfunction dial666(msg) {\n  msg.style = 'nerthus-dial666';\n  msg.nick = msg.authorBusinessCard.getNick();\n  var _msg$text$split$slice7 = msg.text.split(' ').slice(1).join(' ').split(','),\n    _msg$text$split$slice8 = (0,_babel_runtime_helpers_toArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_msg$text$split$slice7),\n    author = _msg$text$split$slice8[0],\n    messageParts = _msg$text$split$slice8.slice(1);\n  msg.authorBusinessCard = getAuthorBusinessCardProxy(msg.authorBusinessCard, author);\n  msg.text = messageParts.join(',');\n  return msg;\n}\nfunction sys(msg) {\n  msg.style = 'nerthus-sys';\n  msg.nick = msg.authorBusinessCard.getNick();\n  hideMessageIdentity(msg);\n  msg.text = msg.text.replace(/^\\*sys /, '');\n  return msg;\n}\nfunction map(msg) {\n  msg.style = 'nerthus-command';\n  var cmd = msg.text.split(' ').slice(1).join(' ').split(',');\n  var mapUrl = (0,_utility_functions__WEBPACK_IMPORTED_MODULE_8__.sanitizeText)(cmd[0]);\n  var mapId = parseInt(cmd[1]);\n  if (mapId) {\n    (0,_maps__WEBPACK_IMPORTED_MODULE_1__.addToMapChangelist)(mapUrl, 2, mapId);\n  } else if (BLOCKED_CHANNELS.includes(msg.channel)) {\n    // Do not change everyone's map on global or trade\n    return;\n  } else {\n    (0,_maps__WEBPACK_IMPORTED_MODULE_1__.addToMapChangelist)(mapUrl, 1);\n  }\n  (0,_maps__WEBPACK_IMPORTED_MODULE_1__.applyCurrentMapChange)();\n}\nfunction resetMap(msg) {\n  msg.style = 'nerthus-command';\n  var mapId = parseInt(msg.text.split(' ').slice(1).join(' '));\n  (0,_maps__WEBPACK_IMPORTED_MODULE_1__.removeFromMapChangelist)(2, mapId);\n  (0,_maps__WEBPACK_IMPORTED_MODULE_1__.applyCurrentMapChange)();\n  return false;\n}\nfunction light(msg) {\n  msg.style = 'nerthus-command';\n  var arr = msg.text.split(' ');\n  arr.shift();\n  var argArr = arr.join(' ').split(',');\n  if (BLOCKED_CHANNELS.includes(msg.channel) && (arr.length === 0 || !argArr[2])) {\n    // Do not change everyone's light on global or trade\n    return;\n  }\n  if (arr.length === 0) (0,_night_night__WEBPACK_IMPORTED_MODULE_2__.setForcedParameters)(-1, '#000'); // if no arguments\n  else {\n    var opacity = argArr[0].trim();\n    var color = argArr[1] ? argArr[1].trim() : '#000';\n    var mapId = argArr[2] ? argArr[2].trim() : 'default';\n    opacity = parseFloat(opacity.replace(',', '.'));\n    (0,_night_night__WEBPACK_IMPORTED_MODULE_2__.setForcedParameters)(1 - opacity, color, mapId);\n  }\n  (0,_night_night__WEBPACK_IMPORTED_MODULE_2__.applyCurrentNight)();\n  return false;\n}\nfunction addGraf(msg) {\n  msg.style = 'nerthus-command';\n  //cmd[0]=x, cmd[1]=y, cmd[2]=url, cmd[3]=tip_text, cmd[4]=isCol, cmd[5]=map_id\n  var cmd = msg.text.split(' ').slice(1).join(' ').split(',');\n  var x = parseInt(cmd[0]);\n  var y = parseInt(cmd[1]);\n  var url = (0,_utility_functions__WEBPACK_IMPORTED_MODULE_8__.sanitizeText)(cmd[2]);\n  var name = (0,_utility_functions__WEBPACK_IMPORTED_MODULE_8__.sanitizeText)(cmd[3]);\n  var nick = name ? `<b>${name}</b>` : '';\n  var isCol = parseInt(cmd[4]) > 0;\n  var mapId = parseInt(cmd[5]);\n  if (BLOCKED_CHANNELS.includes(msg.channel) && !mapId) {\n    // Do not add graphic on global or trade\n    return;\n  }\n  (0,_npc_npc_actions_add__WEBPACK_IMPORTED_MODULE_4__.addNpcToList)(new _npc_npc__WEBPACK_IMPORTED_MODULE_3__.Npc(x, y, url, nick, isCol), mapId);\n  return false;\n}\nfunction delGraf(msg) {\n  msg.style = 'nerthus-command';\n  var cmd = msg.text.split(' ')[1].split(',');\n  var x = parseInt(cmd[0]);\n  var y = parseInt(cmd[1]);\n  var mapId = parseInt(cmd[2]);\n  if (BLOCKED_CHANNELS.includes(msg.channel) && !mapId) {\n    // Do not add graphic on global or trade\n    return;\n  }\n  (0,_npc_npc_actions_remove__WEBPACK_IMPORTED_MODULE_6__.removeNpc)(x, y, mapId);\n  return false;\n}\nfunction hide(msg) {\n  msg.style = 'nerthus-command';\n  var cmd = msg.text.split(' ')[1];\n  var id = parseInt(cmd);\n  (0,_npc_npc_actions_hide__WEBPACK_IMPORTED_MODULE_5__.hideGameNpc)(id);\n  return false;\n}\nfunction weather(msg) {\n  msg.style = 'nerthus-command';\n  var weatherArr = /^\\*weather(?: ([\\w-]+)(?:, ?(\\d+))?)?/g.exec(msg.text);\n  if (!weatherArr) return false;\n  if (BLOCKED_CHANNELS.includes(msg.channel)) {\n    // Do not change weather on global or trade\n    return;\n  }\n  (0,_weather_weather__WEBPACK_IMPORTED_MODULE_10__.setForcedWeather)(weatherArr[1], weatherArr[2]);\n  if (_settings__WEBPACK_IMPORTED_MODULE_7__.settings.weatherEffects) (0,_weather_effects__WEBPACK_IMPORTED_MODULE_9__.clearEffects)(true);\n  (0,_weather_weather__WEBPACK_IMPORTED_MODULE_10__.displayWeather)();\n  return false;\n}\nfunction me(msg) {\n  msg.style = 2; // 2 is special style for regular `/me`\n  msg.nick = msg.authorBusinessCard.getNick();\n  hideMessageIdentity(msg);\n  msg.text = msg.text.replace(/^\\*me /, '');\n  return msg;\n}\nfunction lang(msg) {\n  console.log(msg);\n  if (msg.text.split(',').length < 2) return msg; // early return incorrect input\n\n  msg.style = `nerthus-lang nerthus-lang-ts-${msg.ts}`;\n  msg.text = msg.text.replace(/^\\*lang /, ''); // remove *lang\n  var cmd = msg.text.split(',');\n  var notAllowed = /[^a-ząćęłńóśźż -]/gi;\n  var tip = cmd[0].toLowerCase().replace(notAllowed, '');\n  cmd.shift(); // remove tip\n\n  msg.text = `*${cmd.join(',').trim()}*`;\n\n  // add language tip after message is added to the page\n  setTimeout(function () {\n    var elements = Array.from(document.querySelectorAll(`.nerthus-lang-ts-${msg.ts} .message-part`));\n    for (var _i = 0, _elements = elements; _i < _elements.length; _i++) {\n      var element = _elements[_i];\n      $(element).tip(`Język wiadomości: ${tip}`);\n    }\n  }, 0);\n  return msg;\n}\nvar narratorCommands = {\n  'nar': nar1,\n  'nar1': nar1,\n  'nar2': nar2,\n  'nar3': nar3,\n  'dial': dial1,\n  'dial1': dial1,\n  'dial2': dial2,\n  'dial3': dial3,\n  'dial666': dial666,\n  'sys': sys,\n  'map': map,\n  'resetMap': resetMap,\n  'light': light,\n  'addGraf': addGraf,\n  'delGraf': delGraf,\n  'hide': hide,\n  'weather': weather\n};\nvar publicCommands = {\n  'me': me,\n  'lang': lang\n};\nfunction initBasicChatCommands() {\n  for (var cmd in narratorCommands) (0,_chat__WEBPACK_IMPORTED_MODULE_11__.registerChatCommand)(cmd, narratorCommands[cmd], false);\n  for (var _cmd in publicCommands) (0,_chat__WEBPACK_IMPORTED_MODULE_11__.registerChatCommand)(_cmd, publicCommands[_cmd], true);\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/chat/commands.js?");

/***/ }),

/***/ "./src/chat/drunkenness.js":
/*!*********************************!*\
  !*** ./src/chat/drunkenness.js ***!
  \*********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initChatDrunkenness: function() { return /* binding */ initChatDrunkenness; }\n/* harmony export */ });\nvar intoxicationLvl = 0;\nvar decayTimerID = null;\nfunction decayTimerHandler() {\n  intoxicationLvl--;\n  localStorage.setItem('nerthus-intoxication-lvl', intoxicationLvl);\n  if (intoxicationLvl < 1) {\n    intoxicationLvl = 0;\n    clearInterval(decayTimerID);\n    decayTimerID = null;\n  }\n}\nfunction shuffleArray(array, cc)\n// sic\n{\n  var przestanek = 0;\n  if (typeof cc == 'undefined') cc = 0;\n  if (['.', ',', '?', '!'].lastIndexOf(array[array.length - 1]) > -1) przestanek = 1;\n  for (var i = array.length - 1 - cc - przestanek; i > 0 + cc; i--) {\n    var j = Math.floor(Math.random() * (i + 1 - cc) + cc);\n    var temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n  return array;\n}\nfunction shuffleMessage(msg) {\n  if (intoxicationLvl === 0 || ['*/@'].indexOf(msg[0]) >= 0) return msg;\n  var t = [];\n  switch (Math.floor(intoxicationLvl / 10)) {\n    case 10:\n    case 9:\n      msg = '/me bełkota coś niezrozumiale.';\n      break;\n    case 8:\n      msg = shuffleArray(msg.split(' ')).join(' ');\n    // fallthrough\n    case 7:\n      t = msg.split(', ');\n      for (var index in t) t[index] = shuffleArray(t[index].split(' ')).join(' ');\n      msg = t.join(', ');\n    // fallthrough\n    case 6:\n      t = msg.split(', ');\n      for (var _index in t) t[_index] = shuffleArray(t[_index].split(' '), 1).join(' ');\n      msg = t.join(', ');\n    // fallthrough\n    case 5:\n      t = msg.split(' ');\n      for (var _index2 in t) if (t[_index2].length > 4) t[_index2] = shuffleArray(t[_index2].split('')).join('');\n      msg = t.join(' ');\n    // fallthrough\n    case 4:\n      t = msg.split(' ');\n      for (var _index3 in t) if (t[_index3].length > 5) t[_index3] = shuffleArray(t[_index3].split('')).join('');\n      msg = t.join(' ');\n    // fallthrough\n    case 3:\n      t = msg.split(' ');\n      for (var _index4 in t) if (t[_index4].length > 4) t[_index4] = shuffleArray(t[_index4].split(''), 1).join('');\n      msg = t.join(' ');\n    // fallthrough\n    case 2:\n      t = msg.split(' ');\n      for (var _index5 in t) if (t[_index5].length > 5) t[_index5] = shuffleArray(t[_index5].split(''), 1).join('');\n      msg = t.join(' ');\n    // fallthrough\n    case 1:\n      msg = msg.replace(/[.,:?!-]/g, ' *hik*');\n      break;\n    case 0:\n      msg = msg.replace(/[.,:?!-]/g, '');\n  }\n  return msg;\n}\nfunction commandContainsDrinkingAlcohol(command) {\n  var match = command.match(/^moveitem.*id=(\\d+)/);\n  // st=1 means that it is eaten and not dropped or destroyed.\n  if (match && command.includes('&st=1')) {\n    var item;\n    if (true) {\n      item = Engine.items.getItemById(match[1]);\n    } else {}\n    if (item && item.cl === 16 &&\n    // cl = 16 means it's consumable\n    item.stat.search('lvl=') > -1 && parseInt(item.stat.match(/lvl=([0-9]+)/)[1]) === 18) return true;\n  }\n  return false;\n}\nfunction initChatDrunkenness() {\n  return false; // Temporarily turned off\n\n  var savedIntoxicationLvl = localStorage.getItem('nerthus-intoxication-lvl');\n  if (savedIntoxicationLvl) intoxicationLvl = parseInt(savedIntoxicationLvl);\n  if (intoxicationLvl) decayTimerID = setInterval(decayTimerHandler, 10000);\n  var __g = _g;\n  window._g = function (task, callback, payload) {\n    if (commandContainsDrinkingAlcohol(task)) {\n      intoxicationLvl += 10;\n      if (intoxicationLvl > 100) intoxicationLvl = 100;\n      localStorage.setItem('nerthus-intoxication-lvl', intoxicationLvl);\n      if (!decayTimerID) decayTimerID = setInterval(decayTimerHandler, 10000);\n    }\n    __g(task, callback, payload);\n  };\n  if (true) {\n    var _chatSendMsg = Engine.chat.sendMessage;\n    Engine.chat.sendMessage = function (msg) {\n      _chatSendMsg.call(Engine.chat, shuffleMessage(msg));\n    };\n  } else { var _chatSendMsg2; }\n}\n\n/**\n * Original version license:\n * ==================================================================\n * OBSŁUGA PICIA - Autor Godfryd\n * ==================================================================\n */\n\n//# sourceURL=webpack://nerthusaddon/./src/chat/drunkenness.js?");

/***/ }),

/***/ "./src/game-integration/loaders.js":
/*!*****************************************!*\
  !*** ./src/game-integration/loaders.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addToNiDrawList: function() { return /* binding */ addToNiDrawList; },\n/* harmony export */   initiateGameIntegrationLoaders: function() { return /* binding */ initiateGameIntegrationLoaders; },\n/* harmony export */   loadOnEveryMap: function() { return /* binding */ loadOnEveryMap; },\n/* harmony export */   removeFromNiDrawList: function() { return /* binding */ removeFromNiDrawList; }\n/* harmony export */ });\nvar currentLoadedMapId = -1;\nvar loadQueue = [];\n\n/**\n * Executes function immediately, then executes it at every new map load\n * @param fun - function that will be executed\n * @param args - arguments function will take\n */\nfunction loadOnEveryMap(fun, args) {\n  if (currentLoadedMapId !== -1) fun(args);\n  loadQueue.push([fun, args]);\n}\nfunction loadNewMapQueue() {\n  if (true) {\n    currentLoadedMapId = Engine.map.d.id;\n  } else {}\n  for (var i in loadQueue) {\n    loadQueue[i][0](loadQueue[i][1]);\n  }\n}\nfunction initiateGameIntegrationLoaders()\n//TODO bug: sometimes long loading new map is loaded faster than old\n{\n  if (true) {\n    currentLoadedMapId = Engine.map.d.id;\n    var hideLoaderSplash = Engine.map.hideLoaderSplash;\n    Engine.map.hideLoaderSplash = function () {\n      if (Engine.map.d.id !== currentLoadedMapId) {\n        loadNewMapQueue();\n      }\n      hideLoaderSplash.call(Engine.map);\n    };\n  } else {}\n}\nfunction addToNiDrawList(preparedObject, id) {\n  var npcList = Engine.npcs.check();\n  npcList[id] = preparedObject;\n}\nfunction removeFromNiDrawList(id) {\n  var npcList = Engine.npcs.check();\n  delete npcList[id];\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/game-integration/loaders.js?");

/***/ }),

/***/ "./src/game-integration/tips.js":
/*!**************************************!*\
  !*** ./src/game-integration/tips.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initTips: function() { return /* binding */ initTips; }\n/* harmony export */ });\n/* harmony import */ var _res_configs_lvl_names__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../res/configs/lvl-names */ \"./res/configs/lvl-names.json\");\n/* harmony import */ var _res_configs_vips__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../res/configs/vips */ \"./res/configs/vips.json\");\n/* harmony import */ var _permissions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../permissions */ \"./src/permissions.js\");\n\n\n\nvar RANK_NAMES = ['Kreator', 'Uber Miszcz Gry', 'Miszcz Gry', 'Strażnik Słowa', 'Tkacz Słów', 'Trubadur', 'Piewca Słowa', 'Radny', 'Namiestnik'];\nvar RANKS = {\n  NONE: -1,\n  ADM: 0,\n  SMG: 1,\n  MG: 2,\n  MC: 3,\n  SMC: 4,\n  NARRATOR: 5,\n  NARRATOR_MC: 6,\n  COUNCILOR: 7,\n  NAMIESTNIK: 8\n};\nvar RIGHTS = {\n  ADM: 1,\n  MG: 2,\n  SMG: 16\n};\nfunction rights2rank(rights) {\n  if (rights & RIGHTS.ADM) return RANKS.ADM;\n  if (rights & RIGHTS.SMG) return RANKS.SMG;\n  if (rights & RIGHTS.MG) return RANKS.MG;\n  if (rights) return RANKS.MC;\n  return RANKS.NONE;\n}\nfunction getRankNameOf(player) {\n  var rank = RANKS.NONE;\n  if (player.rights) rank = rights2rank(player.rights);\n  switch ((0,_permissions__WEBPACK_IMPORTED_MODULE_2__.checkPermissionLvl)(player.account)) {\n    case _permissions__WEBPACK_IMPORTED_MODULE_2__.PERMISSION_LVL.NARRATOR:\n      if (rank === RANKS.MC) rank = RANKS.NARRATOR_MC;else rank = RANKS.NARRATOR;\n      break;\n    case _permissions__WEBPACK_IMPORTED_MODULE_2__.PERMISSION_LVL.COUNCILOR:\n      rank = RANKS.COUNCILOR;\n      break;\n    case _permissions__WEBPACK_IMPORTED_MODULE_2__.PERMISSION_LVL.NAMIESTNIK:\n      rank = RANKS.NAMIESTNIK;\n      break;\n  }\n  return rank === RANKS.NONE ? '' : RANK_NAMES[rank];\n}\nfunction getTitle(player) {\n  var title = _res_configs_vips__WEBPACK_IMPORTED_MODULE_1__[parseInt(player.id)];\n  if (title) return title;\n  if (player.lvl) return _res_configs_lvl_names__WEBPACK_IMPORTED_MODULE_0__[Math.min(_res_configs_lvl_names__WEBPACK_IMPORTED_MODULE_0__.length - 1, parseInt(player.lvl) - 1 >> 3)];\n  return '';\n}\nfunction createPlayerTip(player) {\n  var tip = '<div style=\"text-align: center\"><b>' + player.nick + '</b>';\n  tip += player.ble ? '<b class=\"bless\">' + player.ble + '</b>' : '';\n  tip += player.clan ? '[' + player.clan.name + ']<br>' : '';\n  tip += '<div style=\"text-align: center;\">' + getTitle(player) + '</div>';\n  var rank = getRankNameOf(player);\n  tip += rank ? '<i style=\"color: #f90\">' + rank + '</i>' : '';\n  tip += player.attr & 1 ? '<img src=img/mute.gif>' : '';\n  tip += '</div>';\n  return tip;\n}\nfunction getPlayerBuffSection(player) {\n  var buffs = '';\n  var bless = player.d.is_blessed ? '<div class=\"bless\"></div>' : '';\n  var mute = player.d.attr & 1 ? '<div class=\"mute\"></div>' : '';\n  var kB = player.d.vip === '1' ? '<div class=\"k-b\"></div>' : '';\n  var warn = player.d.attr & 2 ? '<div class=\"warn\"></div>' : '';\n  var line = player.d.clan ? '<div class=\"line\"></div>' : '';\n  var wanted = player.d.wanted ? '<div class=\"wanted-i\"></div>' : '';\n  if (bless !== '' || mute !== '' || kB !== '' || warn !== '' || wanted !== '') {\n    buffs = `<div class=\"buffs-wrapper\">${line}${wanted}${bless}${mute}${kB}${warn}</div>`;\n  }\n  return buffs;\n}\nfunction parseTip(player) {\n  if (true) {\n    var tip = '';\n    var rank = getRankNameOf(player.d);\n    if (rank) tip += '<div class=\"rank\">' + rank + '</div>';\n    if (player.d.guest) tip += '<div class=\"rank\">' + _t('deputy') + '</div>';\n    var nick = '<div class=\"nick\">' + player.d.nick + '</div>';\n    var prof = player.d.prof ? '<div class=\"profs-icon ' + player.d.prof + '\"></div>' : '';\n    tip += '<div class=\"info-wrapper\">' + nick + prof + '</div>';\n    if (parseInt(player.wanted) === 1) tip += '<div class=wanted></div>';\n    if (player.d.clan) tip += '<div class=\"clan-in-tip\">[' + player.d.clan.name + ']</div>';\n    var title = getTitle(player.d);\n    tip += '<div class=\"clan-in-tip\">' + title + '</div>';\n    tip += getPlayerBuffSection(player);\n    return tip;\n  }\n}\nfunction getNpcTypeName(worldType) {\n  if (worldType > 99) return 'tytan';\n  if (worldType > 79) return 'heros';\n  if (worldType > 29) return 'elita III';\n  if (worldType > 19) return 'elita II';\n  if (worldType > 9) return 'elita';\n  return '';\n}\nfunction getNpcDanger(npc) {\n  if (npc.type === 2 || npc.type === 3) {\n    var lvlDiff = npc.lvl - hero.lvl;\n    if (lvlDiff < -13) return {\n      style: 'style=\"color:#888\"',\n      str: 'Niewarty uwagi'\n    };\n    if (lvlDiff > 19) return {\n      style: 'style=\"color:#f50\"',\n      str: 'Potężny przeciwnik'\n    };\n    if (lvlDiff > 9) return {\n      style: 'style=\"color:#ff0\"',\n      str: 'Poważny rywal'\n    };\n    return {\n      style: '',\n      str: 'Zwykły przeciwnik'\n    };\n  }\n  return {\n    style: '',\n    str: ''\n  };\n}\nfunction createNpcTip(npc) {\n  var tip = '<b>' + window.htmlspecialchars(window.parseBasicBB(npc.nick, false)) + '</b>';\n  if (npc.type === 4) return tip;\n  var type = getNpcTypeName(npc.wt);\n  tip += type ? '<i>' + type + '</i>' : '';\n  if (npc.type <= 0) return tip;\n  var danger = getNpcDanger(npc);\n  var grp = npc.grp ? ', w grupie' : '';\n  tip += '<span ' + danger.style + '>' + danger.str + grp + '</span>';\n  return tip;\n}\nfunction initTips() {\n  if (true) {\n    var othersDrawableList = Engine.others.getDrawableList;\n    Engine.others.getDrawableList = function () {\n      var list = othersDrawableList();\n      for (var i in list) {\n        if (list[i].isPlayer) list[i].tip[0] = parseTip(list[i], false);\n      }\n      return list;\n    };\n    Engine.hero.createStrTip = function () {\n      return parseTip(Engine.hero, true);\n    };\n    Engine.hero.tip[0] = Engine.hero.createStrTip();\n  } else {}\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/game-integration/tips.js?");

/***/ }),

/***/ "./src/interface/css-manager.js":
/*!**************************************!*\
  !*** ./src/interface/css-manager.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addBasicStyles: function() { return /* binding */ addBasicStyles; },\n/* harmony export */   addCustomStyle: function() { return /* binding */ addCustomStyle; },\n/* harmony export */   changeCustomStyle: function() { return /* binding */ changeCustomStyle; },\n/* harmony export */   removeCustomStyle: function() { return /* binding */ removeCustomStyle; },\n/* harmony export */   toggleCustomStyle: function() { return /* binding */ toggleCustomStyle; }\n/* harmony export */ });\nfunction addBasicStyles() {\n  $('<link rel=\"stylesheet\" href=\"' + \"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + 'res/css/style.css' + '\">').appendTo('head');\n}\nvar $style = $('<style id=\"nerthus-additional-styles\">').appendTo('head');\nvar styles = {};\nfunction addCustomStyle(styleName, styleContent) {\n  if (!styles[styleName]) {\n    var oldStyleTextLength = $style.text().length;\n    $style.append(styleContent);\n    styles[styleName] = $style.text().substring(oldStyleTextLength);\n  }\n}\nfunction changeCustomStyle(styleName, styleContent) {\n  if (styles[styleName]) removeCustomStyle(styleName);\n  addCustomStyle(styleName, styleContent);\n}\nfunction removeCustomStyle(styleName) {\n  if (styles[styleName]) {\n    var newStyleText = $style.text().split(styles[styleName]).join('');\n    $style.text(newStyleText);\n    delete styles[styleName];\n  }\n}\nfunction toggleCustomStyle(styleName, styleContent) {\n  if (styles[styleName]) removeCustomStyle(styleName);else addCustomStyle(styleName, styleContent);\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/interface/css-manager.js?");

/***/ }),

/***/ "./src/interface/panel.js":
/*!********************************!*\
  !*** ./src/interface/panel.js ***!
  \********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addSettingToPanel: function() { return /* binding */ addSettingToPanel; },\n/* harmony export */   initPanel: function() { return /* binding */ initPanel; }\n/* harmony export */ });\n/* harmony import */ var _night_light_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../night/light-manager */ \"./src/night/light-manager.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../settings */ \"./src/settings.js\");\n/* harmony import */ var _utility_functions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-functions */ \"./src/utility-functions.js\");\n\n\n\nvar ELEMENT_TO_ATTACH_TO =  true ? 'body' : 0;\nvar $elm = $();\nvar defaultPosition = [6, 'top-right'];\nvar settingsList = [];\n\n/**\n * Contains functions that return strings that are representations of elements\n */\nvar constructElement = {};\nconstructElement.button = function (data) {\n  // Guard against github crawler bots\n  data.url = data.url.replace('DISCORD_URL', 'discord.gg');\n  return '<a href=\"' + data.url + '\" target=\"_blank\" class=\"button\" tip=\"' + data.name + '\">' + '<img src=\"' + \"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + 'res/img/panel/' + data.icon + '\" alt=\"' + data.name + '\">' + '</a>';\n};\nconstructElement.buttonGroup = function (groupData) {\n  var buttonGroup = [];\n  var len = groupData.length;\n  for (var i = 0; i < len; i++) buttonGroup.push(this.button(groupData[i]));\n  return buttonGroup.join('');\n};\nconstructElement.settings = function () {\n  return '<div class=\"top-box\"></div>' + '<div class=\"bottom-box\">' + '<button class=\"button text-button save-button\">Zapisz</button>' + '<button class=\"button text-button cancel-button\">Anuluj</button>' + '</div>';\n};\nconstructElement.panel = function (buttonGroupLeft, buttonGroupCenter, buttonGroupRight, settings) {\n  var lightManagerButton = '';\n  if (false) {}\n  return '<div id=\"nerthus-main-panel\" class=\"nerthus-panel\">' + '<div class=\"header-label-positioner\">' + '<div class=\"header-label\">' + '<div class=\"left-decor\"></div>' + '<div class=\"right-decor\"></div>' + '<span class=\"panel-name\">Panel Nerthusa</span>' + '</div>' + '</div>' + '<div class=\"close-decor\">' + '<button class=\"close-button\" tip=\"Zamknij\"/>' + '</div>' + '<div class=\"background\">' + '<div class=\"default-panel\">' + '<div class=\"top-box\">' + '<div id=\"button-group-left\" class=\"button-group\">' + buttonGroupLeft + '</div>' + '<div id=\"button-group-center\" class=\"button-group\">' + buttonGroupCenter + '</div>' + '<div id=\"button-group-right\" class=\"button-group\">' + buttonGroupRight + '</div>' + '</div>' + '<div class=\"bottom-box\">' + '<button class=\"button text-button ok-button\">OK</button>' + '</div>' + '</div>' + '<div class=\"settings-panel hidden\">' + settings + '</div>' + lightManagerButton + '<button id=\"settings-button\" class=\"button nerthus-settings-button\" tip=\"Ustawienia\">' + '<img src=\"' + \"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + 'res/img/panel/settings.png' + '\" alt=\"Ustawienia\">' + '</button>' + '</div>' + '</div>';\n};\nconstructElement.icon = function () {\n  return '<img id=\"nerthus-shield\" src=\"' + \"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + 'res/img/widget-icon.gif\" tip=\"Nerthus\" alt=\"Nerthus panel\">';\n};\nfunction closePanel($elm) {\n  $elm.css({\n    visibility: 'hidden',\n    opacity: '0'\n  }); // reset opacity as we're still holding reference\n  $elm.find('.default-panel').removeClass('hidden');\n  $elm.find('.settings-panel').addClass('hidden');\n  var $settingsButton = $elm.find('#settings-button');\n  if (true) $settingsButton.tip('Ustawienia');else {}\n  $settingsButton.children().attr('src', \"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + 'res/img/panel/settings.png');\n  $settingsButton.removeClass('back-to-default');\n  $elm.find('.panel-name').text('Panel Nerthusa');\n}\nfunction createPanel(data, hidden) {\n  if (!$elm.parent || !$elm.parent(ELEMENT_TO_ATTACH_TO).length) {\n    var buttonGroupLeft = constructElement.buttonGroup(data.leftPanel);\n    var buttonGroupCenter = constructElement.buttonGroup(data.centerPanel);\n    var buttonGroupRight = constructElement.buttonGroup(data.rightPanel);\n    var settingsElement = constructElement.settings();\n    $elm = $(constructElement.panel(buttonGroupLeft, buttonGroupCenter, buttonGroupRight, settingsElement));\n    var $defaultPanel = $elm.find('.default-panel');\n    var $settingsPanel = $elm.find('.settings-panel');\n    var $panelName = $elm.find('.panel-name');\n    $settingsPanel.find('.top-box').append(settingsList);\n    $elm.find('#settings-button').click(function () {\n      $defaultPanel.toggleClass('hidden');\n      $settingsPanel.toggleClass('hidden');\n      var $this = $(this);\n      $this.toggleClass('back-to-default');\n      if ($settingsPanel.hasClass('hidden')) {\n        if (true) $this.tip('Ustawienia');else {}\n        $this.children().attr('src', \"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + 'res/img/panel/settings.png');\n        $panelName.text('Panel Nerthusa');\n      } else {\n        if (true) $this.tip('Powrót');else {}\n        $this.children().attr('src', \"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + 'res/img/panel/settings-back.png');\n        $panelName.text('Panel Nerthusa - ustawienia');\n      }\n    }).end().find('.close-button, .cancel-button, .ok-button').click(function () {\n      closePanel($elm);\n    }).end().find('.save-button').click(function () {\n      saveSettings();\n      closePanel($elm);\n    }).end().find('#light-manager-button').click(function () {\n      (0,_night_light_manager__WEBPACK_IMPORTED_MODULE_0__.initLightManager)();\n      closePanel($elm);\n    }).end();\n    $elm.css({\n      visibility: hidden ? 'hidden' : 'visible',\n      opacity: 0\n    }).appendTo(ELEMENT_TO_ATTACH_TO).css('opacity', hidden ? '0' : '1'); // change opacity after appending to ELEMENT_TO_ATTACH_TO for nice animation\n\n    (0,_utility_functions__WEBPACK_IMPORTED_MODULE_2__.addDraggable)($elm, '.header-label-positioner');\n    if (true) {\n      $('[tip]', $elm).each(function () {\n        var $this = $(this);\n        $this.tip($this.attr('tip'));\n      });\n    }\n  }\n}\nfunction preloadPanel() {\n  if (!$elm.parent || !$elm.parent(ELEMENT_TO_ATTACH_TO).length) $.getJSON(\"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + 'res/configs/panel-links.json', function (data) {\n    createPanel(data, true);\n  });\n}\nfunction togglePanel() {\n  if (!$elm.parent || !$elm.parent(ELEMENT_TO_ATTACH_TO).length) {\n    return $.getJSON(\"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + 'res/configs/panel-links.json', data => createPanel(data, false));\n  }\n  if ($elm.css('visibility') === 'visible') return $elm.css({\n    visibility: 'hidden',\n    opacity: '0'\n  });\n  $elm.css({\n    visibility: 'visible',\n    opacity: '1'\n  });\n}\nfunction saveSettings() {\n  $elm.find('.setting-checkbox').each(function () {\n    (0,_settings__WEBPACK_IMPORTED_MODULE_1__.saveSetting)(this.name, this.checked);\n  });\n  message('Zapisano, odśwież stronę');\n}\nfunction createButtonNI() {\n  if (Engine.interfaceStart && Object.keys(Engine.widgetManager.getDefaultWidgetSet()).includes('nerthus')) {\n    var nerthusPos = defaultPosition;\n    var serverStoragePos = Engine.serverStorage.get(Engine.widgetManager.getPathToHotWidgetVersion());\n    if (serverStoragePos && serverStoragePos.nerthus) nerthusPos = serverStoragePos.nerthus;\n    Engine.widgetManager.createOneWidget('nerthus', {\n      nerthus: nerthusPos\n    }, true, []);\n    Engine.widgetManager.setEnableDraggingButtonsWidget(false);\n  } else setTimeout(createButtonNI, 500);\n}\nfunction addSettingToPanel(settingName, translation, tip, callback) {\n  var checked = _settings__WEBPACK_IMPORTED_MODULE_1__.settings[settingName] ? ' checked' : '';\n  var $setting = $(`\n<label class=\"setting-label\">\n    <span class=\"setting-label-text\" tip=\"${tip}\">${translation}</span>\n    <input class=\"setting-checkbox\" name=\"${settingName}\" type=\"checkbox\" ${checked}>\n    <span class=\"checkbox-outline\">\n        <span class=\"checkmark\">\n        <div class=\"checkmark-stem\"></div>\n        <div class=\"checkmark-kick\"></div>\n    </span>\n    </span>\n</label>\n`).change(function (e) {\n    (0,_settings__WEBPACK_IMPORTED_MODULE_1__.saveSetting)(settingName, e.target.checked);\n  }).change(callback);\n  settingsList.push($setting.get()[0]); // SI uses jquery 1.4, therefore we can't append array of jquery elements\n}\nfunction initPanel() {\n  if (true) {\n    var addNerthusToDefaultWidgetSet = function addNerthusToDefaultWidgetSet() {\n      Engine.widgetManager.addKeyToDefaultWidgetSet('nerthus', defaultPosition[0], defaultPosition[1], 'Nerthus', 'green', togglePanel);\n    };\n    $('head').append('<style>' + '.main-buttons-container .widget-button .icon.nerthus {' + 'background-image: url(' + \"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + 'res/img/widget-icon.gif);' + 'background-position: 0;' + '}' + '</style>');\n    var addWidgetButtons = Engine.widgetManager.addWidgetButtons;\n    Engine.widgetManager.addWidgetButtons = function (additionalBarHide) {\n      addWidgetButtons.call(Engine.widgetManager, additionalBarHide);\n      addNerthusToDefaultWidgetSet();\n      createButtonNI();\n\n      // Only add Nerthus button once, then return to default function\n      Engine.widgetManager.addWidgetButtons = addWidgetButtons;\n    };\n\n    // If interface was already initialised, add Nerthus button manually (as addWidgetButtons already ran)\n    if (Engine.interfaceStart) {\n      addNerthusToDefaultWidgetSet();\n      createButtonNI();\n    }\n  } else {}\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/interface/panel.js?");

/***/ }),

/***/ "./src/main.js":
/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _API__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./API */ \"./src/API.js\");\n/* harmony import */ var _chat_chat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat/chat */ \"./src/chat/chat.js\");\n/* harmony import */ var _chat_commands__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./chat/commands */ \"./src/chat/commands.js\");\n/* harmony import */ var _game_integration_loaders__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./game-integration/loaders */ \"./src/game-integration/loaders.js\");\n/* harmony import */ var _game_integration_tips__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./game-integration/tips */ \"./src/game-integration/tips.js\");\n/* harmony import */ var _interface_css_manager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./interface/css-manager */ \"./src/interface/css-manager.js\");\n/* harmony import */ var _interface_panel__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./interface/panel */ \"./src/interface/panel.js\");\n/* harmony import */ var _maps__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./maps */ \"./src/maps.js\");\n/* harmony import */ var _night_night__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./night/night */ \"./src/night/night.js\");\n/* harmony import */ var _npc_npc__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./npc/npc */ \"./src/npc/npc.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./settings */ \"./src/settings.js\");\n/* harmony import */ var _weather_weather__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./weather/weather */ \"./src/weather/weather.js\");\n/* harmony import */ var _widgets__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./widgets */ \"./src/widgets.js\");\n/* harmony import */ var _zodiac__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./zodiac */ \"./src/zodiac.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction start() {\n  (0,_API__WEBPACK_IMPORTED_MODULE_0__.initAPI)();\n  (0,_interface_css_manager__WEBPACK_IMPORTED_MODULE_5__.addBasicStyles)();\n  (0,_settings__WEBPACK_IMPORTED_MODULE_10__.loadSettings)();\n  (0,_game_integration_tips__WEBPACK_IMPORTED_MODULE_4__.initTips)();\n  (0,_game_integration_loaders__WEBPACK_IMPORTED_MODULE_3__.initiateGameIntegrationLoaders)();\n  (0,_maps__WEBPACK_IMPORTED_MODULE_7__.initMapsManager)();\n  (0,_npc_npc__WEBPACK_IMPORTED_MODULE_9__.initNpcManager)();\n  (0,_night_night__WEBPACK_IMPORTED_MODULE_8__.initNightManager)();\n  (0,_widgets__WEBPACK_IMPORTED_MODULE_12__.initWidgets)();\n  (0,_weather_weather__WEBPACK_IMPORTED_MODULE_11__.initWeather)();\n  (0,_zodiac__WEBPACK_IMPORTED_MODULE_13__.initZodiac)();\n  (0,_chat_commands__WEBPACK_IMPORTED_MODULE_2__.initBasicChatCommands)();\n  (0,_chat_chat__WEBPACK_IMPORTED_MODULE_1__.initChatMgr)();\n  (0,_interface_panel__WEBPACK_IMPORTED_MODULE_6__.initPanel)();\n  (0,_API__WEBPACK_IMPORTED_MODULE_0__.callEvent)('loaded');\n}\nif (true) {\n  var _Engine;\n  if ((_Engine = Engine) !== null && _Engine !== void 0 && (_Engine = _Engine.map) !== null && _Engine !== void 0 && (_Engine = _Engine.d) !== null && _Engine !== void 0 && _Engine.id) start();else {\n    // We need to make sure the map image is loaded, as most of\n    // the Engine's functions won't work correctly without it.\n    // Since we can't influence weirdly linked dependencies in\n    // the game's code, we are going to use this hack, as\n    // we know for certain hero.updateCollider is called once\n    // after map update\n    var heroUpdateCollider = Engine.hero.updateCollider;\n    Engine.hero.updateCollider = function () {\n      heroUpdateCollider.call(Engine.hero);\n      // Make sure the map image has been loaded, as something else can\n      // execute this function otherwise.\n      if (Engine.map.imgLoaded) {\n        // We only want to start once, so after starting,\n        // this hook is no longer needed. That's why we\n        // change it back to default.\n        Engine.hero.updateCollider = heroUpdateCollider;\n        start();\n      }\n    };\n  }\n} else {}\n\n//# sourceURL=webpack://nerthusaddon/./src/main.js?");

/***/ }),

/***/ "./src/maps.js":
/*!*********************!*\
  !*** ./src/maps.js ***!
  \*********************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MAP_PRIORITY: function() { return /* binding */ MAP_PRIORITY; },\n/* harmony export */   addToMapChangelist: function() { return /* binding */ addToMapChangelist; },\n/* harmony export */   applyCurrentMapChange: function() { return /* binding */ applyCurrentMapChange; },\n/* harmony export */   initMapsManager: function() { return /* binding */ initMapsManager; },\n/* harmony export */   removeFromMapChangelist: function() { return /* binding */ removeFromMapChangelist; }\n/* harmony export */ });\n/* harmony import */ var _src_interface_css_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../src/interface/css-manager */ \"./src/interface/css-manager.js\");\n/* harmony import */ var _res_configs_maps_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../res/configs/maps.json */ \"./res/configs/maps.json\");\n/* harmony import */ var _game_integration_loaders__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./game-integration/loaders */ \"./src/game-integration/loaders.js\");\n/* harmony import */ var _time__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./time */ \"./src/time.js\");\n/* harmony import */ var _utility_functions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utility-functions */ \"./src/utility-functions.js\");\n\n\n\n\n\nvar MAP_PRIORITY = {\n  CUSTOM: 2,\n  CUSTOM_NO_ID: 1,\n  BASIC: 0\n};\nvar currentMapImage = new Image();\nvar customMapNoIdUrl;\nvar customMapsUrls = {};\nfunction addToMapChangelist(url, priority, mapId) {\n  switch (priority) {\n    case MAP_PRIORITY.CUSTOM:\n      customMapsUrls[mapId] = url;\n      return;\n    case MAP_PRIORITY.CUSTOM_NO_ID:\n      customMapNoIdUrl = url;\n      return;\n  }\n}\nfunction removeFromMapChangelist(priority, mapId) {\n  switch (priority) {\n    case MAP_PRIORITY.CUSTOM:\n      delete customMapsUrls[mapId];\n      return;\n    case MAP_PRIORITY.CUSTOM_NO_ID:\n      customMapNoIdUrl = '';\n      return;\n  }\n}\nfunction getBasicMapUrl(mapId) {\n  var season = (0,_time__WEBPACK_IMPORTED_MODULE_3__.getCurrentSeason)();\n  if (_res_configs_maps_json__WEBPACK_IMPORTED_MODULE_1__[season][mapId]) return _res_configs_maps_json__WEBPACK_IMPORTED_MODULE_1__[season][mapId];else if (_res_configs_maps_json__WEBPACK_IMPORTED_MODULE_1__[\"default\"][mapId]) return _res_configs_maps_json__WEBPACK_IMPORTED_MODULE_1__[\"default\"][mapId];else return false;\n}\nfunction applyMapChange(mapId) {\n  var mapImage = new Image();\n  var basicMapUrl = getBasicMapUrl(mapId);\n  if (customMapsUrls[mapId]) mapImage.src = (0,_utility_functions__WEBPACK_IMPORTED_MODULE_4__.resolveUrl)(customMapsUrls[mapId]);else if (customMapNoIdUrl) mapImage.src = (0,_utility_functions__WEBPACK_IMPORTED_MODULE_4__.resolveUrl)(customMapNoIdUrl);else if (basicMapUrl) mapImage.src = (0,_utility_functions__WEBPACK_IMPORTED_MODULE_4__.resolveUrl)(basicMapUrl);\n  currentMapImage.src = mapImage.src;\n  if (false) {}\n}\nfunction startMapChanging() {\n  //manipulation of map\n  var tmpMapDraw = Engine.map.draw;\n  Engine.map.draw = function (canvasRenderingContext) {\n    //draw normal map\n    tmpMapDraw.call(Engine.map, canvasRenderingContext);\n\n    //draw new maps on top of map\n    if (currentMapImage.complete && currentMapImage.naturalWidth !== 0) {\n      canvasRenderingContext.drawImage(currentMapImage, 0 - Engine.map.offset[0], 0 - Engine.map.offset[1]);\n\n      //draw goMark (red X on ground that shows you where you've clicked)\n      if (Engine.map.goMark) Engine.map.drawGoMark(canvasRenderingContext);\n    }\n  };\n}\nfunction applyCurrentMapChange() {\n  if (true) applyMapChange(Engine.map.d.id);else {}\n}\nfunction initMapsManager() {\n  if (true) startMapChanging();\n  (0,_game_integration_loaders__WEBPACK_IMPORTED_MODULE_2__.loadOnEveryMap)(applyCurrentMapChange);\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/maps.js?");

/***/ }),

/***/ "./src/night/light-manager.js":
/*!************************************!*\
  !*** ./src/night/light-manager.js ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initLightManager: function() { return /* binding */ initLightManager; }\n/* harmony export */ });\n/* harmony import */ var _interface_css_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../interface/css-manager */ \"./src/interface/css-manager.js\");\n/* harmony import */ var _utility_functions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utility-functions */ \"./src/utility-functions.js\");\n/* harmony import */ var _lights__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lights */ \"./src/night/lights.js\");\n/* harmony import */ var _night__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./night */ \"./src/night/night.js\");\n\n\n\n\nvar lightManagerHtml = `\n<div id=\"nerthus-light-manager-wrapper\">\n    <div id=\"nerthus-light-manager\" class=\"nerthus-panel\">\n        <div class=\"header-label-positioner\">\n            <div class=\"header-label\">\n                <div class=\"left-decor\"></div>\n                <div class=\"right-decor\"></div>\n                <span class=\"panel-name\">Narzędzia światła</span>\n            </div>\n        </div>\n        <div class=\"close-decor\">\n            <button class=\"close-button\" tip=\"Zamknij\"></button>\n        </div>\n        <div class=\"background\">\n            <a id=\"nerthus-light-manager-toggle-lights\" class=\"button\" tip=\"Pokaż (lub ukryj) światła\">\n                <img src=\"${\"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\"}res/img/panel/sun.png\">\n            </a>\n            <a id=\"nerthus-light-manager-toggle-mousemove\" class=\"button\" tip=\"Zablokuj chodzenie myszką\">\n                <img src=\"${\"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\"}res/img/panel/mouse.png\">\n            </a>\n            <a id=\"nerthus-light-manager-delete-all\" class=\"button\" tip=\"Usuń wszystkie światła z mapy\">\n                <img src=\"${\"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\"}res/img/panel/trash.png\">\n            </a>\n            <a id=\"nerthus-light-manager-toggle-border\" class=\"button\" tip=\"Przełącz obramowanie świateł\">\n                <img src=\"${\"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\"}res/img/panel/border.png\">\n            </a>\n            <a id=\"nerthus-light-manager-save\" class=\"button\" tip=\"Pobierz dane o światłach\">\n                <img src=\"${\"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\"}res/img/panel/download.png\">\n            </a>\n        </div>\n    </div>\n    <div class=\"subpanel nerthus-panel\">\n        <div class=\"background\">\n            <a id=\"nerthus-light-manager-add-s\" class=\"button\" tip=\"Dodaj małe światło\">\n                S\n            </a>\n            <a id=\"nerthus-light-manager-add-m\" class=\"button\" tip=\"Dodaj średnie światło\">\n                M\n            </a>\n            <a id=\"nerthus-light-manager-add-l\" class=\"button\" tip=\"Dodaj duże światło\">\n                L\n            </a>\n            <a id=\"nerthus-light-manager-add-xl\" class=\"button\" tip=\"Dodaj bardzo duże światło\">\n                XL\n            </a>    \n        </div> \n    </div>\n</div>\n`;\nfunction removeTargetLight(e) {\n  if (e.target.classList.contains('nerthus__night-light')) {\n    $(e.target).remove();\n  }\n}\nfunction startEditingLights() {\n  (0,_interface_css_manager__WEBPACK_IMPORTED_MODULE_0__.addCustomStyle)('light-pointer-events', '.nerthus__night-light {pointer-events: all !important}');\n  $('#ground').dblclick(removeTargetLight);\n  $('.nerthus__night-light').draggable();\n}\nfunction stopEditingLights() {\n  (0,_interface_css_manager__WEBPACK_IMPORTED_MODULE_0__.removeCustomStyle)('light-hider');\n  (0,_interface_css_manager__WEBPACK_IMPORTED_MODULE_0__.removeCustomStyle)('light-border');\n  (0,_interface_css_manager__WEBPACK_IMPORTED_MODULE_0__.removeCustomStyle)('light-pointer-events');\n  (0,_night__WEBPACK_IMPORTED_MODULE_3__.applyCurrentNight)();\n  $('#ground').unbind('dblclick', removeTargetLight);\n  $('.nerthus__night-light').draggable('disable');\n}\nfunction toggleLights() {\n  if (!_lights__WEBPACK_IMPORTED_MODULE_2__.lightsOn) {\n    (0,_lights__WEBPACK_IMPORTED_MODULE_2__.turnLightsOn)();\n    $('#nerthus-light-manager-toggle-lights').addClass('blue');\n  } else {\n    (0,_interface_css_manager__WEBPACK_IMPORTED_MODULE_0__.toggleCustomStyle)('light-hider', '#ground > .nerthus__night-light {display: none !important}');\n    $('#nerthus-light-manager-toggle-lights').toggleClass('blue');\n  }\n}\nfunction toggleMouseMove() {\n  hero.opt ^= 64;\n  $('#nerthus-light-manager-toggle-mousemove').toggleClass('blue');\n}\nfunction toggleBorder() {\n  (0,_interface_css_manager__WEBPACK_IMPORTED_MODULE_0__.toggleCustomStyle)('light-border', '#ground > .nerthus__night-light {border: 1px solid yellow}');\n  $('#nerthus-light-manager-toggle-border').toggleClass('blue');\n}\nfunction addLight(lightType) {\n  if (false) { var $light; }\n}\nfunction deleteAllLights() {\n  (0,_lights__WEBPACK_IMPORTED_MODULE_2__.resetLights)();\n  $('#nerthus-light-manager-wrapper #nerthus-light-manager-toggle-lights').removeClass('blue');\n}\nfunction downloadLog() {\n  var arr = [];\n  $('.nerthus__night-light').each(function () {\n    var $this = $(this);\n    var pos = $this.position();\n    var obj = {\n      x: parseInt(pos.left),\n      y: parseInt(pos.top),\n      type: $this.attr('type')\n    };\n    arr.push(obj);\n  });\n\n  // Properly format lights data\n  var json = JSON.stringify(arr, null, 2).replaceAll(/\\{\\n {4}/g, '{').replaceAll(/\\n {2}}/g, '}').replaceAll(/,\\n {3}/g, ',') + '\\n';\n  var a = window.document.createElement('a');\n  a.href = window.URL.createObjectURL(new window.Blob([json], {\n    type: 'text/json'\n  }));\n  if (true) {\n    a.download = '' + Engine.map.d.id + '.json';\n  } else {}\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n}\nfunction initLightManager() {\n  if (true) return;\n  startEditingLights();\n  var $lightManager = $(lightManagerHtml);\n  var $toggleLights = $lightManager.find('#nerthus-light-manager-toggle-lights');\n  $toggleLights.click(toggleLights);\n  if (_lights__WEBPACK_IMPORTED_MODULE_2__.lightsOn) $toggleLights.addClass('blue');\n  var $toggleMouseMove = $lightManager.find('#nerthus-light-manager-toggle-mousemove');\n  $toggleMouseMove.click(toggleMouseMove);\n  if (hero.opt & 64) $toggleMouseMove.addClass('blue');\n  $lightManager.find('#nerthus-light-manager-delete-all').click(deleteAllLights);\n  (0,_interface_css_manager__WEBPACK_IMPORTED_MODULE_0__.addCustomStyle)('light-border', '#ground > .nerthus__night-light {border: 1px solid yellow}');\n  $lightManager.find('#nerthus-light-manager-toggle-border').addClass('blue').click(toggleBorder);\n  $lightManager.find('#nerthus-light-manager-save').click(downloadLog);\n  $lightManager.find('#nerthus-light-manager-add-s').click(addLight.bind(null, 'S'));\n  $lightManager.find('#nerthus-light-manager-add-m').click(addLight.bind(null, 'M'));\n  $lightManager.find('#nerthus-light-manager-add-l').click(addLight.bind(null, 'L'));\n  $lightManager.find('#nerthus-light-manager-add-xl').click(addLight.bind(null, 'XL'));\n  (0,_utility_functions__WEBPACK_IMPORTED_MODULE_1__.addDraggable)($lightManager);\n  $lightManager.appendTo('#centerbox2').css('position', 'absolute');\n  $lightManager.find('.close-button').click(function () {\n    $lightManager.remove();\n    stopEditingLights();\n  });\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/night/light-manager.js?");

/***/ }),

/***/ "./src/night/lights.js":
/*!*****************************!*\
  !*** ./src/night/lights.js ***!
  \*****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addLights: function() { return /* binding */ addLights; },\n/* harmony export */   addSingleLight: function() { return /* binding */ addSingleLight; },\n/* harmony export */   lightsOn: function() { return /* binding */ lightsOn; },\n/* harmony export */   resetLights: function() { return /* binding */ resetLights; },\n/* harmony export */   turnLightsOn: function() { return /* binding */ turnLightsOn; }\n/* harmony export */ });\n/* harmony import */ var _game_integration_loaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../game-integration/loaders */ \"./src/game-integration/loaders.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../settings */ \"./src/settings.js\");\n/* harmony import */ var _utility_functions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-functions */ \"./src/utility-functions.js\");\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n\n\n\nvar LIGHT_TYPE_SIZES = {\n  S: 64,\n  M: 96,\n  L: 160,\n  XL: 192\n};\nvar lightsOn = false;\n\n/**\n * Id of NPC's on NI that hold lights\n * @type {number[]}\n */\nvar lightNpcs = [];\nfunction getLightTypeUrl(lightType) {\n  return \"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + 'res/img/night-lights/' + lightType + '.png';\n}\nfunction getLightNiObject(img, x, y, lightTypeSize) {\n  return {\n    draw(e) {\n      e.drawImage(img, x - Engine.map.offset[0], y - Engine.map.offset[1]);\n    },\n    getOrder() {\n      return 1000; // Lights always on top\n    },\n    update() {},\n    d: {},\n    updateDATA() {},\n    rx: (x + lightTypeSize / 2) / 32,\n    ry: (y + lightTypeSize / 2) / 32,\n    getFollowController() {\n      return {\n        checkFollowGlow: () => false\n      };\n    }\n  };\n}\nfunction addSingleLight(lightType, x, y) {\n  var lightTypeSize = LIGHT_TYPE_SIZES[lightType];\n  if (true) {\n    var id = (0,_utility_functions__WEBPACK_IMPORTED_MODULE_2__.coordsToId)(x, y);\n    var image = new Image();\n    image.onload = _game_integration_loaders__WEBPACK_IMPORTED_MODULE_0__.addToNiDrawList.bind(null, getLightNiObject(image, x, y, lightTypeSize), id);\n    image.src = getLightTypeUrl(lightType);\n    lightNpcs.push(id);\n    return id;\n  } else {}\n}\nfunction addLights(lights) {\n  if (_settings__WEBPACK_IMPORTED_MODULE_1__.settings.night) {\n    for (var i in lights) {\n      addSingleLight(lights[i].type, lights[i].x, lights[i].y);\n    }\n  }\n}\nfunction resetLights() {\n  if (true) {\n    var npcList = Engine.npcs.check();\n    var _iterator = _createForOfIteratorHelper(lightNpcs),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var id = _step.value;\n        delete npcList[id];\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    lightNpcs.splice(0, lightNpcs.length);\n  } else {}\n  lightsOn = false;\n}\nfunction turnLightsOn() {\n  resetLights();\n  if ( true && typeof Engine.map.d.id === 'undefined') {\n    setTimeout(turnLightsOn, 500);\n    return;\n  }\n  if ({\"npc\":[1,1045,11,1108,114,121,1233,15,16,169,1838,1945,1975,2,2070,2071,222,2520,2546,257,2663,290,291,33,330,35,361,37,38,4764,574,730,8,864,9],\"lights\":[1,10,1058,1059,11,110,114,1141,115,1154,1159,12,121,122,1233,1262,128,137,138,1985,2,2020,2029,2056,2063,2064,214,222,223,226,2391,244,2520,257,262,2887,3,33,344,347,35,355,356,36,361,368,37,38,4,500,574,575,589,5986,600,630,631,632,727,730,731,8,84,845,9]}.lights.includes(Engine.map.d.id)) {\n    $.getJSON(\"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + 'res/configs/night-lights/' + Engine.map.d.id + '.json', addLights);\n  } else {\n    console.log('lights not loaded - no file');\n  }\n  lightsOn = true;\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/night/lights.js?");

/***/ }),

/***/ "./src/night/night.js":
/*!****************************!*\
  !*** ./src/night/night.js ***!
  \****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyCurrentNight: function() { return /* binding */ applyCurrentNight; },\n/* harmony export */   changeLight: function() { return /* binding */ changeLight; },\n/* harmony export */   initNightManager: function() { return /* binding */ initNightManager; },\n/* harmony export */   setForcedParameters: function() { return /* binding */ setForcedParameters; },\n/* harmony export */   setOpacityChange: function() { return /* binding */ setOpacityChange; }\n/* harmony export */ });\n/* harmony import */ var _game_integration_loaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../game-integration/loaders */ \"./src/game-integration/loaders.js\");\n/* harmony import */ var _interface_panel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../interface/panel */ \"./src/interface/panel.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../settings */ \"./src/settings.js\");\n/* harmony import */ var _utility_functions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility-functions */ \"./src/utility-functions.js\");\n/* harmony import */ var _lights__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lights */ \"./src/night/lights.js\");\n\n\n\n\n\nvar opacityChange = 0;\nvar forcedParameters = {};\n\n/**\n * @param time - Date\n * @returns {number}\n */\nfunction timeToOpacity(time) {\n  if (!_settings__WEBPACK_IMPORTED_MODULE_2__.settings.night) return 0;\n  var hour = time.getHours();\n  var opacity;\n  if (hour < 12) opacity = -Math.pow(0.14 * hour - 1.29, 2) + 1;else opacity = -Math.pow(0.1 * hour - 1.57, 2) + 1;\n  if (opacity < 0.3) opacity = 0.3;else if (opacity > 1) opacity = 1;\n  return 1 - opacity;\n}\nfunction getDarknessNiObject(opacity, color) {\n  return {\n    draw(e) {\n      var style = e.fillStyle;\n      e.fillStyle = color;\n      e.globalAlpha = opacity;\n      e.fillRect(0 - Engine.map.offset[0], 0 - Engine.map.offset[1], Engine.map.width, Engine.map.height);\n      e.globalAlpha = 1.0;\n      e.fillStyle = style;\n    },\n    getOrder() {\n      return 950; // Darkness bellow lights but above everything else\n    },\n    update() {},\n    d: {},\n    updateDATA() {},\n    alwaysDraw: true,\n    getFollowController() {\n      return {\n        checkFollowGlow: () => false\n      };\n    }\n  };\n}\nfunction setForcedParameters(opacity, color) {\n  var mapId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'default';\n  if (!opacity || opacity === 'reset') forcedParameters[mapId] = '';else forcedParameters[mapId] = {\n    opacity: opacity,\n    color: color\n  };\n}\nfunction getCurrentForcedParameters() {\n  var parameters = {\n    opacity: -1,\n    color: '#000'\n  };\n  if (forcedParameters[Engine.map.d.id]) parameters = forcedParameters[Engine.map.d.id];else if (forcedParameters.default) parameters = forcedParameters.default;\n  return parameters;\n}\nfunction getCurrentNaturalOpacity() {\n  if (!(0,_utility_functions__WEBPACK_IMPORTED_MODULE_3__.isCurrentMapOutdoor)()) return 0;\n  var opacity = timeToOpacity(new Date());\n  opacity = opacity + opacityChange;\n  return opacity;\n}\nfunction changeLight() {\n  var opacity = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getCurrentNaturalOpacity();\n  var color = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '#000';\n  opacity = Math.min(Math.max(0, opacity), 1);\n  if (true) {\n    (0,_game_integration_loaders__WEBPACK_IMPORTED_MODULE_0__.addToNiDrawList)(getDarknessNiObject(opacity, color), (0,_utility_functions__WEBPACK_IMPORTED_MODULE_3__.coordsToId)(-1, -1));\n    return;\n  }\n  var $night = $('#nerthus-night');\n  if (!$night.length) $night = $('<div id=\"nerthus-night\"></div>').appendTo('#ground');\n  $night.css({\n    height: map.y * 32,\n    width: map.x * 32,\n    zIndex: map.y * 2 + 12,\n    opacity: opacity,\n    'background-color': color\n  });\n}\nfunction applyCurrentNight() {\n  var opacity = getCurrentNaturalOpacity();\n  var color = '#000';\n  var currentForcedParameters = getCurrentForcedParameters();\n  if (currentForcedParameters.opacity !== -1) {\n    opacity = currentForcedParameters.opacity;\n    color = currentForcedParameters.color;\n  }\n  if (opacity <= 0.2) (0,_lights__WEBPACK_IMPORTED_MODULE_4__.resetLights)();else if (opacity > 0.2 && !_lights__WEBPACK_IMPORTED_MODULE_4__.lightsOn) (0,_lights__WEBPACK_IMPORTED_MODULE_4__.turnLightsOn)();\n  changeLight(opacity, color);\n}\nfunction setOpacityChange(newOpacityChange) {\n  if (!newOpacityChange) newOpacityChange = 0;else if (newOpacityChange > 1) newOpacityChange = 1;else if (newOpacityChange < -1) newOpacityChange = -1;\n  opacityChange = newOpacityChange;\n  applyCurrentNight();\n}\nfunction initNightManager() {\n  (0,_game_integration_loaders__WEBPACK_IMPORTED_MODULE_0__.loadOnEveryMap)(_lights__WEBPACK_IMPORTED_MODULE_4__.resetLights);\n  (0,_game_integration_loaders__WEBPACK_IMPORTED_MODULE_0__.loadOnEveryMap)(applyCurrentNight);\n  (0,_interface_panel__WEBPACK_IMPORTED_MODULE_1__.addSettingToPanel)('night', 'Pory dnia i nocy', 'Ściemnianie mapy w zależności od pory dnia.', applyCurrentNight);\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/night/night.js?");

/***/ }),

/***/ "./src/npc/dialog.js":
/*!***************************!*\
  !*** ./src/npc/dialog.js ***!
  \***************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addDialogToDialogList: function() { return /* binding */ addDialogToDialogList; },\n/* harmony export */   initNpcDialog: function() { return /* binding */ initNpcDialog; },\n/* harmony export */   openDialog: function() { return /* binding */ openDialog; }\n/* harmony export */ });\n/* harmony import */ var _utility_functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utility-functions */ \"./src/utility-functions.js\");\n\nvar LINE_ICON = 'icon LINE_OPTION line_option'; // TODO NI/SI?\nvar EXIT_ICON = 'icon LINE_EXIT line_exit';\nvar dialogList = {};\nfunction addDialogToDialogList(npcId, npcNick, dialog) {\n  dialogList[npcId] = {\n    npcNick: npcNick,\n    dialog: dialog\n  };\n}\nfunction openDialog(npcId, index) {\n  var npcNick = dialogList[npcId].npcNick;\n  var dialog = dialogList[npcId].dialog;\n  var npcMessage = parsePlaceholders(dialog[index][0]);\n  var playerReplies = parseReplies(dialog[index], npcId);\n  displayDialog(npcId, npcNick, npcMessage, playerReplies);\n  if (true) {\n    Engine.lock.add('nerthus-dialog');\n  } else {}\n}\nfunction parseReplies(dialogInstance, npcId) {\n  var replies = [];\n  for (var i = 1; i < dialogInstance.length; i++) replies.push(parseReply(dialogInstance[i], npcId));\n  return replies;\n}\nfunction parseReply(replyRow, npcId) {\n  var reply = parseReplyRow(replyRow);\n  if (reply.to === 'END') {\n    reply.click = closeDialog;\n    reply.icon = EXIT_ICON;\n  } else if (reply.to) {\n    reply.click = function () {\n      removeScroll();\n      openDialog(npcId, reply.to);\n      addScroll();\n      $('#dlgin').scrollTop(0);\n    };\n    reply.icon = LINE_ICON;\n  }\n  return reply;\n}\nfunction parseReplyRow(reply) {\n  var replyArr = reply.split('->');\n  return {\n    text: parsePlaceholders(replyArr[0]),\n    to: replyArr[1]\n  };\n}\nfunction parsePlaceholders(text) {\n  if (true) return text.replace('#NAME', Engine.hero.d.nick);else {}\n}\nfunction addScroll() {\n  clearInterval(g.talk.scrollCheckInterval);\n  var $dlgin = $('#dlgin');\n  g.talk.scrollCheckInterval = setInterval(function () {\n    if ($('#talkscroll').length) return;\n    if ($dlgin.height() < $('#dlgin .message').innerHeight() + $('#dlgin .replies').innerHeight()) {\n      $('#dlgin').css({\n        'margin-right': 20\n      });\n      addScrollbar('dlgin', 490, 'talkscroll');\n    }\n  }, 100);\n  if ($dlgin.height() < $('#dlgin .message').innerHeight() + $('#dlgin .replies').innerHeight()) {\n    $dlgin.css({\n      'margin-right': 20\n    });\n    addScrollbar('dlgin', 490, 'talkscroll');\n  }\n}\nfunction removeScroll() {\n  removeScrollbar('dlgin', 'talkscroll');\n}\nfunction parseInnerDialog(npcMessage, playerReplies) {\n  var innerDial = '<ul class=\"answers\">';\n  var repliesLen = playerReplies.length;\n  for (var i = 0; i < repliesLen; i++) {\n    var iconClass = LINE_ICON;\n    if (playerReplies[i].to === 'END') iconClass = EXIT_ICON;\n    innerDial += '<li class=\"answer dialogue-window-answer ' + iconClass + '\">' + '<div class=\"' + iconClass + '\"></div>' + '<span class=\"answer-text\">' + (i + 1) + '. ' + playerReplies[i].text + '</span>' + '</li>';\n  }\n  innerDial += '</ul>';\n  return innerDial;\n}\nfunction addEventToAnswer(answer, $dialWin, replies, index, id) {\n  if (replies[index]) $(answer).click(function () {\n    if (replies[index].to === 'END') closeDialog();else openDialog(id, replies[index].to);\n    $('.scroll-wrapper', $dialWin).trigger('update');\n  });\n}\nfunction displayDialog(npcId, npcNick, npcMessage, playerReplies)\n//(message, replies, npc)\n{\n  if (true) {\n    // create fake dialog that we can then modify\n    Engine.communication.dispatcher.on_d(['0', npcNick, '-1', '1', npcMessage, '', '2', 'Option', '-1']);\n    var innerDial = parseInnerDialog(npcMessage, playerReplies);\n    var $dialWin = $('.dialogue-window');\n    $('.content .inner.scroll-wrapper .scroll-pane', $dialWin).empty().append(innerDial);\n    $('.content .inner.scroll-wrapper .scroll-pane .answers .answer', $dialWin).each(function (index) {\n      addEventToAnswer(this, $dialWin, playerReplies, index, npcId);\n    });\n  } else { var $replies; }\n}\nfunction closeDialog() {\n  if (true) {\n    //$('.dialogue-window').removeClass('is-open')\n    Engine.dialogue.finish();\n    Engine.lock.remove('nerthus-dialog');\n  } else {}\n}\nfunction composeReply(reply) {\n  return $('<li>').addClass(reply.icon).append('<div class=\"' + reply.icon + '\">').append(reply.text).click(reply.click);\n}\nfunction checkDialog(command) {\n  var match = command.match(/^talk.*id=(\\d+)/);\n  if (match) {\n    var id = match[1];\n    if (id >= (0,_utility_functions__WEBPACK_IMPORTED_MODULE_0__.coordsToId)(0, 0) && dialogList[id] !== undefined) {\n      return id;\n    }\n  }\n  return false;\n}\nfunction initNpcDialog() {\n  if (true) {\n    var __g = _g;\n    window._g = function (task, callback, payload) {\n      var id = checkDialog(task);\n      if (id) return openDialog(id, 0);\n      __g(task, callback, payload);\n    };\n  }\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/npc/dialog.js?");

/***/ }),

/***/ "./src/npc/npc-actions/add.js":
/*!************************************!*\
  !*** ./src/npc/npc-actions/add.js ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addNpc: function() { return /* binding */ addNpc; },\n/* harmony export */   addNpcToList: function() { return /* binding */ addNpcToList; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var _API__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../API */ \"./src/API.js\");\n/* harmony import */ var _utility_functions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-functions */ \"./src/utility-functions.js\");\n/* harmony import */ var _dialog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../dialog */ \"./src/npc/dialog.js\");\n/* harmony import */ var _npc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../npc */ \"./src/npc/npc.js\");\n/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./collision */ \"./src/npc/npc-actions/collision.js\");\n/* harmony import */ var _remove__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./remove */ \"./src/npc/npc-actions/remove.js\");\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\n\n\n\n\n\n\nfunction createClickWrapper(npc, clickHandler) {\n  return function (event) {\n    if (Math.abs(npc.x - hero.x) > 1 || Math.abs(npc.y - hero.y) > 1) hero.mClick(event);else clickHandler();\n  };\n}\nfunction addNpc(npc) {\n  if (true) {\n    var data = {};\n    data[npc.id] = _objectSpread({}, npc);\n    var collisionBefore = Engine.map.col.check(npc.x, npc.y);\n    var npcIcon = npc.icon;\n    if (npcIcon.endsWith('gif')) {\n      if (npcIcon.startsWith('https://micc.garmory-cdn.cloud/obrazki/npc/')) {\n        data[npc.id].icon = npcIcon.substring(43);\n        Engine.npcs.updateData(data);\n      } else if (npcIcon.startsWith('https://micc.garmory-cdn.cloud/obrazki/')) {\n        var aNpath = window.CFG.r_npath;\n        var regex = /^https:\\/\\/micc\\.garmory-cdn\\.cloud\\/obrazki\\/(.+?)\\//;\n        var arr = regex.exec(npcIcon);\n        window.CFG.r_npath = `/obrazki/${arr[1]}/`;\n        data[npc.id].icon = npcIcon.replace(regex, '');\n        Engine.npcs.updateData(data);\n        window.CFG.r_npath = aNpath;\n      } else {\n        data[npc.id].icon = 'mas/nic32x32.gif';\n        Engine.npcs.updateData(data);\n        fetch(npcIcon).then(response => response.arrayBuffer()).then(buffer => new Uint8Array(buffer)).then(array => (0,_utility_functions__WEBPACK_IMPORTED_MODULE_2__.decodeGif)(array)).then(decoded => {\n          var canvas = document.createElement('canvas');\n          canvas.width = decoded.width;\n          canvas.height = decoded.height * decoded.frameData.length;\n          var ctx = canvas.getContext('2d');\n          var backgroundImg = new ImageData(decoded.frameData[0], decoded.width, decoded.height);\n          ctx.putImageData(backgroundImg, 0, 0);\n          for (var i = 1; i < decoded.frameData.length; i++) {\n            var frameCanvas = document.createElement('canvas');\n            frameCanvas.width = decoded.width;\n            frameCanvas.height = decoded.height;\n            var frameCtx = frameCanvas.getContext('2d');\n            var img = new ImageData(decoded.frameData[i], decoded.width, decoded.height);\n            frameCtx.putImageData(img, 0, 0);\n            switch (decoded.frameDisposal[i - 1]) {\n              case _utility_functions__WEBPACK_IMPORTED_MODULE_2__.GIF_FRAME_DISPOSAL.NON_SPECIFIED:\n              case _utility_functions__WEBPACK_IMPORTED_MODULE_2__.GIF_FRAME_DISPOSAL.DO_NOT_DISPOSE:\n                ctx.drawImage(canvas, 0, (i - 1) * decoded.height, decoded.width, decoded.height, 0, i * decoded.height, decoded.width, decoded.height);\n                break;\n              case _utility_functions__WEBPACK_IMPORTED_MODULE_2__.GIF_FRAME_DISPOSAL.RESTORE_TO_BACKGROUND:\n                // Apparently most browsers just clear to transparency,\n                // so we'll do the same for now (so just do nothing here).\n                // Besides, NPCs in game should have transparent background\n                break;\n              case _utility_functions__WEBPACK_IMPORTED_MODULE_2__.GIF_FRAME_DISPOSAL.RESTORE_TO_PREVIOUS:\n                // As per specification, \"if decoder is not capable of saving an area of a graphic\n                // marked as restore To Previous, it is recommended that a decoder restore to\n                // the background color.\"\n                // Due to lack of popularity of this type of disposal and problems with\n                // implementing a solution (since we're working backwards),\n                // this disposal will probably remain partially broken\n                // (besides, main game doesn't even support different frame disposals)\n                ctx.putImageData(backgroundImg, 0, i * decoded.height);\n            }\n            ctx.drawImage(frameCanvas, 0, i * decoded.height);\n          }\n\n          // Update everything by hand\n          var createdNpc = Engine.npcs.getById(npc.id);\n          createdNpc.sprite = new Image();\n          createdNpc.sprite.src = canvas.toDataURL();\n          createdNpc.fw = decoded.width;\n          createdNpc.fh = decoded.height;\n          createdNpc.halffw = decoded.width / 2;\n          createdNpc.halffh = decoded.height / 2;\n          createdNpc.frameAmount = decoded.frameData.length;\n          createdNpc.frames = decoded.frameDelays;\n          createdNpc.leftPosMod = data[npc.id].type > 3 && !(createdNpc.fw % 64) ? -16 : 0;\n          if (data[npc.id].type !== 4) createdNpc.updateCollider();\n          createdNpc.beforeOnload = function () {}; // force not updating image anymore\n        }).catch(err => console.error(`Error while fetching NPC ${npcIcon}`, err));\n      }\n    } else {\n      npc.icon = 'mas/nic32x32.gif';\n      Engine.npcs.updateData(data);\n      npc.icon = npcIcon;\n      var gameNpc = Engine.npcs.getById(npc.id);\n      gameNpc.staticAnimation = true;\n      var img = new Image();\n      img.onload = function () {\n        gameNpc.sprite = img;\n        var oldBeforeOnLoad = gameNpc.beforeOnload;\n        gameNpc.beforeOnload = function () {\n          return oldBeforeOnLoad({\n            img: npcIcon,\n            frames: 1,\n            hdr: {\n              width: img.width,\n              height: img.height\n            }\n          }, img, npc);\n        };\n        gameNpc.beforeOnload();\n      };\n      img.src = npcIcon;\n    }\n    if (npc.dialog) (0,_dialog__WEBPACK_IMPORTED_MODULE_3__.addDialogToDialogList)(npc.id, npc.nick, npc.dialog);\n    if (!collisionBefore) {\n      if (npc.collision) (0,_collision__WEBPACK_IMPORTED_MODULE_5__.setCollision)(npc.x, npc.y);else (0,_collision__WEBPACK_IMPORTED_MODULE_5__.removeCollision)(npc.x, npc.y);\n    }\n    return data;\n  } else { var _img, $npc; }\n}\n\n/**\n * Function adds new NPC to the list and displays him,\n * or replaces NPC on the same coordinates and same map\n * @param npc\n * @param mapId\n */\nfunction addNpcToList(npc, mapId) {\n  if (!_npc__WEBPACK_IMPORTED_MODULE_4__.customNpcs[mapId]) _npc__WEBPACK_IMPORTED_MODULE_4__.customNpcs[mapId] = {};\n  if (_npc__WEBPACK_IMPORTED_MODULE_4__.customNpcs[mapId][npc.id]) (0,_remove__WEBPACK_IMPORTED_MODULE_6__.removeNpc)(npc.x, npc.y, mapId);\n  _npc__WEBPACK_IMPORTED_MODULE_4__.customNpcs[mapId][npc.id] = npc;\n  if (true) {\n    if (Engine.map.d.id === mapId) addNpc(npc);\n  } else {}\n  (0,_API__WEBPACK_IMPORTED_MODULE_1__.callEvent)('addTemporaryNpc', {\n    npc: npc,\n    mapId: mapId\n  });\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/npc/npc-actions/add.js?");

/***/ }),

/***/ "./src/npc/npc-actions/change.js":
/*!***************************************!*\
  !*** ./src/npc/npc-actions/change.js ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   changeGameNpc: function() { return /* binding */ changeGameNpc; }\n/* harmony export */ });\n/* harmony import */ var _utility_functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utility-functions */ \"./src/utility-functions.js\");\n\nfunction changeGameNpc(npc) {\n  if (true) {\n    var callback = function callback(newNpc) {\n      if (newNpc.d && newNpc.d.id === npc.id.toString()) {\n        var img = new Image();\n        img.src = (0,_utility_functions__WEBPACK_IMPORTED_MODULE_0__.resolveUrl)(npc.newUrl);\n        if (img.src.endsWith('gif') && img.src.startsWith('https://micc.garmory-cdn.cloud/obrazki/npc/')) {\n          var icon = img.src.substring(43);\n          Object.defineProperty(newNpc.d, 'icon', {\n            get() {\n              return icon;\n            },\n            set() {}\n          });\n          var beforeOnload = newNpc.beforeOnload;\n          newNpc.beforeOnload = function (data, img, npc) {\n            if (npc.icon === icon) {\n              beforeOnload.call(newNpc, ...arguments);\n            }\n          };\n          setTimeout(() => Engine.npcs.updateData({\n            [newNpc.d.id]: newNpc.d\n          }), 1);\n        } else {\n          var _img = new Image();\n          _img.src = (0,_utility_functions__WEBPACK_IMPORTED_MODULE_0__.resolveUrl)(npc.newUrl);\n          newNpc.sprite = _img;\n          Object.defineProperty(newNpc, 'sprite', {\n            get() {\n              return _img;\n            },\n            set() {}\n          });\n        }\n\n        // Run only once\n        // setTimeout so that it removes itself after all NPCs are checked by API,\n        // otherwise it would throw an error\n        setTimeout(API.removeCallbackFromEvent.bind(API, 'newNpc', callback), 0);\n      }\n    };\n    API.addCallbackToEvent('newNpc', callback);\n  } else { var $style; }\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/npc/npc-actions/change.js?");

/***/ }),

/***/ "./src/npc/npc-actions/collision.js":
/*!******************************************!*\
  !*** ./src/npc/npc-actions/collision.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   removeCollision: function() { return /* binding */ removeCollision; },\n/* harmony export */   setCollision: function() { return /* binding */ setCollision; }\n/* harmony export */ });\nfunction setCollision(x, y) {\n  if (true) Engine.map.col.set(x, y, 2);else {}\n}\nfunction removeCollision(x, y) {\n  if (true) {\n    Engine.map.col.unset(x, y, 2);\n  } else {}\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/npc/npc-actions/collision.js?");

/***/ }),

/***/ "./src/npc/npc-actions/hide.js":
/*!*************************************!*\
  !*** ./src/npc/npc-actions/hide.js ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   customHiddenNpcs: function() { return /* binding */ customHiddenNpcs; },\n/* harmony export */   hideGameNpc: function() { return /* binding */ hideGameNpc; },\n/* harmony export */   isNpcHidable: function() { return /* binding */ isNpcHidable; }\n/* harmony export */ });\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../settings */ \"./src/settings.js\");\n\nvar customHiddenNpcs = [];\nfunction isNpcHidable(npc) {\n  if (true) return npc.lvl === 0 || npc.lvl + 13 < Engine.hero.d.lvl;else {}\n}\nvar hidingStarted = false;\nfunction startHidingNpcs() {\n  var oldUpdateNpc = Engine.miniMapController.handHeldMiniMapController.updateNpc;\n  Engine.miniMapController.handHeldMiniMapController.updateNpc = function (npcData) {\n    for (var i in npcData) {\n      if (!npcData[i] || !npcData[i].id || customHiddenNpcs.includes(Number(npcData[i].id))) {\n        delete npcData[i];\n      }\n    }\n    return oldUpdateNpc.call(Engine.miniMapController.handHeldMiniMapController, npcData);\n  };\n}\nfunction hideGameNpc(id, always) {\n  if (true) {\n    if (!hidingStarted) {\n      hidingStarted = true;\n      startHidingNpcs();\n    }\n    if (always || _settings__WEBPACK_IMPORTED_MODULE_0__.settings.hideNpcs) {\n      if (!customHiddenNpcs.includes(id)) customHiddenNpcs.push(id);\n      var callback = function callback(newNpc) {\n        if (newNpc.d && newNpc.d.id === id.toString()) {\n          // Remove in this fashion (instead of just calling .delete()\n          // because we don't want to unset collisions when hiding\n          API.callEvent('removeNpc', newNpc);\n          if (Engine.npcs.getById(newNpc.d.id)) Engine.npcs.removeOne(newNpc.d.id);\n          Engine.emotions.removeAllFromSourceId(newNpc.d.id);\n          // Run only once\n          // setTimeout so that it removes itself after all NPCs are checked by API,\n          // otherwise it would throw error\n          setTimeout(API.removeCallbackFromEvent.bind(API, 'newNpc', callback), 0);\n        }\n      };\n      API.addCallbackToEvent('newNpc', callback);\n    }\n  } else { var $style; }\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/npc/npc-actions/hide.js?");

/***/ }),

/***/ "./src/npc/npc-actions/remove.js":
/*!***************************************!*\
  !*** ./src/npc/npc-actions/remove.js ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   removeNpc: function() { return /* binding */ removeNpc; }\n/* harmony export */ });\n/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./collision */ \"./src/npc/npc-actions/collision.js\");\n/* harmony import */ var _utility_functions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utility-functions */ \"./src/utility-functions.js\");\n/* harmony import */ var _npc__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../npc */ \"./src/npc/npc.js\");\n/* harmony import */ var _API__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../API */ \"./src/API.js\");\n\n\n\n\nfunction removeNpc(x, y, mapId) {\n  if (_npc__WEBPACK_IMPORTED_MODULE_2__.customNpcs[mapId] && _npc__WEBPACK_IMPORTED_MODULE_2__.customNpcs[mapId][(0,_utility_functions__WEBPACK_IMPORTED_MODULE_1__.coordsToId)(x, y)]) delete _npc__WEBPACK_IMPORTED_MODULE_2__.customNpcs[mapId][(0,_utility_functions__WEBPACK_IMPORTED_MODULE_1__.coordsToId)(x, y)];\n  if (true) {\n    if (typeof mapId === 'undefined' || mapId === Engine.map.d.id) {\n      var id = (0,_utility_functions__WEBPACK_IMPORTED_MODULE_1__.coordsToId)(x, y);\n      var npc = Engine.npcs.getById(id);\n      if (npc) {\n        // fix for when npc is somehow loaded without collision\n        if (!npc.mapColSet) npc.mapColSet = [npc.d.x, npc.d.y];\n        npc.delete();\n        Engine.map.col.setStaticColsCache();\n      }\n    }\n  } else {}\n  (0,_collision__WEBPACK_IMPORTED_MODULE_0__.removeCollision)(x, y);\n  (0,_API__WEBPACK_IMPORTED_MODULE_3__.callEvent)('removeTemporaryNpc', {\n    x: x,\n    y: y,\n    mapId: mapId\n  });\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/npc/npc-actions/remove.js?");

/***/ }),

/***/ "./src/npc/npc-time.js":
/*!*****************************!*\
  !*** ./src/npc/npc-time.js ***!
  \*****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isNpcDeployable: function() { return /* binding */ isNpcDeployable; }\n/* harmony export */ });\nfunction validateTime(npc) {\n  if (!npc.time) return true;\n  var start = parseTimeStrToDate(npc.time.split('-')[0]);\n  var end = parseTimeStrToDate(npc.time.split('-')[1]);\n  var now = new Date();\n  if (start > end) return start <= now || now <= end;\n  return start <= now && now <= end;\n}\nfunction parseTimeStrToDate(timeStr) {\n  timeStr = timeStr.split(':');\n  var date = new Date();\n  date.setHours(timeStr[0], timeStr[1] || 0);\n  return date;\n}\nfunction validateDays(npc) {\n  if (!npc.days) return true;\n  var day_of_week = new Date().getDay();\n  return npc.days.indexOf(day_of_week) > -1;\n}\nfunction parseStrToDate(date_str)\n//DD.MM.YYYY\n{\n  date_str = date_str.split('.');\n  var date = new Date();\n  var day = date_str[0] || date.getDay();\n  var month = date_str[1] ? parseInt(date_str[1]) - 1 : date.getMonth(); //month 0-11\n  var year = date_str[2] || date.getFullYear();\n  date.setFullYear(year, month, day);\n  return date;\n}\nfunction validateDate(npc) {\n  if (!npc.date) return true;\n  var begin = parseStrToDate(npc.date.split('-')[0]);\n  var now = new Date();\n  var end = parseStrToDate(npc.date.split('-')[1]);\n  if (begin > end) {\n    return begin <= now || now <= end;\n  } else {\n    return begin <= now && now <= end;\n  }\n}\nfunction isNpcDeployable(npc) {\n  return validateTime(npc) && validateDays(npc) && validateDate(npc);\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/npc/npc-time.js?");

/***/ }),

/***/ "./src/npc/npc.js":
/*!************************!*\
  !*** ./src/npc/npc.js ***!
  \************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Npc: function() { return /* binding */ Npc; },\n/* harmony export */   customNpcs: function() { return /* binding */ customNpcs; },\n/* harmony export */   initNpcManager: function() { return /* binding */ initNpcManager; },\n/* harmony export */   loadNpcsFromFile: function() { return /* binding */ loadNpcsFromFile; }\n/* harmony export */ });\n/* harmony import */ var _game_integration_loaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../game-integration/loaders */ \"./src/game-integration/loaders.js\");\n/* harmony import */ var _interface_panel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../interface/panel */ \"./src/interface/panel.js\");\n/* harmony import */ var _utility_functions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-functions */ \"./src/utility-functions.js\");\n/* harmony import */ var _dialog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dialog */ \"./src/npc/dialog.js\");\n/* harmony import */ var _npc_actions_add__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./npc-actions/add */ \"./src/npc/npc-actions/add.js\");\n/* harmony import */ var _npc_actions_change__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./npc-actions/change */ \"./src/npc/npc-actions/change.js\");\n/* harmony import */ var _npc_actions_hide__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./npc-actions/hide */ \"./src/npc/npc-actions/hide.js\");\n/* harmony import */ var _npc_time__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./npc-time */ \"./src/npc/npc-time.js\");\n\n\n\n\n\n\n\n\nvar customNpcs = {\n  default: []\n};\nfunction Npc(x, y, url, nick, collision, dialog) {\n  this.x = parseInt(x);\n  this.y = parseInt(y);\n  this.id = (0,_utility_functions__WEBPACK_IMPORTED_MODULE_2__.coordsToId)(x, y);\n  this.nick = nick;\n  this.type = this.nick === '' ? 4 : 0;\n  this.icon = (0,_utility_functions__WEBPACK_IMPORTED_MODULE_2__.resolveUrl)(url);\n  this.update = function () {};\n  this.actions = 0;\n  this.grp = 0;\n  this.wt = this.type === 4 ? 1 : 0;\n  this.collision = collision;\n  this.dialog = dialog;\n}\nfunction deploy(npc) {\n  if (!(0,_npc_time__WEBPACK_IMPORTED_MODULE_7__.isNpcDeployable)(npc)) return 1;\n  switch (npc.type) {\n    case 'delete':\n      {\n        if (!(0,_npc_actions_hide__WEBPACK_IMPORTED_MODULE_6__.isNpcHidable)(npc)) return;\n        return (0,_npc_actions_hide__WEBPACK_IMPORTED_MODULE_6__.hideGameNpc)(npc.id, npc.lvl === 0);\n      }\n    case 'change':\n      {\n        return (0,_npc_actions_change__WEBPACK_IMPORTED_MODULE_5__.changeGameNpc)(npc);\n      }\n    default:\n      {\n        var tip;\n        if (typeof npc.tip === 'string') tip = npc.tip;else if (true) tip = npc.name;else {}\n        var customNpc = new Npc(npc.x, npc.y, npc.url, tip, npc.collision, npc.dialog);\n        return (0,_npc_actions_add__WEBPACK_IMPORTED_MODULE_4__.addNpc)(customNpc);\n      }\n  }\n}\nfunction loadNpcsFromFile(url) {\n  $.getJSON(url, function (npcs) {\n    if (npcs) npcs.forEach(deploy);\n  });\n}\nfunction loadNpcs() {\n  if (true) {\n    if ({\"npc\":[1,1045,11,1108,114,121,1233,15,16,169,1838,1945,1975,2,2070,2071,222,2520,2546,257,2663,290,291,33,330,35,361,37,38,4764,574,730,8,864,9],\"lights\":[1,10,1058,1059,11,110,114,1141,115,1154,1159,12,121,122,1233,1262,128,137,138,1985,2,2020,2029,2056,2063,2064,214,222,223,226,2391,244,2520,257,262,2887,3,33,344,347,35,355,356,36,361,368,37,38,4,500,574,575,589,5986,600,630,631,632,727,730,731,8,84,845,9]}.npc.includes(Engine.map.d.id)) loadNpcsFromFile(\"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + 'res/configs/npcs/' + Engine.map.d.id + '.json');\n    for (var npcId in customNpcs[Engine.map.d.id]) {\n      (0,_npc_actions_add__WEBPACK_IMPORTED_MODULE_4__.addNpc)(customNpcs[Engine.map.d.id][npcId]);\n    }\n  } else { var _npcId; }\n  customNpcs.default.forEach(_npc_actions_add__WEBPACK_IMPORTED_MODULE_4__.addNpc);\n}\nfunction initNpcManager() {\n  (0,_dialog__WEBPACK_IMPORTED_MODULE_3__.initNpcDialog)();\n  (0,_game_integration_loaders__WEBPACK_IMPORTED_MODULE_0__.loadOnEveryMap)(function () {\n    if (false) {}\n    loadNpcs();\n    _npc_actions_hide__WEBPACK_IMPORTED_MODULE_6__.customHiddenNpcs.forEach(_npc_actions_hide__WEBPACK_IMPORTED_MODULE_6__.hideGameNpc);\n  });\n  (0,_interface_panel__WEBPACK_IMPORTED_MODULE_1__.addSettingToPanel)('hideNpcs', 'Ukrywanie NPCów', 'Ukrywa NPCów ustawionych przez dodatek oraz przez specjalną komendę dostępną dla narratorów. (wymaga resetu gry)', function () {\n    // TODO\n  });\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/npc/npc.js?");

/***/ }),

/***/ "./src/permissions.js":
/*!****************************!*\
  !*** ./src/permissions.js ***!
  \****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PERMISSION_LVL: function() { return /* binding */ PERMISSION_LVL; },\n/* harmony export */   checkPermissionLvl: function() { return /* binding */ checkPermissionLvl; },\n/* harmony export */   hasNarrationRights: function() { return /* binding */ hasNarrationRights; }\n/* harmony export */ });\n/* harmony import */ var _res_configs_permissions_yaml__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../res/configs/permissions.yaml */ \"./res/configs/permissions.yaml\");\n\n/*\n    0: normal player\n    1: narrator\n    2: councilor (radny)\n    100: dev or other special reason\n */\nvar PERMISSION_LVL = {\n  DEFAULT: 0,\n  NARRATOR: 1,\n  COUNCILOR: 2,\n  NAMIESTNIK: 3,\n  SPECIAL: 100\n};\nfunction checkPermissionLvl(accountId) {\n  if (_res_configs_permissions_yaml__WEBPACK_IMPORTED_MODULE_0__.namiestnik.includes(accountId)) return PERMISSION_LVL.NAMIESTNIK;\n  if (_res_configs_permissions_yaml__WEBPACK_IMPORTED_MODULE_0__.radny.includes(accountId)) return PERMISSION_LVL.COUNCILOR;\n  if (_res_configs_permissions_yaml__WEBPACK_IMPORTED_MODULE_0__.narrator.includes(accountId)) return PERMISSION_LVL.NARRATOR;\n  if (_res_configs_permissions_yaml__WEBPACK_IMPORTED_MODULE_0__.special.includes(accountId)) return PERMISSION_LVL.SPECIAL;\n  return PERMISSION_LVL.DEFAULT;\n}\nfunction hasNarrationRights(accountId) {\n  return checkPermissionLvl(accountId) > PERMISSION_LVL.DEFAULT;\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/permissions.js?");

/***/ }),

/***/ "./src/settings.js":
/*!*************************!*\
  !*** ./src/settings.js ***!
  \*************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loadSettings: function() { return /* binding */ loadSettings; },\n/* harmony export */   saveSetting: function() { return /* binding */ saveSetting; },\n/* harmony export */   settings: function() { return /* binding */ settings; }\n/* harmony export */ });\nvar settings = {\n  night: true,\n  weather: true,\n  weatherEffects: true,\n  zodiac: true,\n  hideNpcs: false\n};\nfunction saveSetting(name, value) {\n  settings[name] = value;\n  localStorage.nerthus_options = JSON.stringify(settings);\n}\nfunction loadSettings() {\n  if (localStorage.nerthus_options) {\n    var loadedSettings = JSON.parse(localStorage.nerthus_options);\n    for (var opt in loadedSettings) settings[opt] = loadedSettings[opt];\n  }\n  return settings;\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/settings.js?");

/***/ }),

/***/ "./src/time.js":
/*!*********************!*\
  !*** ./src/time.js ***!
  \*********************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SEASON: function() { return /* binding */ SEASON; },\n/* harmony export */   getCurrentSeason: function() { return /* binding */ getCurrentSeason; }\n/* harmony export */ });\nvar SEASON = Object.freeze({\n  SPRING: 'spring',\n  SUMMER: 'summer',\n  AUTUMN: 'autumn',\n  WINTER: 'winter'\n});\n\n//TODO implement this file in other places\n\nfunction getCurrentSeason() {\n  function makeStartDate(day, month) {\n    var date = new Date();\n    date.setUTCDate(day);\n    date.setUTCMonth(month - 1);\n    return date;\n  }\n  var date = new Date();\n  var SPRING_BEGIN = makeStartDate(21, 3);\n  var SUMMER_BEGIN = makeStartDate(22, 6);\n  var AUTUMN_BEGIN = makeStartDate(23, 9);\n  var WINTER_BEGIN = makeStartDate(22, 11); //long winter\n\n  if (date >= WINTER_BEGIN) return SEASON.WINTER;\n  if (date >= AUTUMN_BEGIN) return SEASON.AUTUMN;\n  if (date >= SUMMER_BEGIN) return SEASON.SUMMER;\n  if (date >= SPRING_BEGIN) return SEASON.SPRING;\n  return SEASON.WINTER;\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/time.js?");

/***/ }),

/***/ "./src/utility-functions.js":
/*!**********************************!*\
  !*** ./src/utility-functions.js ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GIF_FRAME_DISPOSAL: function() { return /* binding */ GIF_FRAME_DISPOSAL; },\n/* harmony export */   addDraggable: function() { return /* binding */ addDraggable; },\n/* harmony export */   coordsToId: function() { return /* binding */ coordsToId; },\n/* harmony export */   decodeGif: function() { return /* binding */ decodeGif; },\n/* harmony export */   isCurrentMapOutdoor: function() { return /* binding */ isCurrentMapOutdoor; },\n/* harmony export */   isMapOutdoor: function() { return /* binding */ isMapOutdoor; },\n/* harmony export */   pseudoRandom: function() { return /* binding */ pseudoRandom; },\n/* harmony export */   resolveUrl: function() { return /* binding */ resolveUrl; },\n/* harmony export */   sanitizeText: function() { return /* binding */ sanitizeText; }\n/* harmony export */ });\n/* harmony import */ var omggif__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! omggif */ \"./node_modules/omggif/omggif.js\");\n/* harmony import */ var _res_configs_map_exceptions_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../res/configs/map-exceptions.json */ \"./res/configs/map-exceptions.json\");\n\n\nvar GIF_FRAME_DISPOSAL = {\n  NON_SPECIFIED: 0,\n  DO_NOT_DISPOSE: 1,\n  RESTORE_TO_BACKGROUND: 2,\n  RESTORE_TO_PREVIOUS: 3\n};\n\n/**\n * Function that takes coordinates and turns them to nerthus-specific ID.\n * NI requires such id in several cases, and really big number makes sure,\n * that (game npcs usually have id's that are few millions lower than that)\n * @param {number} x\n * @param {number} y\n * @returns {number}\n */\nfunction coordsToId(x, y) {\n  return 50000000 + x * 1000 + y;\n}\nfunction resolveUrl(url) {\n  if (url.startsWith('/')) url = 'https://micc.garmory-cdn.cloud' + url;\n  return url.replace(/^#/, \"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\");\n}\nfunction pseudoRandom(seed) {\n  seed = (seed * 9301 + 49297) % 233280;\n  return seed / 233280;\n}\nfunction isMapOutdoor(map) {\n  return !!(map.mainid === 0 && !_res_configs_map_exceptions_json__WEBPACK_IMPORTED_MODULE_1__.indoor.includes(map.id) || _res_configs_map_exceptions_json__WEBPACK_IMPORTED_MODULE_1__.outdoor.includes(map.id));\n}\nfunction isCurrentMapOutdoor() {\n  if (true) {\n    return isMapOutdoor(Engine.map.d);\n  } else {}\n}\nfunction addDraggable($elm) {\n  var handle = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  $elm.draggable({\n    handle,\n    start() {\n      var lock = window.g ? window.g.lock : window.Engine.lock;\n      lock.add('nerthus-panel-drag');\n    },\n    stop() {\n      var lock = window.g ? window.g.lock : window.Engine.lock;\n      lock.remove('nerthus-panel-drag');\n    }\n  });\n}\nfunction sanitizeText(text) {\n  var element = document.createElement('div');\n  element.innerText = text;\n  return element.innerHTML;\n}\nfunction decodeGif(data) {\n  var reader = new omggif__WEBPACK_IMPORTED_MODULE_0__.GifReader(data);\n  var decoded = {\n    frameDelays: [],\n    frameData: [],\n    frameDisposal: [],\n    width: reader.width,\n    height: reader.height\n  };\n  for (var i = 0; i < reader.numFrames(); i++) {\n    var _reader$frameInfo = reader.frameInfo(i),\n      delay = _reader$frameInfo.delay,\n      disposal = _reader$frameInfo.disposal;\n    decoded.frameDelays[i] = {\n      delay\n    };\n    decoded.frameDisposal[i] = disposal;\n    var frameData = new Uint8ClampedArray(reader.width * reader.height * 4);\n    reader.decodeAndBlitFrameRGBA(i, frameData);\n    decoded.frameData[i] = frameData;\n  }\n  return decoded;\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/utility-functions.js?");

/***/ }),

/***/ "./src/weather/effects.js":
/*!********************************!*\
  !*** ./src/weather/effects.js ***!
  \********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearEffects: function() { return /* binding */ clearEffects; },\n/* harmony export */   displayGameWeather: function() { return /* binding */ displayGameWeather; },\n/* harmony export */   displayRain: function() { return /* binding */ displayRain; },\n/* harmony export */   displaySnow: function() { return /* binding */ displaySnow; }\n/* harmony export */ });\n/* harmony import */ var _game_integration_loaders__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../game-integration/loaders */ \"./src/game-integration/loaders.js\");\n/* harmony import */ var _utility_functions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utility-functions */ \"./src/utility-functions.js\");\n/* harmony import */ var _lightnings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lightnings */ \"./src/weather/lightnings.js\");\n\n\n\nvar rainEffectId = (0,_utility_functions__WEBPACK_IMPORTED_MODULE_1__.coordsToId)(-1, -10);\nvar snowEffectId = (0,_utility_functions__WEBPACK_IMPORTED_MODULE_1__.coordsToId)(-1, -20);\nvar rainFrames = [];\nvar snowFrames = [];\nif (true) {\n  for (var i = 0; i < 3; i++) {\n    rainFrames[i] = new Image();\n    rainFrames[i].src = \"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + `res/img/weather/rain-frame-${i}.png`;\n  }\n  for (var _i = 0; _i < 5; _i++) {\n    snowFrames[_i] = new Image();\n    snowFrames[_i].src = \"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + `res/img/weather/snow-frame-${_i}.png`;\n  }\n}\nvar currentFrame = {\n  'rain': 0,\n  'snow': 0\n};\nvar rainInterval;\nvar snowInterval;\nfunction getWeatherNiObject(type, opacity) {\n  var frames;\n  if (type === 'rain') frames = rainFrames;else if (type === 'snow') frames = snowFrames;\n  return {\n    draw(e) {\n      var img = frames[currentFrame[type]];\n\n      //check if img has been loaded correctly to not stop entire game in case of error\n      if (img.complete && img.naturalWidth !== 0) {\n        var pattern = e.createPattern(img, 'repeat');\n        var style = e.fillStyle;\n        var alpha = e.globalAlpha;\n        e.fillStyle = pattern;\n        e.globalAlpha = opacity;\n        e.translate(0 - Engine.map.offset[0], 0 - Engine.map.offset[1]);\n        e.fillRect(0, 0, Engine.map.width, Engine.map.height);\n        e.translate(Engine.map.offset[0], Engine.map.offset[1]);\n        e.fillStyle = style;\n        e.globalAlpha = alpha;\n      }\n    },\n    getOrder() {\n      return 930;\n    },\n    update() {},\n    d: {},\n    updateDATA() {},\n    alwaysDraw: true,\n    getFollowController() {\n      return {\n        checkFollowGlow: () => false\n      };\n    }\n  };\n}\nfunction clearEffects(clearGameEffects) {\n  if (true) {\n    (0,_game_integration_loaders__WEBPACK_IMPORTED_MODULE_0__.removeFromNiDrawList)(rainEffectId);\n    (0,_game_integration_loaders__WEBPACK_IMPORTED_MODULE_0__.removeFromNiDrawList)(snowEffectId);\n    if (clearGameEffects) Engine.weather.onClear();\n  } else {}\n  (0,_lightnings__WEBPACK_IMPORTED_MODULE_2__.clearLightnings)();\n}\nfunction displayRain(opacity) {\n  if (true) {\n    if (rainInterval) clearInterval(rainInterval);\n    rainInterval = setInterval(function () {\n      currentFrame.rain += 1;\n      if (currentFrame.rain === 3) currentFrame.rain = 0;\n    }, 100);\n    (0,_game_integration_loaders__WEBPACK_IMPORTED_MODULE_0__.addToNiDrawList)(getWeatherNiObject('rain', opacity), rainEffectId);\n  } else {}\n}\nfunction displaySnow(opacity) {\n  if (true) {\n    if (snowInterval) clearInterval(snowInterval);\n    snowInterval = setInterval(function () {\n      currentFrame.snow += 1;\n      if (currentFrame.snow === 5) currentFrame.snow = 0;\n    }, 400);\n    (0,_game_integration_loaders__WEBPACK_IMPORTED_MODULE_0__.addToNiDrawList)(getWeatherNiObject('snow', opacity), snowEffectId);\n  } else {}\n}\nfunction displayGameWeather(name) {\n  if (true) {\n    var uppercaseWeatherName = name.charAt(0).toUpperCase() + name.slice(1);\n    Engine.weather.createWeather(uppercaseWeatherName);\n  } else {}\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/weather/effects.js?");

/***/ }),

/***/ "./src/weather/lightnings.js":
/*!***********************************!*\
  !*** ./src/weather/lightnings.js ***!
  \***********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearLightnings: function() { return /* binding */ clearLightnings; },\n/* harmony export */   displayLightnings: function() { return /* binding */ displayLightnings; }\n/* harmony export */ });\n/* harmony import */ var _npc_npc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../npc/npc */ \"./src/npc/npc.js\");\n/* harmony import */ var _npc_npc_actions_add__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../npc/npc-actions/add */ \"./src/npc/npc-actions/add.js\");\n/* harmony import */ var _npc_npc_actions_remove__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../npc/npc-actions/remove */ \"./src/npc/npc-actions/remove.js\");\n/* harmony import */ var _utility_functions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility-functions */ \"./src/utility-functions.js\");\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n\n\n\n\nvar lightningUrls = ['/obrazki/npc/oev/piorun1.gif', '/obrazki/npc/oev/piorun2.gif', '/obrazki/npc/oev/piorun3.gif'\n//'/obrazki/npc/oev/lightning.gif'\n];\nvar CHUNK_SIZE = 12;\n/**\n * 2d table of points where NPCs sit as well as 1 step around them.\n * This is so lightning doesn't struck poor NPCs\n * @type {{}}\n */\nvar npcZone = {};\nvar lightningNpcs = [];\nfunction addToZone(x, y) {\n  if (x > 0 && !npcZone[x - 1]) npcZone[x - 1] = {};\n  if (!npcZone[x]) npcZone[x] = {};\n  if (!npcZone[x + 1]) npcZone[x + 1] = {};\n  for (var i = -1; i < 1; i++) {\n    for (var j = -1; j < 1; j++) {\n      if (x + i >= 0) npcZone[x + i][y + j] = true;\n    }\n  }\n}\nfunction fillNpcZone() {\n  npcZone = {};\n  if (true) {\n    var _iterator = _createForOfIteratorHelper(Engine.npcs.getDrawableList()),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var npc = _step.value;\n        if (npc.d && !isNaN(npc.d.x)) addToZone(npc.d.x, npc.d.y);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  } else { var id; }\n  if (_npc_npc__WEBPACK_IMPORTED_MODULE_0__.customNpcs[Engine.map.d.id]) {\n    for (var npcId in _npc_npc__WEBPACK_IMPORTED_MODULE_0__.customNpcs[Engine.map.d.id]) {\n      addToZone(_npc_npc__WEBPACK_IMPORTED_MODULE_0__.customNpcs[Engine.map.d.id][npcId].x, _npc_npc__WEBPACK_IMPORTED_MODULE_0__.customNpcs[Engine.map.d.id][npcId].y);\n    }\n  }\n  var _iterator2 = _createForOfIteratorHelper(_npc_npc__WEBPACK_IMPORTED_MODULE_0__.customNpcs.default),\n    _step2;\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var _npc = _step2.value;\n      addToZone(_npc.x, _npc.y);\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n}\nfunction addLightningToChunk(chunkX, chunkY) {\n  var tries = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  if (tries > 3) return;\n  var minX = chunkX * CHUNK_SIZE;\n  var maxX = chunkX * CHUNK_SIZE + CHUNK_SIZE;\n  var minY = chunkY * CHUNK_SIZE;\n  var maxY = chunkY * CHUNK_SIZE + CHUNK_SIZE;\n  var date = new Date();\n  date.setMinutes(0, 0, 0);\n  var seed = Number(date) + (chunkX + 1) * (chunkY + 1) * Engine.map.d.id + tries;\n  var x = Math.floor((0,_utility_functions__WEBPACK_IMPORTED_MODULE_3__.pseudoRandom)(seed) * (maxX + 1 - minX)) + minX;\n  var y = Math.floor((0,_utility_functions__WEBPACK_IMPORTED_MODULE_3__.pseudoRandom)(seed + 1) * (maxY + 1 - minY)) + minY;\n  if (npcZone[x] && npcZone[x][y]) addLightningToChunk(chunkX, chunkY, tries + 1);else {\n    var imgId = Math.floor((0,_utility_functions__WEBPACK_IMPORTED_MODULE_3__.pseudoRandom)(seed + chunkX + chunkY) * lightningUrls.length);\n    lightningNpcs.push((0,_npc_npc_actions_add__WEBPACK_IMPORTED_MODULE_1__.addNpc)(new _npc_npc__WEBPACK_IMPORTED_MODULE_0__.Npc(x, y, lightningUrls[imgId], '', false)));\n  }\n}\nfunction clearLightnings() {\n  var _iterator3 = _createForOfIteratorHelper(lightningNpcs),\n    _step3;\n  try {\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      var npcData = _step3.value;\n      if (true) {\n        for (var id in npcData) {\n          (0,_npc_npc_actions_remove__WEBPACK_IMPORTED_MODULE_2__.removeNpc)(npcData[id].x, npcData[id].y);\n        }\n      } else {}\n    }\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n  lightningNpcs.splice(0);\n}\nfunction displayLightnings() {\n  fillNpcZone();\n  var mapChunks = {};\n  if (true) {\n    mapChunks.x = Math.floor(Engine.map.d.x / CHUNK_SIZE);\n    mapChunks.y = Math.floor(Engine.map.d.y / CHUNK_SIZE);\n  } else {}\n  for (var i = 0; i < mapChunks.x; i++) {\n    for (var j = 0; j < mapChunks.y; j++) {\n      addLightningToChunk(i, j);\n    }\n  }\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/weather/lightnings.js?");

/***/ }),

/***/ "./src/weather/noise.js":
/*!******************************!*\
  !*** ./src/weather/noise.js ***!
  \******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Simple1DNoise: function() { return /* binding */ Simple1DNoise; }\n/* harmony export */ });\nfunction Simple1DNoise(seed) {\n  seed = seed || 2019;\n  var MAX_VERTICES = 256;\n  var MAX_VERTICES_MASK = MAX_VERTICES - 1;\n  var amplitude = 1;\n  var scale = 0.21;\n  var r = [];\n  function Random(seed) {\n    this._seed = seed % 2147483647;\n    if (this._seed <= 0) this._seed += 2147483646;\n    this.next = function next() {\n      return this._seed = this._seed * 16807 % 2147483647;\n    };\n    this.getFloat = function () {\n      return (this.next() - 1) / 2147483646;\n    };\n  }\n  var rand = new Random(seed);\n  for (var i = 0; i < MAX_VERTICES; ++i) r.push(rand.getFloat());\n  function getVal(x) {\n    var scaledX = x * scale;\n    var xFloor = Math.floor(scaledX);\n    var t = scaledX - xFloor;\n    var tRemapSmoothstep = t * t * (3 - 2 * t);\n    var xMin = xFloor % MAX_VERTICES_MASK;\n    var xMax = (xMin + 1) % MAX_VERTICES_MASK;\n    var y = lerp(r[xMin], r[xMax], tRemapSmoothstep);\n    return y * amplitude;\n  }\n\n  /**\n   * Linear interpolation function.\n   * @param a The lower integer value\n   * @param b The upper integer value\n   * @param t The value between the two\n   * @returns {number}\n   */\n  function lerp(a, b, t) {\n    return a * (1 - t) + b * t;\n  }\n\n  // return the API\n  return {\n    getVal: getVal,\n    setAmplitude: function setAmplitude(newAmplitude) {\n      amplitude = newAmplitude;\n    },\n    setScale: function setScale(newScale) {\n      scale = newScale;\n    }\n  };\n}\n\n/**\n * Modified version of 1d noise from Michael Bromley:\n *\n * The MIT License (MIT)\n * Copyright (c) 2014 Michael Bromley\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n//# sourceURL=webpack://nerthusaddon/./src/weather/noise.js?");

/***/ }),

/***/ "./src/weather/weather.js":
/*!********************************!*\
  !*** ./src/weather/weather.js ***!
  \********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   displayWeather: function() { return /* binding */ displayWeather; },\n/* harmony export */   getWeather: function() { return /* binding */ getWeather; },\n/* harmony export */   initWeather: function() { return /* binding */ initWeather; },\n/* harmony export */   setForcedWeather: function() { return /* binding */ setForcedWeather; }\n/* harmony export */ });\n/* harmony import */ var _res_configs_climates_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../res/configs/climates.json */ \"./res/configs/climates.json\");\n/* harmony import */ var _res_descriptions_weather_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../res/descriptions/weather.json */ \"./res/descriptions/weather.json\");\n/* harmony import */ var _API__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../API */ \"./src/API.js\");\n/* harmony import */ var _game_integration_loaders__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../game-integration/loaders */ \"./src/game-integration/loaders.js\");\n/* harmony import */ var _interface_panel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../interface/panel */ \"./src/interface/panel.js\");\n/* harmony import */ var _night_night__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../night/night */ \"./src/night/night.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../settings */ \"./src/settings.js\");\n/* harmony import */ var _utility_functions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility-functions */ \"./src/utility-functions.js\");\n/* harmony import */ var _widgets__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../widgets */ \"./src/widgets.js\");\n/* harmony import */ var _effects__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./effects */ \"./src/weather/effects.js\");\n/* harmony import */ var _lightnings__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./lightnings */ \"./src/weather/lightnings.js\");\n/* harmony import */ var _noise__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./noise */ \"./src/weather/noise.js\");\n\n\n\n\n\n\n\n\n\n\n\n\nvar CHARACTERISTIC = Object.freeze({\n  HUMIDITY: 'humidity',\n  CLOUDINESS: 'cloudiness',\n  TEMPERATURE: 'temperature'\n});\nvar GAME_WEATHERS = Object.freeze(['fish', 'light', 'latern', 'bat']);\nvar climateNoises = {\n  [CHARACTERISTIC.HUMIDITY]: {},\n  [CHARACTERISTIC.CLOUDINESS]: {},\n  [CHARACTERISTIC.TEMPERATURE]: {}\n};\nvar $widget;\nvar forcedWeathers = {\n  default: ''\n};\nfunction getClimateNoise(climate, type) {\n  if (!climate) climate = 'default';\n  if (!climateNoises[type][climate]) {\n    var multiplier;\n    switch (type) {\n      case CHARACTERISTIC.HUMIDITY:\n        multiplier = 42;\n        break;\n      case CHARACTERISTIC.CLOUDINESS:\n        multiplier = 666;\n        break;\n      case CHARACTERISTIC.TEMPERATURE:\n        multiplier = 2020;\n        break;\n    }\n    climateNoises[type][climate] = new _noise__WEBPACK_IMPORTED_MODULE_11__.Simple1DNoise(_res_configs_climates_json__WEBPACK_IMPORTED_MODULE_0__.seeds[climate] * multiplier);\n  }\n  return climateNoises[type][climate];\n}\nfunction getMapsClimate(mapId) {\n  for (var climateName in _res_configs_climates_json__WEBPACK_IMPORTED_MODULE_0__.maps) if (_res_configs_climates_json__WEBPACK_IMPORTED_MODULE_0__.maps[climateName].indexOf(mapId) >= 0) return climateName;\n  return false;\n}\nfunction getClimateVariation(characteristic, date, climate) {\n  if (!characteristic[climate]) climate = 'default';\n  var now = new Date();\n  var start = new Date(now.getFullYear(), 2, 20); // start of spring\n  if (start > now) start.setUTCFullYear(now.getFullYear() - 1);\n  var day = Math.ceil((now - start) / (1000 * 60 * 60 * 24));\n  var firstSeason = Math.floor(day / 90);\n  var secondSeason = firstSeason === 3 ? 0 : firstSeason + 1;\n  return characteristic[climate][firstSeason] * (1 - (day / 90 - firstSeason)) + characteristic[climate][secondSeason] * (day / 90 - firstSeason);\n}\nfunction getClimateCloudiness(date, climate) {\n  var pointInTime = date.getTime() / 3600000;\n  var ret = getClimateNoise(climate, CHARACTERISTIC.CLOUDINESS).getVal(pointInTime) * getClimateVariation(_res_configs_climates_json__WEBPACK_IMPORTED_MODULE_0__.characteristics.cloudiness, date, climate);\n  return ret > 1 ? 1 : ret;\n}\nfunction getClimateHumidity(date, climate) {\n  var pointInTime = date.getTime() / 3600000;\n  var ret = getClimateNoise(climate, CHARACTERISTIC.HUMIDITY).getVal(pointInTime) * getClimateVariation(_res_configs_climates_json__WEBPACK_IMPORTED_MODULE_0__.characteristics.humidity, date, climate);\n  return ret > 1 ? 1 : ret;\n}\nfunction getGlobalTemperature(date, climate) {\n  var month = date.getUTCMonth();\n  var day = date.getUTCDate();\n\n  // f(x) = 15 * Math.sin(0.52 * x - 1.5) + 9 is a graph that resembles average temperature graph in poland\n  // https://en.climate-data.org/north-america/united-states-of-america/ohio/poland-137445/#climate-graph\n  var x = month + day / 31; //minor difference in 28 day month probably not noticeable\n  var dayTemperature = 15 * Math.sin(0.52 * x - 1.5) + 9;\n  var pointInTime = date.getTime() / 3600000;\n  var hourTemperatureChange = getClimateNoise(climate, CHARACTERISTIC.TEMPERATURE).getVal(pointInTime) * 10 - 5;\n  return dayTemperature + hourTemperatureChange;\n}\nfunction getClimateTemperature(date, climate) {\n  return getGlobalTemperature(date, climate) + getClimateVariation(_res_configs_climates_json__WEBPACK_IMPORTED_MODULE_0__.characteristics.temperature, date, climate);\n}\nfunction getCurrentRegionCharacteristic(date)\n// todo naming???\n{\n  if (!(0,_utility_functions__WEBPACK_IMPORTED_MODULE_7__.isCurrentMapOutdoor)()) return false;\n  var humidity = 0;\n  var cloudiness = 0;\n  var temperature = 0;\n  var adjacentClimates = [];\n  var gatewaysIds = [];\n  var currentMapClimate;\n  if (true) {\n    for (var mapId in Engine.map.gateways.townnames) {\n      mapId = parseInt(mapId);\n      var mapClimate = getMapsClimate(mapId);\n      if (mapClimate && gatewaysIds.indexOf(mapId) < 0) {\n        adjacentClimates.push(mapClimate);\n        gatewaysIds.push(mapId);\n      }\n    }\n    currentMapClimate = getMapsClimate(Engine.map.d.id);\n  } else { var _mapClimate, _mapId; }\n  var adjacentHumidity = 0;\n  var adjacentCloudiness = 0;\n  var adjacentTemperature = 0;\n  var adjacentAmount = adjacentClimates.length;\n  if (adjacentAmount === 0 && !currentMapClimate) return false;else if (adjacentAmount > 0) {\n    for (var i = 0; i < adjacentAmount; i++) {\n      adjacentHumidity += getClimateHumidity(date, adjacentClimates[i]);\n      adjacentCloudiness += getClimateCloudiness(date, adjacentClimates[i]);\n      adjacentTemperature += getClimateTemperature(date, adjacentClimates[i]);\n    }\n    adjacentHumidity /= adjacentAmount;\n    adjacentCloudiness /= adjacentAmount;\n    adjacentTemperature /= adjacentAmount;\n    if (currentMapClimate) {\n      humidity = 0.5 * getClimateHumidity(date, currentMapClimate) + 0.5 * adjacentHumidity;\n      cloudiness = 0.5 * getClimateCloudiness(date, currentMapClimate) + 0.5 * adjacentCloudiness;\n      temperature = 0.5 * getClimateTemperature(date, currentMapClimate) + 0.5 * adjacentTemperature;\n    } else {\n      humidity = adjacentHumidity;\n      cloudiness = adjacentCloudiness;\n      temperature = adjacentTemperature;\n    }\n  } else {\n    humidity = getClimateHumidity(date, currentMapClimate);\n    cloudiness = getClimateCloudiness(date, currentMapClimate);\n    temperature = getClimateTemperature(date, currentMapClimate);\n  }\n  return {\n    [CHARACTERISTIC.HUMIDITY]: humidity,\n    [CHARACTERISTIC.CLOUDINESS]: cloudiness,\n    [CHARACTERISTIC.TEMPERATURE]: temperature\n  };\n}\n\n/**\n * Table holding names of weathers based on cloudiness and humidity thresholds.\n * First variable (rows) is cloudiness and second (columns) is humidity\n * There should be 52.5% to get a value without any rain if both variables are random.\n * @type {string[][]}\n */\nvar WEATHER_TABLE = [\n//   20%             25%               25%           30%\n['clear-day', 'day-cloud-small', 'day-cloud-big', 'overcast'],\n// 25%\n['clear-day', 'day-cloud-small', 'day-cloud-big', 'rain-light'],\n// 25%\n['clear-day', 'day-cloud-small', 'day-rain', 'rain'],\n// 25%\n['clear-day', 'day-rain', 'day-storm', 'storm'] // 25%\n];\nvar RAIN_STRENGTH = {\n  'rain-light': 0.5,\n  'day-rain': 0.6,\n  'day-rain-with-snow': 0.6,\n  'rain-with-snow': 0.8,\n  'day-storm': 1,\n  'rain': 0.9,\n  'storm': 1\n};\nvar SNOW_STRENGTH = {\n  'day-snow': 1,\n  'day-rain-with-snow': 1,\n  'rain-with-snow': 1,\n  'snow': 1,\n  'snow-storm': 1\n};\nvar CLOUDS_STRENGTH = {\n  'day-cloud-small': 0.1,\n  'rain-light': 0.1,\n  'day-cloud-big': 0.15,\n  'day-rain': 0.15,\n  'rain': 0.15,\n  'day-storm': 0.15,\n  'overcast': 0.2,\n  'storm': 0.2\n};\nvar LIGHTNING = {\n  'storm': true,\n  'day-storm': true,\n  'snow-storm': true\n};\nfunction getCurrentForcedWeather() {\n  var weatherName = '';\n  if (forcedWeathers.default) weatherName = forcedWeathers.default;\n  if (true) {\n    if (forcedWeathers[Engine.map.d.id]) weatherName = forcedWeathers[Engine.map.d.id];\n  } else {}\n  return weatherName;\n}\nfunction getWeather(date) {\n  var characteristics = getCurrentRegionCharacteristic(date);\n  if (characteristics) {\n    if (characteristics.temperature > 25)\n      // really hot, less cloudiness and humidity\n      {\n        characteristics.cloudiness *= 0.8;\n        characteristics.humidity *= 0.8;\n      }\n    var cloudinessPart;\n    if (characteristics.cloudiness <= 0.2) cloudinessPart = 0;else if (characteristics.cloudiness <= 0.55) cloudinessPart = 1;else if (characteristics.cloudiness <= 0.70) cloudinessPart = 2;else cloudinessPart = 3;\n    var humidityPart;\n    if (characteristics.humidity <= 0.25) humidityPart = 0;else if (characteristics.humidity <= 0.50) humidityPart = 1;else if (characteristics.humidity <= 0.75) humidityPart = 2;else humidityPart = 3;\n    var weather = WEATHER_TABLE[cloudinessPart][humidityPart];\n    if (characteristics.temperature < -3) weather = weather.replace(/^rain(-light)?$/, 'snow').replace(/^storm$/, 'snow-storm').replace(/^day-storm$/, 'day-snow');else if (characteristics.temperature < 5) weather = weather.replace(/^rain(-light)?$/, 'rain-with-snow').replace(/^day-storm$/, 'day-rain-with-snow');\n    var rain = 0;\n    if (RAIN_STRENGTH[weather]) rain = RAIN_STRENGTH[weather];\n    var snow = 0;\n    if (SNOW_STRENGTH[weather]) snow = SNOW_STRENGTH[weather];\n    if (date.getHours() < 6 || date.getHours() > 20) weather = weather.replace('day', 'night');\n    return {\n      name: weather,\n      rainStrength: rain,\n      snowStrength: snow,\n      temperature: characteristics.temperature,\n      humidity: characteristics.humidity,\n      cloudiness: characteristics.cloudiness\n    };\n  } else return {\n    name: 'indoor'\n  };\n}\nfunction displayWeather() {\n  var weatherName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getWeather(new Date()).name;\n  var forcedWeatherName = getCurrentForcedWeather();\n  if (forcedWeatherName) {\n    weatherName = forcedWeatherName;\n    if (_settings__WEBPACK_IMPORTED_MODULE_6__.settings.weatherEffects) (0,_effects__WEBPACK_IMPORTED_MODULE_9__.clearEffects)(true);\n  } else {\n    if (_settings__WEBPACK_IMPORTED_MODULE_6__.settings.weatherEffects) (0,_effects__WEBPACK_IMPORTED_MODULE_9__.clearEffects)();\n  }\n  if (weatherName === 'indoor') {\n    $widget.css('display', 'none');\n    (0,_night_night__WEBPACK_IMPORTED_MODULE_5__.setOpacityChange)(0);\n  } else if (GAME_WEATHERS.includes(weatherName)) {\n    $widget.css('display', 'none');\n    (0,_night_night__WEBPACK_IMPORTED_MODULE_5__.setOpacityChange)(0);\n    if (_settings__WEBPACK_IMPORTED_MODULE_6__.settings.weatherEffects) (0,_effects__WEBPACK_IMPORTED_MODULE_9__.displayGameWeather)(weatherName);\n  } else {\n    if (_settings__WEBPACK_IMPORTED_MODULE_6__.settings.weather) {\n      $widget.css('display', 'flex');\n      $widget.children('.nerthus__widget-image').css('background-image', 'url(' + \"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + 'res/img/weather/icons/' + weatherName + '.png)');\n      if (_res_descriptions_weather_json__WEBPACK_IMPORTED_MODULE_1__[weatherName]) {\n        var descId = Math.floor(Math.random() * _res_descriptions_weather_json__WEBPACK_IMPORTED_MODULE_1__[weatherName].length);\n        $widget.children('.nerthus__widget-desc').text(_res_descriptions_weather_json__WEBPACK_IMPORTED_MODULE_1__[weatherName][descId]);\n      }\n    }\n    if (_settings__WEBPACK_IMPORTED_MODULE_6__.settings.weatherEffects) {\n      var dayWeatherName = weatherName.replace('night', 'day');\n      if ((0,_utility_functions__WEBPACK_IMPORTED_MODULE_7__.isCurrentMapOutdoor)()) {\n        if (RAIN_STRENGTH[dayWeatherName]) (0,_effects__WEBPACK_IMPORTED_MODULE_9__.displayRain)(RAIN_STRENGTH[dayWeatherName]);\n        if (SNOW_STRENGTH[dayWeatherName]) (0,_effects__WEBPACK_IMPORTED_MODULE_9__.displaySnow)(SNOW_STRENGTH[dayWeatherName]);\n        if (LIGHTNING[dayWeatherName]) (0,_lightnings__WEBPACK_IMPORTED_MODULE_10__.displayLightnings)();\n      }\n      (0,_night_night__WEBPACK_IMPORTED_MODULE_5__.setOpacityChange)(CLOUDS_STRENGTH[dayWeatherName]);\n    }\n  }\n  (0,_API__WEBPACK_IMPORTED_MODULE_2__.callEvent)('displayWeather', weatherName);\n}\nfunction setForcedWeather(weatherName) {\n  var mapId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'default';\n  if (!weatherName || weatherName === 'reset') forcedWeathers[mapId] = '';else if (GAME_WEATHERS.includes(weatherName) || _res_descriptions_weather_json__WEBPACK_IMPORTED_MODULE_1__[weatherName]) {\n    forcedWeathers[mapId] = weatherName;\n  }\n}\nfunction startChangeTimer() {\n  var date = new Date();\n  var hour = Math.floor(date.getUTCHours() + 1);\n  date.setUTCHours(hour, 0, 0);\n  var timeout = date - new Date();\n  setTimeout(function () {\n    displayWeather();\n    startChangeTimer();\n  }, timeout);\n}\nfunction initWeather() {\n  $widget = (0,_widgets__WEBPACK_IMPORTED_MODULE_8__.addWidget)('weather');\n  if (!_settings__WEBPACK_IMPORTED_MODULE_6__.settings.weather) $widget.css('display', 'none');\n  (0,_game_integration_loaders__WEBPACK_IMPORTED_MODULE_3__.loadOnEveryMap)(displayWeather);\n  startChangeTimer();\n  (0,_interface_panel__WEBPACK_IMPORTED_MODULE_4__.addSettingToPanel)('weather', 'Widget pogody', 'Pokazuje lub ukrywa widget w lewym górnym rogu mapy.', function () {\n    if (!_settings__WEBPACK_IMPORTED_MODULE_6__.settings.weather) $widget.css('display', 'none');\n    displayWeather();\n  });\n  (0,_interface_panel__WEBPACK_IMPORTED_MODULE_4__.addSettingToPanel)('weatherEffects', 'Efekty pogodowe', 'Pokazuje lub ukrywa efekty pogodowe z dodatku.', function () {\n    if (!_settings__WEBPACK_IMPORTED_MODULE_6__.settings.weatherEffects) (0,_night_night__WEBPACK_IMPORTED_MODULE_5__.setOpacityChange)(0);\n    (0,_effects__WEBPACK_IMPORTED_MODULE_9__.clearEffects)(getCurrentForcedWeather() !== '');\n    displayWeather();\n  });\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/weather/weather.js?");

/***/ }),

/***/ "./src/widgets.js":
/*!************************!*\
  !*** ./src/widgets.js ***!
  \************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addWidget: function() { return /* binding */ addWidget; },\n/* harmony export */   initWidgets: function() { return /* binding */ initWidgets; }\n/* harmony export */ });\nvar $widgetsContainer;\nfunction addWidget(name, imageUrl, description) {\n  var style = imageUrl ? `style=\"background-image: url(${imageUrl})\"` : '';\n  return $(`<div id=\"' + name + '-widget\" class=\"nerthus__widget\">\n            <div class=\"nerthus__widget-image\" ${style}\"></div>\n            <div class=\"nerthus__widget-desc\">${description}</div>\n        </div>`).appendTo($widgetsContainer);\n}\nfunction initWidgets() {\n  var $parentElement;\n  if (true) {\n    $parentElement = $('.layer.interface-layer');\n  } else {}\n  $widgetsContainer = $('<div id=\"nerthus-widgets-container\"></div>').appendTo($parentElement);\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/widgets.js?");

/***/ }),

/***/ "./src/zodiac.js":
/*!***********************!*\
  !*** ./src/zodiac.js ***!
  \***********************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ZODIAC_SIGN_START_DAY: function() { return /* binding */ ZODIAC_SIGN_START_DAY; },\n/* harmony export */   getZodiacSign: function() { return /* binding */ getZodiacSign; },\n/* harmony export */   initZodiac: function() { return /* binding */ initZodiac; }\n/* harmony export */ });\n/* harmony import */ var _res_descriptions_zodiac_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../res/descriptions/zodiac.json */ \"./res/descriptions/zodiac.json\");\n/* harmony import */ var _interface_panel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interface/panel */ \"./src/interface/panel.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./settings */ \"./src/settings.js\");\n/* harmony import */ var _widgets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./widgets */ \"./src/widgets.js\");\n\n\n\n\n\n/**\n * Zodiac sign dates in format: month: [name, end day]\n */\nvar ZODIAC_SIGN_START_DAY = [['capricorn', 19], ['aquarius', 18], ['pisces', 20], ['aries', 19], ['taurus', 22], ['gemini', 21], ['cancer', 22], ['leo', 23], ['virgo', 22], ['libra', 22], ['scorpio', 21], ['sagittarius', 21], ['capricorn', 0] // repeat Capricorn for the end of the year\n];\n\n/**\n * @param day\n * @param month - starts at 0\n * @returns string\n */\nfunction getZodiacSign(day, month) {\n  return day > ZODIAC_SIGN_START_DAY[month][1] ? ZODIAC_SIGN_START_DAY[month + 1][0] : ZODIAC_SIGN_START_DAY[month][0];\n}\nfunction initZodiac() {\n  var date = new Date();\n  var currentSign = getZodiacSign(date.getUTCDate(), date.getUTCMonth());\n  var $widget = (0,_widgets__WEBPACK_IMPORTED_MODULE_3__.addWidget)('zodiac', \"https://cdn.jsdelivr.net/gh/nerthus-margonem/nerthusaddon@5.0.0/\" + 'res/img/zodiac/' + currentSign + '.png', _res_descriptions_zodiac_json__WEBPACK_IMPORTED_MODULE_0__[currentSign][0]);\n  $widget.children('.nerthus__widget-image').css('cursor', 'pointer').click(function () {\n    var $desc = $widget.children('.nerthus__widget-desc');\n    if ($desc.text() === _res_descriptions_zodiac_json__WEBPACK_IMPORTED_MODULE_0__[currentSign][0]) $desc.text(_res_descriptions_zodiac_json__WEBPACK_IMPORTED_MODULE_0__[currentSign][1]);else $desc.text(_res_descriptions_zodiac_json__WEBPACK_IMPORTED_MODULE_0__[currentSign][0]);\n  });\n  if (_settings__WEBPACK_IMPORTED_MODULE_2__.settings.zodiac) $widget.css('display', 'flex');else $widget.css('display', 'none');\n  (0,_interface_panel__WEBPACK_IMPORTED_MODULE_1__.addSettingToPanel)('zodiac', 'Widget znaku zodiaku', 'Pokazuje lub ukrywa widget w lewym górnym rogu mapy.', function () {\n    if (_settings__WEBPACK_IMPORTED_MODULE_2__.settings.zodiac) $widget.css('display', 'flex');else $widget.css('display', 'none');\n  });\n  return $widget;\n}\n\n//# sourceURL=webpack://nerthusaddon/./src/zodiac.js?");

/***/ }),

/***/ "./node_modules/omggif/omggif.js":
/*!***************************************!*\
  !*** ./node_modules/omggif/omggif.js ***!
  \***************************************/
/***/ (function(__unused_webpack_module, exports) {

eval("// (c) Dean McNamee <dean@gmail.com>, 2013.\n//\n// https://github.com/deanm/omggif\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n// IN THE SOFTWARE.\n//\n// omggif is a JavaScript implementation of a GIF 89a encoder and decoder,\n// including animation and compression.  It does not rely on any specific\n// underlying system, so should run in the browser, Node, or Plask.\n\n\n\nfunction GifWriter(buf, width, height, gopts) {\n  var p = 0;\n\n  var gopts = gopts === undefined ? { } : gopts;\n  var loop_count = gopts.loop === undefined ? null : gopts.loop;\n  var global_palette = gopts.palette === undefined ? null : gopts.palette;\n\n  if (width <= 0 || height <= 0 || width > 65535 || height > 65535)\n    throw new Error(\"Width/Height invalid.\");\n\n  function check_palette_and_num_colors(palette) {\n    var num_colors = palette.length;\n    if (num_colors < 2 || num_colors > 256 ||  num_colors & (num_colors-1)) {\n      throw new Error(\n          \"Invalid code/color length, must be power of 2 and 2 .. 256.\");\n    }\n    return num_colors;\n  }\n\n  // - Header.\n  buf[p++] = 0x47; buf[p++] = 0x49; buf[p++] = 0x46;  // GIF\n  buf[p++] = 0x38; buf[p++] = 0x39; buf[p++] = 0x61;  // 89a\n\n  // Handling of Global Color Table (palette) and background index.\n  var gp_num_colors_pow2 = 0;\n  var background = 0;\n  if (global_palette !== null) {\n    var gp_num_colors = check_palette_and_num_colors(global_palette);\n    while (gp_num_colors >>= 1) ++gp_num_colors_pow2;\n    gp_num_colors = 1 << gp_num_colors_pow2;\n    --gp_num_colors_pow2;\n    if (gopts.background !== undefined) {\n      background = gopts.background;\n      if (background >= gp_num_colors)\n        throw new Error(\"Background index out of range.\");\n      // The GIF spec states that a background index of 0 should be ignored, so\n      // this is probably a mistake and you really want to set it to another\n      // slot in the palette.  But actually in the end most browsers, etc end\n      // up ignoring this almost completely (including for dispose background).\n      if (background === 0)\n        throw new Error(\"Background index explicitly passed as 0.\");\n    }\n  }\n\n  // - Logical Screen Descriptor.\n  // NOTE(deanm): w/h apparently ignored by implementations, but set anyway.\n  buf[p++] = width & 0xff; buf[p++] = width >> 8 & 0xff;\n  buf[p++] = height & 0xff; buf[p++] = height >> 8 & 0xff;\n  // NOTE: Indicates 0-bpp original color resolution (unused?).\n  buf[p++] = (global_palette !== null ? 0x80 : 0) |  // Global Color Table Flag.\n             gp_num_colors_pow2;  // NOTE: No sort flag (unused?).\n  buf[p++] = background;  // Background Color Index.\n  buf[p++] = 0;  // Pixel aspect ratio (unused?).\n\n  // - Global Color Table\n  if (global_palette !== null) {\n    for (var i = 0, il = global_palette.length; i < il; ++i) {\n      var rgb = global_palette[i];\n      buf[p++] = rgb >> 16 & 0xff;\n      buf[p++] = rgb >> 8 & 0xff;\n      buf[p++] = rgb & 0xff;\n    }\n  }\n\n  if (loop_count !== null) {  // Netscape block for looping.\n    if (loop_count < 0 || loop_count > 65535)\n      throw new Error(\"Loop count invalid.\")\n    // Extension code, label, and length.\n    buf[p++] = 0x21; buf[p++] = 0xff; buf[p++] = 0x0b;\n    // NETSCAPE2.0\n    buf[p++] = 0x4e; buf[p++] = 0x45; buf[p++] = 0x54; buf[p++] = 0x53;\n    buf[p++] = 0x43; buf[p++] = 0x41; buf[p++] = 0x50; buf[p++] = 0x45;\n    buf[p++] = 0x32; buf[p++] = 0x2e; buf[p++] = 0x30;\n    // Sub-block\n    buf[p++] = 0x03; buf[p++] = 0x01;\n    buf[p++] = loop_count & 0xff; buf[p++] = loop_count >> 8 & 0xff;\n    buf[p++] = 0x00;  // Terminator.\n  }\n\n\n  var ended = false;\n\n  this.addFrame = function(x, y, w, h, indexed_pixels, opts) {\n    if (ended === true) { --p; ended = false; }  // Un-end.\n\n    opts = opts === undefined ? { } : opts;\n\n    // TODO(deanm): Bounds check x, y.  Do they need to be within the virtual\n    // canvas width/height, I imagine?\n    if (x < 0 || y < 0 || x > 65535 || y > 65535)\n      throw new Error(\"x/y invalid.\")\n\n    if (w <= 0 || h <= 0 || w > 65535 || h > 65535)\n      throw new Error(\"Width/Height invalid.\")\n\n    if (indexed_pixels.length < w * h)\n      throw new Error(\"Not enough pixels for the frame size.\");\n\n    var using_local_palette = true;\n    var palette = opts.palette;\n    if (palette === undefined || palette === null) {\n      using_local_palette = false;\n      palette = global_palette;\n    }\n\n    if (palette === undefined || palette === null)\n      throw new Error(\"Must supply either a local or global palette.\");\n\n    var num_colors = check_palette_and_num_colors(palette);\n\n    // Compute the min_code_size (power of 2), destroying num_colors.\n    var min_code_size = 0;\n    while (num_colors >>= 1) ++min_code_size;\n    num_colors = 1 << min_code_size;  // Now we can easily get it back.\n\n    var delay = opts.delay === undefined ? 0 : opts.delay;\n\n    // From the spec:\n    //     0 -   No disposal specified. The decoder is\n    //           not required to take any action.\n    //     1 -   Do not dispose. The graphic is to be left\n    //           in place.\n    //     2 -   Restore to background color. The area used by the\n    //           graphic must be restored to the background color.\n    //     3 -   Restore to previous. The decoder is required to\n    //           restore the area overwritten by the graphic with\n    //           what was there prior to rendering the graphic.\n    //  4-7 -    To be defined.\n    // NOTE(deanm): Dispose background doesn't really work, apparently most\n    // browsers ignore the background palette index and clear to transparency.\n    var disposal = opts.disposal === undefined ? 0 : opts.disposal;\n    if (disposal < 0 || disposal > 3)  // 4-7 is reserved.\n      throw new Error(\"Disposal out of range.\");\n\n    var use_transparency = false;\n    var transparent_index = 0;\n    if (opts.transparent !== undefined && opts.transparent !== null) {\n      use_transparency = true;\n      transparent_index = opts.transparent;\n      if (transparent_index < 0 || transparent_index >= num_colors)\n        throw new Error(\"Transparent color index.\");\n    }\n\n    if (disposal !== 0 || use_transparency || delay !== 0) {\n      // - Graphics Control Extension\n      buf[p++] = 0x21; buf[p++] = 0xf9;  // Extension / Label.\n      buf[p++] = 4;  // Byte size.\n\n      buf[p++] = disposal << 2 | (use_transparency === true ? 1 : 0);\n      buf[p++] = delay & 0xff; buf[p++] = delay >> 8 & 0xff;\n      buf[p++] = transparent_index;  // Transparent color index.\n      buf[p++] = 0;  // Block Terminator.\n    }\n\n    // - Image Descriptor\n    buf[p++] = 0x2c;  // Image Seperator.\n    buf[p++] = x & 0xff; buf[p++] = x >> 8 & 0xff;  // Left.\n    buf[p++] = y & 0xff; buf[p++] = y >> 8 & 0xff;  // Top.\n    buf[p++] = w & 0xff; buf[p++] = w >> 8 & 0xff;\n    buf[p++] = h & 0xff; buf[p++] = h >> 8 & 0xff;\n    // NOTE: No sort flag (unused?).\n    // TODO(deanm): Support interlace.\n    buf[p++] = using_local_palette === true ? (0x80 | (min_code_size-1)) : 0;\n\n    // - Local Color Table\n    if (using_local_palette === true) {\n      for (var i = 0, il = palette.length; i < il; ++i) {\n        var rgb = palette[i];\n        buf[p++] = rgb >> 16 & 0xff;\n        buf[p++] = rgb >> 8 & 0xff;\n        buf[p++] = rgb & 0xff;\n      }\n    }\n\n    p = GifWriterOutputLZWCodeStream(\n            buf, p, min_code_size < 2 ? 2 : min_code_size, indexed_pixels);\n\n    return p;\n  };\n\n  this.end = function() {\n    if (ended === false) {\n      buf[p++] = 0x3b;  // Trailer.\n      ended = true;\n    }\n    return p;\n  };\n\n  this.getOutputBuffer = function() { return buf; };\n  this.setOutputBuffer = function(v) { buf = v; };\n  this.getOutputBufferPosition = function() { return p; };\n  this.setOutputBufferPosition = function(v) { p = v; };\n}\n\n// Main compression routine, palette indexes -> LZW code stream.\n// |index_stream| must have at least one entry.\nfunction GifWriterOutputLZWCodeStream(buf, p, min_code_size, index_stream) {\n  buf[p++] = min_code_size;\n  var cur_subblock = p++;  // Pointing at the length field.\n\n  var clear_code = 1 << min_code_size;\n  var code_mask = clear_code - 1;\n  var eoi_code = clear_code + 1;\n  var next_code = eoi_code + 1;\n\n  var cur_code_size = min_code_size + 1;  // Number of bits per code.\n  var cur_shift = 0;\n  // We have at most 12-bit codes, so we should have to hold a max of 19\n  // bits here (and then we would write out).\n  var cur = 0;\n\n  function emit_bytes_to_buffer(bit_block_size) {\n    while (cur_shift >= bit_block_size) {\n      buf[p++] = cur & 0xff;\n      cur >>= 8; cur_shift -= 8;\n      if (p === cur_subblock + 256) {  // Finished a subblock.\n        buf[cur_subblock] = 255;\n        cur_subblock = p++;\n      }\n    }\n  }\n\n  function emit_code(c) {\n    cur |= c << cur_shift;\n    cur_shift += cur_code_size;\n    emit_bytes_to_buffer(8);\n  }\n\n  // I am not an expert on the topic, and I don't want to write a thesis.\n  // However, it is good to outline here the basic algorithm and the few data\n  // structures and optimizations here that make this implementation fast.\n  // The basic idea behind LZW is to build a table of previously seen runs\n  // addressed by a short id (herein called output code).  All data is\n  // referenced by a code, which represents one or more values from the\n  // original input stream.  All input bytes can be referenced as the same\n  // value as an output code.  So if you didn't want any compression, you\n  // could more or less just output the original bytes as codes (there are\n  // some details to this, but it is the idea).  In order to achieve\n  // compression, values greater then the input range (codes can be up to\n  // 12-bit while input only 8-bit) represent a sequence of previously seen\n  // inputs.  The decompressor is able to build the same mapping while\n  // decoding, so there is always a shared common knowledge between the\n  // encoding and decoder, which is also important for \"timing\" aspects like\n  // how to handle variable bit width code encoding.\n  //\n  // One obvious but very important consequence of the table system is there\n  // is always a unique id (at most 12-bits) to map the runs.  'A' might be\n  // 4, then 'AA' might be 10, 'AAA' 11, 'AAAA' 12, etc.  This relationship\n  // can be used for an effecient lookup strategy for the code mapping.  We\n  // need to know if a run has been seen before, and be able to map that run\n  // to the output code.  Since we start with known unique ids (input bytes),\n  // and then from those build more unique ids (table entries), we can\n  // continue this chain (almost like a linked list) to always have small\n  // integer values that represent the current byte chains in the encoder.\n  // This means instead of tracking the input bytes (AAAABCD) to know our\n  // current state, we can track the table entry for AAAABC (it is guaranteed\n  // to exist by the nature of the algorithm) and the next character D.\n  // Therefor the tuple of (table_entry, byte) is guaranteed to also be\n  // unique.  This allows us to create a simple lookup key for mapping input\n  // sequences to codes (table indices) without having to store or search\n  // any of the code sequences.  So if 'AAAA' has a table entry of 12, the\n  // tuple of ('AAAA', K) for any input byte K will be unique, and can be our\n  // key.  This leads to a integer value at most 20-bits, which can always\n  // fit in an SMI value and be used as a fast sparse array / object key.\n\n  // Output code for the current contents of the index buffer.\n  var ib_code = index_stream[0] & code_mask;  // Load first input index.\n  var code_table = { };  // Key'd on our 20-bit \"tuple\".\n\n  emit_code(clear_code);  // Spec says first code should be a clear code.\n\n  // First index already loaded, process the rest of the stream.\n  for (var i = 1, il = index_stream.length; i < il; ++i) {\n    var k = index_stream[i] & code_mask;\n    var cur_key = ib_code << 8 | k;  // (prev, k) unique tuple.\n    var cur_code = code_table[cur_key];  // buffer + k.\n\n    // Check if we have to create a new code table entry.\n    if (cur_code === undefined) {  // We don't have buffer + k.\n      // Emit index buffer (without k).\n      // This is an inline version of emit_code, because this is the core\n      // writing routine of the compressor (and V8 cannot inline emit_code\n      // because it is a closure here in a different context).  Additionally\n      // we can call emit_byte_to_buffer less often, because we can have\n      // 30-bits (from our 31-bit signed SMI), and we know our codes will only\n      // be 12-bits, so can safely have 18-bits there without overflow.\n      // emit_code(ib_code);\n      cur |= ib_code << cur_shift;\n      cur_shift += cur_code_size;\n      while (cur_shift >= 8) {\n        buf[p++] = cur & 0xff;\n        cur >>= 8; cur_shift -= 8;\n        if (p === cur_subblock + 256) {  // Finished a subblock.\n          buf[cur_subblock] = 255;\n          cur_subblock = p++;\n        }\n      }\n\n      if (next_code === 4096) {  // Table full, need a clear.\n        emit_code(clear_code);\n        next_code = eoi_code + 1;\n        cur_code_size = min_code_size + 1;\n        code_table = { };\n      } else {  // Table not full, insert a new entry.\n        // Increase our variable bit code sizes if necessary.  This is a bit\n        // tricky as it is based on \"timing\" between the encoding and\n        // decoder.  From the encoders perspective this should happen after\n        // we've already emitted the index buffer and are about to create the\n        // first table entry that would overflow our current code bit size.\n        if (next_code >= (1 << cur_code_size)) ++cur_code_size;\n        code_table[cur_key] = next_code++;  // Insert into code table.\n      }\n\n      ib_code = k;  // Index buffer to single input k.\n    } else {\n      ib_code = cur_code;  // Index buffer to sequence in code table.\n    }\n  }\n\n  emit_code(ib_code);  // There will still be something in the index buffer.\n  emit_code(eoi_code);  // End Of Information.\n\n  // Flush / finalize the sub-blocks stream to the buffer.\n  emit_bytes_to_buffer(1);\n\n  // Finish the sub-blocks, writing out any unfinished lengths and\n  // terminating with a sub-block of length 0.  If we have already started\n  // but not yet used a sub-block it can just become the terminator.\n  if (cur_subblock + 1 === p) {  // Started but unused.\n    buf[cur_subblock] = 0;\n  } else {  // Started and used, write length and additional terminator block.\n    buf[cur_subblock] = p - cur_subblock - 1;\n    buf[p++] = 0;\n  }\n  return p;\n}\n\nfunction GifReader(buf) {\n  var p = 0;\n\n  // - Header (GIF87a or GIF89a).\n  if (buf[p++] !== 0x47 ||            buf[p++] !== 0x49 || buf[p++] !== 0x46 ||\n      buf[p++] !== 0x38 || (buf[p++]+1 & 0xfd) !== 0x38 || buf[p++] !== 0x61) {\n    throw new Error(\"Invalid GIF 87a/89a header.\");\n  }\n\n  // - Logical Screen Descriptor.\n  var width = buf[p++] | buf[p++] << 8;\n  var height = buf[p++] | buf[p++] << 8;\n  var pf0 = buf[p++];  // <Packed Fields>.\n  var global_palette_flag = pf0 >> 7;\n  var num_global_colors_pow2 = pf0 & 0x7;\n  var num_global_colors = 1 << (num_global_colors_pow2 + 1);\n  var background = buf[p++];\n  buf[p++];  // Pixel aspect ratio (unused?).\n\n  var global_palette_offset = null;\n  var global_palette_size   = null;\n\n  if (global_palette_flag) {\n    global_palette_offset = p;\n    global_palette_size = num_global_colors;\n    p += num_global_colors * 3;  // Seek past palette.\n  }\n\n  var no_eof = true;\n\n  var frames = [ ];\n\n  var delay = 0;\n  var transparent_index = null;\n  var disposal = 0;  // 0 - No disposal specified.\n  var loop_count = null;\n\n  this.width = width;\n  this.height = height;\n\n  while (no_eof && p < buf.length) {\n    switch (buf[p++]) {\n      case 0x21:  // Graphics Control Extension Block\n        switch (buf[p++]) {\n          case 0xff:  // Application specific block\n            // Try if it's a Netscape block (with animation loop counter).\n            if (buf[p   ] !== 0x0b ||  // 21 FF already read, check block size.\n                // NETSCAPE2.0\n                buf[p+1 ] == 0x4e && buf[p+2 ] == 0x45 && buf[p+3 ] == 0x54 &&\n                buf[p+4 ] == 0x53 && buf[p+5 ] == 0x43 && buf[p+6 ] == 0x41 &&\n                buf[p+7 ] == 0x50 && buf[p+8 ] == 0x45 && buf[p+9 ] == 0x32 &&\n                buf[p+10] == 0x2e && buf[p+11] == 0x30 &&\n                // Sub-block\n                buf[p+12] == 0x03 && buf[p+13] == 0x01 && buf[p+16] == 0) {\n              p += 14;\n              loop_count = buf[p++] | buf[p++] << 8;\n              p++;  // Skip terminator.\n            } else {  // We don't know what it is, just try to get past it.\n              p += 12;\n              while (true) {  // Seek through subblocks.\n                var block_size = buf[p++];\n                // Bad block size (ex: undefined from an out of bounds read).\n                if (!(block_size >= 0)) throw Error(\"Invalid block size\");\n                if (block_size === 0) break;  // 0 size is terminator\n                p += block_size;\n              }\n            }\n            break;\n\n          case 0xf9:  // Graphics Control Extension\n            if (buf[p++] !== 0x4 || buf[p+4] !== 0)\n              throw new Error(\"Invalid graphics extension block.\");\n            var pf1 = buf[p++];\n            delay = buf[p++] | buf[p++] << 8;\n            transparent_index = buf[p++];\n            if ((pf1 & 1) === 0) transparent_index = null;\n            disposal = pf1 >> 2 & 0x7;\n            p++;  // Skip terminator.\n            break;\n\n          case 0xfe:  // Comment Extension.\n            while (true) {  // Seek through subblocks.\n              var block_size = buf[p++];\n              // Bad block size (ex: undefined from an out of bounds read).\n              if (!(block_size >= 0)) throw Error(\"Invalid block size\");\n              if (block_size === 0) break;  // 0 size is terminator\n              // console.log(buf.slice(p, p+block_size).toString('ascii'));\n              p += block_size;\n            }\n            break;\n\n          default:\n            throw new Error(\n                \"Unknown graphic control label: 0x\" + buf[p-1].toString(16));\n        }\n        break;\n\n      case 0x2c:  // Image Descriptor.\n        var x = buf[p++] | buf[p++] << 8;\n        var y = buf[p++] | buf[p++] << 8;\n        var w = buf[p++] | buf[p++] << 8;\n        var h = buf[p++] | buf[p++] << 8;\n        var pf2 = buf[p++];\n        var local_palette_flag = pf2 >> 7;\n        var interlace_flag = pf2 >> 6 & 1;\n        var num_local_colors_pow2 = pf2 & 0x7;\n        var num_local_colors = 1 << (num_local_colors_pow2 + 1);\n        var palette_offset = global_palette_offset;\n        var palette_size = global_palette_size;\n        var has_local_palette = false;\n        if (local_palette_flag) {\n          var has_local_palette = true;\n          palette_offset = p;  // Override with local palette.\n          palette_size = num_local_colors;\n          p += num_local_colors * 3;  // Seek past palette.\n        }\n\n        var data_offset = p;\n\n        p++;  // codesize\n        while (true) {\n          var block_size = buf[p++];\n          // Bad block size (ex: undefined from an out of bounds read).\n          if (!(block_size >= 0)) throw Error(\"Invalid block size\");\n          if (block_size === 0) break;  // 0 size is terminator\n          p += block_size;\n        }\n\n        frames.push({x: x, y: y, width: w, height: h,\n                     has_local_palette: has_local_palette,\n                     palette_offset: palette_offset,\n                     palette_size: palette_size,\n                     data_offset: data_offset,\n                     data_length: p - data_offset,\n                     transparent_index: transparent_index,\n                     interlaced: !!interlace_flag,\n                     delay: delay,\n                     disposal: disposal});\n        break;\n\n      case 0x3b:  // Trailer Marker (end of file).\n        no_eof = false;\n        break;\n\n      default:\n        throw new Error(\"Unknown gif block: 0x\" + buf[p-1].toString(16));\n        break;\n    }\n  }\n\n  this.numFrames = function() {\n    return frames.length;\n  };\n\n  this.loopCount = function() {\n    return loop_count;\n  };\n\n  this.frameInfo = function(frame_num) {\n    if (frame_num < 0 || frame_num >= frames.length)\n      throw new Error(\"Frame index out of range.\");\n    return frames[frame_num];\n  }\n\n  this.decodeAndBlitFrameBGRA = function(frame_num, pixels) {\n    var frame = this.frameInfo(frame_num);\n    var num_pixels = frame.width * frame.height;\n    var index_stream = new Uint8Array(num_pixels);  // At most 8-bit indices.\n    GifReaderLZWOutputIndexStream(\n        buf, frame.data_offset, index_stream, num_pixels);\n    var palette_offset = frame.palette_offset;\n\n    // NOTE(deanm): It seems to be much faster to compare index to 256 than\n    // to === null.  Not sure why, but CompareStub_EQ_STRICT shows up high in\n    // the profile, not sure if it's related to using a Uint8Array.\n    var trans = frame.transparent_index;\n    if (trans === null) trans = 256;\n\n    // We are possibly just blitting to a portion of the entire frame.\n    // That is a subrect within the framerect, so the additional pixels\n    // must be skipped over after we finished a scanline.\n    var framewidth  = frame.width;\n    var framestride = width - framewidth;\n    var xleft       = framewidth;  // Number of subrect pixels left in scanline.\n\n    // Output indicies of the top left and bottom right corners of the subrect.\n    var opbeg = ((frame.y * width) + frame.x) * 4;\n    var opend = ((frame.y + frame.height) * width + frame.x) * 4;\n    var op    = opbeg;\n\n    var scanstride = framestride * 4;\n\n    // Use scanstride to skip past the rows when interlacing.  This is skipping\n    // 7 rows for the first two passes, then 3 then 1.\n    if (frame.interlaced === true) {\n      scanstride += width * 4 * 7;  // Pass 1.\n    }\n\n    var interlaceskip = 8;  // Tracking the row interval in the current pass.\n\n    for (var i = 0, il = index_stream.length; i < il; ++i) {\n      var index = index_stream[i];\n\n      if (xleft === 0) {  // Beginning of new scan line\n        op += scanstride;\n        xleft = framewidth;\n        if (op >= opend) { // Catch the wrap to switch passes when interlacing.\n          scanstride = framestride * 4 + width * 4 * (interlaceskip-1);\n          // interlaceskip / 2 * 4 is interlaceskip << 1.\n          op = opbeg + (framewidth + framestride) * (interlaceskip << 1);\n          interlaceskip >>= 1;\n        }\n      }\n\n      if (index === trans) {\n        op += 4;\n      } else {\n        var r = buf[palette_offset + index * 3];\n        var g = buf[palette_offset + index * 3 + 1];\n        var b = buf[palette_offset + index * 3 + 2];\n        pixels[op++] = b;\n        pixels[op++] = g;\n        pixels[op++] = r;\n        pixels[op++] = 255;\n      }\n      --xleft;\n    }\n  };\n\n  // I will go to copy and paste hell one day...\n  this.decodeAndBlitFrameRGBA = function(frame_num, pixels) {\n    var frame = this.frameInfo(frame_num);\n    var num_pixels = frame.width * frame.height;\n    var index_stream = new Uint8Array(num_pixels);  // At most 8-bit indices.\n    GifReaderLZWOutputIndexStream(\n        buf, frame.data_offset, index_stream, num_pixels);\n    var palette_offset = frame.palette_offset;\n\n    // NOTE(deanm): It seems to be much faster to compare index to 256 than\n    // to === null.  Not sure why, but CompareStub_EQ_STRICT shows up high in\n    // the profile, not sure if it's related to using a Uint8Array.\n    var trans = frame.transparent_index;\n    if (trans === null) trans = 256;\n\n    // We are possibly just blitting to a portion of the entire frame.\n    // That is a subrect within the framerect, so the additional pixels\n    // must be skipped over after we finished a scanline.\n    var framewidth  = frame.width;\n    var framestride = width - framewidth;\n    var xleft       = framewidth;  // Number of subrect pixels left in scanline.\n\n    // Output indicies of the top left and bottom right corners of the subrect.\n    var opbeg = ((frame.y * width) + frame.x) * 4;\n    var opend = ((frame.y + frame.height) * width + frame.x) * 4;\n    var op    = opbeg;\n\n    var scanstride = framestride * 4;\n\n    // Use scanstride to skip past the rows when interlacing.  This is skipping\n    // 7 rows for the first two passes, then 3 then 1.\n    if (frame.interlaced === true) {\n      scanstride += width * 4 * 7;  // Pass 1.\n    }\n\n    var interlaceskip = 8;  // Tracking the row interval in the current pass.\n\n    for (var i = 0, il = index_stream.length; i < il; ++i) {\n      var index = index_stream[i];\n\n      if (xleft === 0) {  // Beginning of new scan line\n        op += scanstride;\n        xleft = framewidth;\n        if (op >= opend) { // Catch the wrap to switch passes when interlacing.\n          scanstride = framestride * 4 + width * 4 * (interlaceskip-1);\n          // interlaceskip / 2 * 4 is interlaceskip << 1.\n          op = opbeg + (framewidth + framestride) * (interlaceskip << 1);\n          interlaceskip >>= 1;\n        }\n      }\n\n      if (index === trans) {\n        op += 4;\n      } else {\n        var r = buf[palette_offset + index * 3];\n        var g = buf[palette_offset + index * 3 + 1];\n        var b = buf[palette_offset + index * 3 + 2];\n        pixels[op++] = r;\n        pixels[op++] = g;\n        pixels[op++] = b;\n        pixels[op++] = 255;\n      }\n      --xleft;\n    }\n  };\n}\n\nfunction GifReaderLZWOutputIndexStream(code_stream, p, output, output_length) {\n  var min_code_size = code_stream[p++];\n\n  var clear_code = 1 << min_code_size;\n  var eoi_code = clear_code + 1;\n  var next_code = eoi_code + 1;\n\n  var cur_code_size = min_code_size + 1;  // Number of bits per code.\n  // NOTE: This shares the same name as the encoder, but has a different\n  // meaning here.  Here this masks each code coming from the code stream.\n  var code_mask = (1 << cur_code_size) - 1;\n  var cur_shift = 0;\n  var cur = 0;\n\n  var op = 0;  // Output pointer.\n\n  var subblock_size = code_stream[p++];\n\n  // TODO(deanm): Would using a TypedArray be any faster?  At least it would\n  // solve the fast mode / backing store uncertainty.\n  // var code_table = Array(4096);\n  var code_table = new Int32Array(4096);  // Can be signed, we only use 20 bits.\n\n  var prev_code = null;  // Track code-1.\n\n  while (true) {\n    // Read up to two bytes, making sure we always 12-bits for max sized code.\n    while (cur_shift < 16) {\n      if (subblock_size === 0) break;  // No more data to be read.\n\n      cur |= code_stream[p++] << cur_shift;\n      cur_shift += 8;\n\n      if (subblock_size === 1) {  // Never let it get to 0 to hold logic above.\n        subblock_size = code_stream[p++];  // Next subblock.\n      } else {\n        --subblock_size;\n      }\n    }\n\n    // TODO(deanm): We should never really get here, we should have received\n    // and EOI.\n    if (cur_shift < cur_code_size)\n      break;\n\n    var code = cur & code_mask;\n    cur >>= cur_code_size;\n    cur_shift -= cur_code_size;\n\n    // TODO(deanm): Maybe should check that the first code was a clear code,\n    // at least this is what you're supposed to do.  But actually our encoder\n    // now doesn't emit a clear code first anyway.\n    if (code === clear_code) {\n      // We don't actually have to clear the table.  This could be a good idea\n      // for greater error checking, but we don't really do any anyway.  We\n      // will just track it with next_code and overwrite old entries.\n\n      next_code = eoi_code + 1;\n      cur_code_size = min_code_size + 1;\n      code_mask = (1 << cur_code_size) - 1;\n\n      // Don't update prev_code ?\n      prev_code = null;\n      continue;\n    } else if (code === eoi_code) {\n      break;\n    }\n\n    // We have a similar situation as the decoder, where we want to store\n    // variable length entries (code table entries), but we want to do in a\n    // faster manner than an array of arrays.  The code below stores sort of a\n    // linked list within the code table, and then \"chases\" through it to\n    // construct the dictionary entries.  When a new entry is created, just the\n    // last byte is stored, and the rest (prefix) of the entry is only\n    // referenced by its table entry.  Then the code chases through the\n    // prefixes until it reaches a single byte code.  We have to chase twice,\n    // first to compute the length, and then to actually copy the data to the\n    // output (backwards, since we know the length).  The alternative would be\n    // storing something in an intermediate stack, but that doesn't make any\n    // more sense.  I implemented an approach where it also stored the length\n    // in the code table, although it's a bit tricky because you run out of\n    // bits (12 + 12 + 8), but I didn't measure much improvements (the table\n    // entries are generally not the long).  Even when I created benchmarks for\n    // very long table entries the complexity did not seem worth it.\n    // The code table stores the prefix entry in 12 bits and then the suffix\n    // byte in 8 bits, so each entry is 20 bits.\n\n    var chase_code = code < next_code ? code : prev_code;\n\n    // Chase what we will output, either {CODE} or {CODE-1}.\n    var chase_length = 0;\n    var chase = chase_code;\n    while (chase > clear_code) {\n      chase = code_table[chase] >> 8;\n      ++chase_length;\n    }\n\n    var k = chase;\n\n    var op_end = op + chase_length + (chase_code !== code ? 1 : 0);\n    if (op_end > output_length) {\n      console.log(\"Warning, gif stream longer than expected.\");\n      return;\n    }\n\n    // Already have the first byte from the chase, might as well write it fast.\n    output[op++] = k;\n\n    op += chase_length;\n    var b = op;  // Track pointer, writing backwards.\n\n    if (chase_code !== code)  // The case of emitting {CODE-1} + k.\n      output[op++] = k;\n\n    chase = chase_code;\n    while (chase_length--) {\n      chase = code_table[chase];\n      output[--b] = chase & 0xff;  // Write backwards.\n      chase >>= 8;  // Pull down to the prefix code.\n    }\n\n    if (prev_code !== null && next_code < 4096) {\n      code_table[next_code++] = prev_code << 8 | k;\n      // TODO(deanm): Figure out this clearing vs code growth logic better.  I\n      // have an feeling that it should just happen somewhere else, for now it\n      // is awkward between when we grow past the max and then hit a clear code.\n      // For now just check if we hit the max 12-bits (then a clear code should\n      // follow, also of course encoded in 12-bits).\n      if (next_code >= code_mask+1 && cur_code_size < 12) {\n        ++cur_code_size;\n        code_mask = code_mask << 1 | 1;\n      }\n    }\n\n    prev_code = code;\n  }\n\n  if (op !== output_length) {\n    console.log(\"Warning, gif stream shorter than expected.\");\n  }\n\n  return output;\n}\n\n// CommonJS.\ntry { exports.GifWriter = GifWriter; exports.GifReader = GifReader } catch(e) {}\n\n\n//# sourceURL=webpack://nerthusaddon/./node_modules/omggif/omggif.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ _arrayLikeToArray; }\n/* harmony export */ });\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\n\n//# sourceURL=webpack://nerthusaddon/./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ _arrayWithHoles; }\n/* harmony export */ });\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\n//# sourceURL=webpack://nerthusaddon/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/defineProperty.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ _defineProperty; }\n/* harmony export */ });\n/* harmony import */ var _toPropertyKey_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toPropertyKey.js */ \"./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js\");\n\nfunction _defineProperty(obj, key, value) {\n  key = (0,_toPropertyKey_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\n//# sourceURL=webpack://nerthusaddon/./node_modules/@babel/runtime/helpers/esm/defineProperty.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/iterableToArray.js":
/*!********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/iterableToArray.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ _iterableToArray; }\n/* harmony export */ });\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\n//# sourceURL=webpack://nerthusaddon/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js":
/*!********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ _nonIterableRest; }\n/* harmony export */ });\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\n//# sourceURL=webpack://nerthusaddon/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/toArray.js":
/*!************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/toArray.js ***!
  \************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ _toArray; }\n/* harmony export */ });\n/* harmony import */ var _arrayWithHoles_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrayWithHoles.js */ \"./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js\");\n/* harmony import */ var _iterableToArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./iterableToArray.js */ \"./node_modules/@babel/runtime/helpers/esm/iterableToArray.js\");\n/* harmony import */ var _unsupportedIterableToArray_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./unsupportedIterableToArray.js */ \"./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js\");\n/* harmony import */ var _nonIterableRest_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./nonIterableRest.js */ \"./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js\");\n\n\n\n\nfunction _toArray(arr) {\n  return (0,_arrayWithHoles_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(arr) || (0,_iterableToArray_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(arr) || (0,_unsupportedIterableToArray_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(arr) || (0,_nonIterableRest_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n}\n\n//# sourceURL=webpack://nerthusaddon/./node_modules/@babel/runtime/helpers/esm/toArray.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/toPrimitive.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/toPrimitive.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ toPrimitive; }\n/* harmony export */ });\n/* harmony import */ var _typeof_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./typeof.js */ \"./node_modules/@babel/runtime/helpers/esm/typeof.js\");\n\nfunction toPrimitive(t, r) {\n  if (\"object\" != (0,_typeof_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != (0,_typeof_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\n\n//# sourceURL=webpack://nerthusaddon/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ toPropertyKey; }\n/* harmony export */ });\n/* harmony import */ var _typeof_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./typeof.js */ \"./node_modules/@babel/runtime/helpers/esm/typeof.js\");\n/* harmony import */ var _toPrimitive_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./toPrimitive.js */ \"./node_modules/@babel/runtime/helpers/esm/toPrimitive.js\");\n\n\nfunction toPropertyKey(t) {\n  var i = (0,_toPrimitive_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(t, \"string\");\n  return \"symbol\" == (0,_typeof_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(i) ? i : String(i);\n}\n\n//# sourceURL=webpack://nerthusaddon/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/typeof.js":
/*!***********************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/typeof.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ _typeof; }\n/* harmony export */ });\nfunction _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\n\n//# sourceURL=webpack://nerthusaddon/./node_modules/@babel/runtime/helpers/esm/typeof.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ _unsupportedIterableToArray; }\n/* harmony export */ });\n/* harmony import */ var _arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./arrayLikeToArray.js */ \"./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return (0,_arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return (0,_arrayLikeToArray_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(o, minLen);\n}\n\n//# sourceURL=webpack://nerthusaddon/./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js?");

/***/ }),

/***/ "./res/configs/climates.json":
/*!***********************************!*\
  !*** ./res/configs/climates.json ***!
  \***********************************/
/***/ (function(module) {

eval("module.exports = JSON.parse('{\"maps\":{\"altepetl\":[3759,1137,1141,1901,1926,3597],\"andarum\":[1730,1387,2063,2056,180,5986,4549,4548],\"cold\":[198,1101,2065,2064,114,2020,2066,2055,2782,140,150,122,5987,5985,5982,1711,1712,1100],\"cold-swamp\":[4151,4152,2320,2324,2308,2310,2524,3402,111,5948,5293,4546,2536,4547,727,726,115,725],\"desert\":[1350,3081,3100,1368,3328,3326,3327,3325,3315],\"karka-han\":[35,1235,1084,36,1788,2546,1230,1219,901,276,900,3533,3535,3534,3738,3737],\"mythar\":[257,246,339,3594,3595,3596,1924],\"mythar-north-forest\":[3765,331,3766,268,330,332,253],\"nithal\":[574,575,600,730,731,845,599,1761,1675,1858,1860,1858,1876,1984,2391],\"north\":[226,128,1058,1975,121,151,9,37,1057,10,84,38,8,2520,2730,116,4,110,4764,355,356,357,708,712],\"south\":[701,3758,500,576,4185,1116,347,344,348,4155,223,222,214,33,361,4154,2762,229,244,5989,5988,5983,5984,2761],\"torneg\":[137,1,138,11,3,631,632,2887,579,368,12,1062,333,3300,3736,1131,3734,3735,2029,2,1111,1115,3733,1060,1108,1263,1285,3361,1267,707],\"tuzmer\":[1233,630,1262,1607,589,1349,1154,1167,1348,3598,1613,1159],\"warm-swamp\":[3136,3135,3137,3138,3209,1448,1449,1399,1458],\"witches\":[1293,1202,1294,1297,4049,4050,4048,4052,4051]},\"characteristics\":{\"cloudiness\":{\"default\":[1,1,1,1],\"altepetl\":[0.5,0.5,0.5,0.5],\"andarum\":[1.2,1.2,1.5,1.2],\"cold\":[1,1,1,1],\"cold-swamp\":[1,1,1,1],\"desert\":[0.5,0.5,0.5,0.5],\"karka-han\":[1.1,1.1,1.1,1],\"mythar\":[1,1,1,1],\"mythar-north-forest\":[1.2,1.2,1.2,1.2],\"nithal\":[1,1,1,1.2],\"north\":[1,1,1,1],\"south\":[0.1,0.1,0.1,0.1],\"torneg\":[0.9,0.9,0.9,0.9],\"tuzmer\":[0.5,0.5,0.5,0.5],\"warm-swamp\":[1,1,1,1],\"witches\":[1.1,1.1,1.1,1.1]},\"humidity\":{\"default\":[1,1,1,1],\"altepetl\":[1.1,1.1,1.1,1.1],\"andarum\":[0.9,0.9,1.2,0.9],\"cold\":[1,1,1,1],\"cold-swamp\":[1.3,1.3,1.3,1.3],\"desert\":[0.5,0.5,0.5,0.7],\"karka-han\":[1,1,1,1],\"mythar\":[1.3,1,1.3,1.3],\"mythar-north-forest\":[1.3,1,1.3,1.3],\"nithal\":[0.9,0.8,0.9,0.9],\"north\":[1.1,1.1,1.1,1.1],\"south\":[1,1,1,1],\"torneg\":[1.1,1.1,1.1,1.1],\"tuzmer\":[1,1,1,1],\"warm-swamp\":[1.3,1.3,1.3,1.3],\"witches\":[0.9,0.9,0.9,0.9]},\"temperature\":{\"default\":[0,0,0,0],\"altepetl\":[10,5,10,20],\"andarum\":[-20,-20,-30,-20],\"cold\":[-10,-10,-10,-10],\"cold-swamp\":[-10,-10,-10,-10],\"desert\":[30,30,30,20],\"karka-han\":[-5,0,-5,-5],\"mythar\":[0,0,0,5],\"mythar-north-forest\":[0,0,0,0],\"nithal\":[5,0,5,5],\"north\":[0,0,0,0],\"south\":[0,0,0,0],\"torneg\":[0,0,0,0],\"tuzmer\":[10,20,20,20],\"warm-swamp\":[0,0,0,0],\"witches\":[0,0,0,0]}},\"seeds\":{\"default\":1,\"altepetl\":2,\"andarum\":3,\"cold\":4,\"cold-swamp\":5,\"desert\":6,\"karka-han\":7,\"mythar\":8,\"mythar-north-forest\":9,\"nithal\":10,\"north\":11,\"south\":12,\"torneg\":13,\"tuzmer\":14,\"warm-swamp\":15,\"witches\":16}}');\n\n//# sourceURL=webpack://nerthusaddon/./res/configs/climates.json?");

/***/ }),

/***/ "./res/configs/lvl-names.json":
/*!************************************!*\
  !*** ./res/configs/lvl-names.json ***!
  \************************************/
/***/ (function(module) {

eval("module.exports = JSON.parse('[\"Ciułacz\",\"Łowca Wilków\",\"Tropiciel Zulusów\",\"Poganiacz Goblinów\",\"Piętno Orków\",\"Miłośnik Harpii\",\"Rezun Olbrzymów\",\"Hycel Gnolli\",\"Koszmar Tolloków\",\"Magazynier Pełną Gębą\",\"Zguba Minotaurów\",\"Niszczyciel Szkieletów\",\"Treser Centaurów\",\"Nieustraszony Pogromca Korsarzy\",\"Tańczący z Mumiami\",\"Szabrownik Wraków\",\"Gobliński Kat\",\"Postrach Berserkerów\",\"Władca Kazamatów\",\"Młot na Czarownice\",\"Dręczyciel Praorków\",\"Zguba Czarnej Gwardii\",\"Poskramiacz Furboli\",\"Egzekutor Myświórów\",\"Wielki Inkwizytor\",\"Zaklinacz Arachnidów\",\"Kat Demonisa\",\"Oprawca Maddoków\",\"Potomek Najwyższych\",\"Władca Puszczy\",\"Konkwistador\",\"Ewokator Duchów\",\"Odkrywca Reliktów\",\"Smocza Krew\",\"Piekielny Jeźdźca\",\"Ponury Żniwiarz\",\"Gwardzista Piekieł\"]');\n\n//# sourceURL=webpack://nerthusaddon/./res/configs/lvl-names.json?");

/***/ }),

/***/ "./res/configs/map-exceptions.json":
/*!*****************************************!*\
  !*** ./res/configs/map-exceptions.json ***!
  \*****************************************/
/***/ (function(module) {

eval("module.exports = JSON.parse('{\"indoor\":[3459,3969,4999,6466],\"outdoor\":[1862,2391]}');\n\n//# sourceURL=webpack://nerthusaddon/./res/configs/map-exceptions.json?");

/***/ }),

/***/ "./res/configs/maps.json":
/*!*******************************!*\
  !*** ./res/configs/maps.json ***!
  \*******************************/
/***/ (function(module) {

eval("module.exports = JSON.parse('{\"spring\":{},\"summer\":{},\"autumn\":{},\"winter\":{\"1\":\"#res/img/maps/Ithan - zima.optimized.png\",\"2\":\"/obrazki/miasta/zima-torneg.2.png\",\"9\":\"#res/img/maps/Werbin - oblężenie - zima.png\",\"33\":\"/obrazki/miasta/zima-eder.png\",\"35\":\"/obrazki/miasta/zima-karka-han.png\",\"114\":\"/obrazki/miasta/zima-thuzal.2.png\",\"257\":\"/obrazki/miasta/zima-mythar.png\",\"574\":\"/obrazki/miasta/zima-nithal.png\"},\"default\":{\"1\":\"#res/img/maps/Ithan.png\",\"2\":\"#res/img/maps/Torneg.png\",\"8\":\"#res/img/maps/Zniszczone Opactwo.png\",\"9\":\"#res/img/maps/Werbin - po oblężeniu 2.png\",\"11\":\"#res/img/maps/Dolina Yss - tartak.png\",\"12\":\"#res/img/maps/Stare Ruiny.png\",\"37\":\"#res/img/maps/Brama Północy.png\",\"121\":\"#res/img/maps/Góry Zrębowe.png\",\"167\":\"#res/img/maps/Przeklęty Zamek - wejście południowe.png\",\"168\":\"#res/img/maps/Przeklęty Zamek - wejście północne.png\",\"169\":\"#res/img/maps/Przeklęty Zamek - wejście wschodnie.png\",\"170\":\"#res/img/maps/Przeklęty Zamek - podziemia północne.png\",\"171\":\"#res/img/maps/Przeklęty Zamek - podziemia południowe.png\",\"172\":\"#res/img/maps/Przeklęty Zamek - zbrojownia.png\",\"174\":\"#res/img/maps/Przeklęty Zamek - sala zgromadzeń.png\",\"175\":\"#res/img/maps/Przeklęty Zamek p.1.png\",\"222\":\"#res/img/maps/Zasłonięte Jezioro.png\",\"224\":\"#res/img/maps/Kamienne Lokum.png\",\"290\":\"#res/img/maps/Opactwo.png\",\"291\":\"#res/img/maps/Opactwo p.1.png\",\"292\":\"#res/img/maps/Opactwo - piwnica.png\",\"730\":\"#res/img/maps/Zachodnia Rubież.png\",\"864\":\"#res/img/maps/Akademia wojskowa - piwnica p.2.png\",\"866\":\"#res/img/maps/Cytadela p.1.png\",\"1045\":\"#res/img/maps/Gabinet Zireath.png\",\"1108\":\"#res/img/maps/Leśna Przełęcz.png\",\"1233\":\"#res/img/maps/Wioska Rybacka.png\",\"1945\":\"#res/img/maps/Werbin - Opuszczony dom.png\",\"1975\":\"#res/img/maps/Wrzosowiska - cmentarz.png\",\"2070\":\"#res/img/maps/Werbin - Mury - skrzydło zachodnie.png\",\"2071\":\"#res/img/maps/Werbin - Mury - skrzydło północne.png\",\"2072\":\"#res/img/maps/Werbin - Mury - skrzydło wschodnie.png\",\"2546\":\"#res/img/maps/Nekropolia Karka-han.png\",\"3246\":\"#res/img/maps/Zapomniana kopalnia p.1.png\",\"3247\":\"#res/img/maps/Zapomniana kopalnia p.2.png\",\"3248\":\"#res/img/maps/Zapomniana kopalnia p.3.png\",\"3741\":\"#res/img/maps/Przeklęty Zamek p.2.png\",\"3742\":\"#res/img/maps/Przeklęty Zamek - komnata.png\",\"4764\":\"#res/img/maps/Włości rodu Kruzo.png\"}}');\n\n//# sourceURL=webpack://nerthusaddon/./res/configs/maps.json?");

/***/ }),

/***/ "./res/configs/permissions.yaml":
/*!**************************************!*\
  !*** ./res/configs/permissions.yaml ***!
  \**************************************/
/***/ (function(module) {

eval("module.exports = JSON.parse('{\"namiestnik\":[7588071],\"radny\":[5699334,9891163,6621324],\"narrator\":[125880,7508340,6621324,5699334,7925933,9696571,9623692,9891163,6192857,1535485],\"special\":[5623545,70699,30508,2328121,345207,883090,256795,5424002,7588071,5699334]}');\n\n//# sourceURL=webpack://nerthusaddon/./res/configs/permissions.yaml?");

/***/ }),

/***/ "./res/configs/vips.json":
/*!*******************************!*\
  !*** ./res/configs/vips.json ***!
  \*******************************/
/***/ (function(module) {

eval("module.exports = JSON.parse('{\"16\":\"Teźa\",\"50\":\"Mulher Má\",\"319\":\"Niecny drow\",\"513\":\"Zbieracz gumijagód\",\"1558\":\"Zielarka\",\"2230\":\"Mhroczniś\",\"2516\":\"Misioficer\",\"2720\":\"Fochnisia\",\"3077\":\"Siewca Wiatru\",\"4146\":\"Gumitruskawka\",\"6749\":\"Przezacna\",\"6901\":\"Zło wcielone\",\"7422\":\"Mistrz pióra\",\"9226\":\"Zadumany\",\"9565\":\"Donna Amadonna\",\"10222\":\"Władca Ciemności\",\"10372\":\"Boski Wiatr\",\"10406\":\"Latorośle drowa\",\"10430\":\"Wschodzące Słońce\",\"10473\":\"Wędrowny Rysownik\",\"10523\":\"Lux Aeterna\",\"10880\":\"Boski Wiatr\",\"12002\":\"Głodny hobbit\",\"12932\":\"Latorośle drowa\",\"13438\":\"Zakuty łeb\",\"13931\":\"Wilcza Zamieć\",\"14615\":\"Iluzjonista\",\"15098\":\"Siostra Płomieni\",\"15746\":\"Miłośniczka kocimiętki\",\"18844\":\"Doktorek\",\"19984\":\"Ręka chaosu\",\"20026\":\"Lavamasi\",\"22348\":\"Wampierz\",\"22395\":\"Marudny Drow\",\"23197\":\"Szalony Arkanista\"}');\n\n//# sourceURL=webpack://nerthusaddon/./res/configs/vips.json?");

/***/ }),

/***/ "./res/descriptions/weather.json":
/*!***************************************!*\
  !*** ./res/descriptions/weather.json ***!
  \***************************************/
/***/ (function(module) {

eval("module.exports = JSON.parse('{\"clear-day\":[\"Promienie słońca intensywnie rozświetlają horyzont. Czyste, błękitne niebo koi oczy, odrywa od szarej rzeczywistości.\",\"Słońce zawieszone na bezchmurnym niebie świeci niezwykle jasno.\",\"Po bezchmurnym niebie wędruje słońce, otulając wszystkich swoimi ciepłymi promieniami.\"],\"day-cloud-small\":[\"Słońce pięknie świeci, po niebie wędrują małe obłoczki, rzucające na ziemię swe cienie. Słaby wiatr orzeźwia wędrowców.\",\"Na niebie niewielka ilość chmurek. Promienie słoneczne bez trudu przebijają się przez nie, a cienie majestatycznie przesuwają się po ziemi.\",\"Słońce, otuliwszy się pojedynczymi chmurkami, wypuszcza na świat swoje promienie, obdarzając go przyjemnym ciepłem.\"],\"day-cloud-big\":[\"Słońce skryło się pod pierzyną białych chmur, przez którą tu i ówdzie przebijają się jasne promyki. Delikatny wiatr szeleści liśćmi.\",\"Duże, przejrzyste chmury przesuwają się leniwie po sklepieniu. Promienie słoneczne przebijają się przez obłoki. \",\"Złociste promienie słońca przebijają się przez śnieżnobiałe chmury. Przyjemny wiatr roznosi cudowny zapach kwiatów.\"],\"day-rain\":[\"Słońce częściowo skryło się za chmurami, które swoją szarością pokryły błękit nieba. Krople deszczu ociężale spadają na ziemię.\",\"Słońce jest ledwie widoczne zza ciężkich, deszczowych chmur. Z nieba cieknie słaby deszcz.\",\"Szare, deszczowe chmury starają się zasłonić słońce. Drobne krople deszczu rozpryskują się, opadając na zielone liście drzew.\"],\"day-storm\":[\"Z nieba, jak szalone, spadają kolejne krople deszczu. Niebo przeszyła jasna smuga światła, której towarzyszył potężny grzmot.\",\"Ciężkie burzowe chmury spowijają niebo. Dojrzenie słońca przez gęsto padający deszcz i chmury graniczy niemal z cudem.\",\"Słońce usilnie stara się przebić przez gęste, burzowe chmury. Woda deszczowa w rynnach i beczkach się już przelewa, z oddali słychać serię grzmotów.\"],\"day-rain-with-snow\":[\"Przez szare chmury dostrzec można jeszcze promyki słońca. Kolejnym kroplom deszczu towarzyszy śnieg. Wiatr wesoło kołysze gałęźmi drzew.\",\"Spore zachmurzenie, rzęsiście padający deszcz, mieszający się z płatkami śniegu. Miasto oświetlane przez promienie słońca wygląda przepięknie...\",\"Z szarych chmur zakrywających niebo wydobywa się deszcz ze śniegiem. Powietrze jest bardzo zimne, a wiatr porywisty.\"],\"day-snow\":[\"Mimo kilku promyków słońca, nie jest łatwo odczuć ciepło. Śnieg sypiący z nieba przykrywa doliny i miasta warstwą puchu.\",\"Zamieć śnieżna pokrywa świat białym puchem. Mimo świecącego słońca, panuje mróz, wieją bardzo silne wiatry. Dzikie szlaki i ulice miast opustoszały.\",\"Lekkie chmurki gęsto ścielą niebo. Promienie słoneczne przebijają się przez nie, oświetlając padający w dużej ilości śnieg.\"],\"overcast\":[\"Białe chmury pokrywają niebo. Wieje spokojny wiatr porywający opadłe listki drzew. Mimo braku słońca jest dość ciepło.\",\"Błękitne niebo przyozdobiła chmara białych kłębków. Wiatr wesoło hula wśród liści i gałęzi drzew.\",\"Na niebie brak słońca. Jedynie niewielkie chmurki szybko przemierzają sklepienie.\"],\"rain-light\":[\"Niebo nad krainą zrobiło się szare. Z ciemnych chmur zaczął padać deszcz, a wszelaka zwierzyna schroniła się w jaskiniach, zaś ludzie ukryli się swych domostwach.\",\"Z pozornie małych chmurek wesoło spadają ku ziemi kropelki wody. Wiatr porywa do tańca zarówno liście drzew jak i włosy, kapelusze, płaszcze oraz kaptury podróżników.\",\"Lekkie zachmurzenie. Słońce chowa się już za horyzontem. Deszcz siąpi z nieba.\"],\"rain\":[\"Istne oberwanie chmury. Szary, gęsty puch staje się przyczyną ulewnego deszczu. Porywisty wiatr kołysze drzewami.\",\"Niebem zawładnęła szarość. Z większych i mniejszych chmur pędzą ku ziemi kolejne deszczowe krople.\",\"Ciężkie chmury deszczowe. Z nieba gęsto spadają duże krople wody.\"],\"storm\":[\"Rozpętała się prawdziwa burza. Z nieba seriami spadają strugi deszczu, horyzont rozświetlają błyskawice, a opadające krople zagłuszają grzmoty.\",\"Coraz większa ilość chmur przypływa ze wschodu krainy. Ociężałe krople spadają na ziemię. Niebo przeszyła błyskawica, a grzmot jej towarzyszący, rozległ się po całej okolicy.\",\"Burzowe chmury, w oddali słychać grzmoty, niebo rozświetlają błyskawice. Życie mieszkańcom utrudnia ponadto ciężki deszcz i silny wiatr.\"],\"rain-with-snow\":[\"Z ciemnych chmur pada ulewny deszcz, któremu towarzyszą nieliczne płatki śniegu. Biały puch topnieje jeszcze przed opadnięciem na ziemię.\",\"Z ciemnych chmur powoli opadają ku ziemi kolejne krople deszczu i płatki śniegu. Wiatr ugina drzewa, a te jakby składają pokłony, chyląc się aż do ziemi.\",\"Wielkie, ciemne chmury zaścielają gęsto sklepienie. Z nieba leje się potężny deszcz, a gdzieniegdzie można dostrzec opadające płatki śniegu.\"],\"snow\":[\"Powietrze staje się bardzo zimne, woda w kałużach zamarza. Obfite opady śniegu znacznie zmniejszają pole widzenia.\",\"Białe, pierzaste chmurki suną po niebie. Płatki śniegu wesoło wirują na wietrze, opadając powoli na ziemię.\",\"Lekko zachmurzone niebo. Słońce już niedługo schowa się za horyzontem. Z nieba gęsto spadają białe płatki śniegu.\"],\"snow-storm\":[\"Burza śnieżna znęca się nad miejscową fauną i florą. Mróz, śnieg i pioruny zniechęcają ludzi do opuszczania swych ciepłych, bezpiecznych domów.\",\"Z ciemnych chmur wariacko suną ku ziemi płatki śniegu. Jasna błyskawica od czasu do czasu przeszywa niebo. Wiatr pędzi jak szalony, choć sam nie wie dokąd. Grzmoty słychać w najgłębszych zakątkach krainy.\",\"Ciężkie i ciemne chmury. W oddali słychać potężne grzmoty, którym towarzyszą oślepiające błyski. Brak jednak deszczu, jedynie gęsto sypiący śnieg daje się we znaki.\"],\"clear-night\":[\"Nastała ciepła, bezwietrzna noc. Księżyc świeci jasno, a na czystym niebie ukazują się tysiące gwiazd.\",\"Księżyc tej nocy postanowił pokazać swe lico. Towarzyszące mu gwiazdy iskrzą wesoło na bezchmurnym niebie.\",\"Bezchmurne, gwieździste niebo. Wysoko zawieszony księżyc jasno oświetla całą krainę.\"],\"night-cloud-small\":[\"Księżyc co jakiś czas ukrywa się za małymi, białymi chmurami, rozświetlając je. Wieje łagodny wiatr, który nikomu nie jest w stanie przerwać snu.\",\"Księżyc nieśmiało wygląda zza chmurki. Ciemne niebo tu i ówdzie przyozdabiają jasne gwiazdy.\",\"Niewielkie zachmurzenie. Księżyc jasno świeci z góry. W tle doskonale są widoczne, przy słabym zachmurzeniu, gwiazdy.\"],\"night-cloud-big\":[\"Niebo nawiedziły jasne chmury, za którymi sprytnie schował się księżyc i większość gwiazd. Wiatr cicho zawodzi w najskrytszych zakątkach krainy.\",\"Duże, jasne chmury, przez które światło księżyca przebija się bez problemu, nie pozwalają dojrzeć gwiazd.\",\"Mimo przelotnych wiatrów, noc jest pogodna. Chmury skutecznie zakrywają księżyc i wszystkie gwiazdy.\"],\"night-rain\":[\"Chmury zakrywają księżyc. Mocny wiatr kołysze drzewami i rzuca liśćmi. Krople deszczu bezwładnie opadają na ziemię.\",\"Księżyc, podobnie jak gwiazdy, schował się pod pierzyną ciemnych chmur, z których spadają ku ziemi krople deszczu.\",\"Spore zachmurzenie. Księżyc prawie niewidoczny, acz jego światło przebija się przez chmury. Siąpi deszcz.\"],\"night-storm\":[\"Nastała burzliwa noc. Pioruny, szum wiatru i rozbijające się o okna oraz dachy krople, mało komu pozwalają zasnąć.\",\"Ciemne chmury skryły granat nieba. Również księżyc i gwiazdy zawieruszyły się gdzieś wśród szarości. Błyskawice przyszywające niebo niosą ze sobą kolejne grzmoty i coraz większe krople deszczu.\",\"Ciężkie burzowe chmury wyglądają przerażająco. Ani śladu księżyca, pada za to gęsty deszcz.\"],\"night-rain-with-snow\":[\"Z pozornie małych chmurek spadają ku ziemi krople deszczu i śniegu. Księżyc wygląda zza przepływających białych chmur. Wiatr wesoło tańczy wśród gałęzi drzew.\",\"Słabe zachmurzenie. Księżyc jest doskonale widoczny, gwiazdy zaś tylko w niektórych momentach. Niewielkie opady śniegu i deszczu.\",\"Noc jest bardzo chłodna, pada ulewny deszcz ze śniegiem, tworząc wielkie kałuże.\"],\"night-snow\":[\"Zamieć śnieżna i mróz towarzyszą tej nocy. Wieje bardzo silny wiatr, a biały puch pokrywa całą krainę.\",\"Księżyc, otuliwszy się pierzynką chmur, skrył się wraz z gwiazdami. Płatki śniegu wesoło tańczą na wietrze, kolejno opadając na ziemię.\",\"Duże ilości niewielkich, jasnych chmurek. Gwiazdy na przemian pojawiają się i znikają, a z nieba gęsto sypie śnieg.\"]}');\n\n//# sourceURL=webpack://nerthusaddon/./res/descriptions/weather.json?");

/***/ }),

/***/ "./res/descriptions/zodiac.json":
/*!**************************************!*\
  !*** ./res/descriptions/zodiac.json ***!
  \**************************************/
/***/ (function(module) {

eval("module.exports = JSON.parse('{\"aries\":[\"Baran - Czerpanie mocy z czystej agresji wprawdzie wzmacnia magię ofensywną lecz destabilizuje pozostałe szkoły. Tworzenie portali staje się zbyt niebezpieczne.\",\"Podstawowe zaklęcia zniszczenia nie wymagają energii maga, jednak przemiana jest zupełnie zablokowana.\"],\"taurus\":[\"Byk - Stałość, rzeczowość i skupienie ułatwiają snucie wysoce skomplikowanych czarów.\",\"Pozwala tworzyć magazyny energii na dowolnym poziomie zaklinania. Ich siła jest zależna od posiadanego poziomu tej szkoły.\"],\"gemini\":[\"Bliźnięta - Wszechstronna wiedza, obiektywizm i niezakłócona emocjami racjonalność, pozwalają skuteczniej przeciwstawiać się sile innych magów.\",\"Odrzucenie wzrasta o jeden poziom, lecz nie wyżej niż 4/5 (arcymistrz zyskuje możliwość spętania mocy innego arcymistrza).\"],\"cancer\":[\"Rak - Instynkt i ciekawość sprzyjają zgłębianiu myśli innych oraz mechanik świata. Skupienie się na sprawach odległych naraża maga na niebezpieczeństwa.\",\"Myśli innych można czytać na poziomie 4/5 poznania. W zamian zablokowane jest odrzucenie.\"],\"leo\":[\"Lew - Stanowczość i autorytet pozwalają działać na wielką skalę, jednakże towarzysząca temu duma sprawia, iż przedsięwzięcia te są nieco przyziemne.\",\"Najsłabsza szkoła zostaje wzmocniona o jeden poziom, jednak możliwe jest korzystanie wyłącznie z elementów niższych. Brak efektu, jeżeli mag takowych nie posiada.\"],\"virgo\":[\"Panna - Czysta wręcz troska oraz pedantyczność stanowią idealną podstawę do pomocy zagrożonym życiom.\",\"Dodatkowe przywrócenie 3/5 jednego organizmu żywego dziennie. W zamian zablokowane jest zniszczenie.\"],\"libra\":[\"Waga - Ułatwione jest wyważenie zaklęć z użyciem ich pierwotnej mocy, która zostaje ustabilizowana.\",\"Zaklęcia na poziomie adepta przemiany nie wymagają energii, jednak zablokowane jest użycie elementów niższych.\"],\"scorpio\":[\"Skorpion - Ewokacja pozwala z łatwością sięgnąć po istoty, które dotychczas znajdowały się na granicy możliwości maga. Zgłębienie ich tajemnic ma jednak swój koszt.\",\"Przywołanie zwiększone jest o jeden poziom, lecz nie wyżej niż 4/5. Zablokowane zostają elementy natury i równowagi.\"],\"sagittarius\":[\"Strzelec -  Entuzjazm, otwartość oraz szczerość znacząco ułatwiają współpracę z innymi.\",\"Umożliwia współpracę z magami posługującymi się innymi szkołami. Jeżeli posiadany jest już atrybut teoria magiczna, to podczas kooperacji zaklęcie maga z kosmosem wzrasta o jeden stopień, lecz nie wyżej niż na poziom 4/5.\"],\"capricorn\":[\"Koziorożec - Wytrwałe, zdyscyplinowane oraz ambitne dążenie do celu wprost prowadzą do czystego profesjonalizmu.\",\"Najlepiej rozwinięta szkoła, podniesiona zostaje o jeden poziom, lecz nie wyżej niż na poziom mistrza. W zamian reszta szkół spada o jeden poziom (lub w przypadku poziomu 1/5 zostaje zablokowana). Jeżeli mag posiada już jedną szkołę na poziomie 4/5 lub wyżej, to podniesiona zostaje następna najlepsza szkoła. W razie więcej niż jednej szkoły spełniającej wymogi, gracz dokonuje wyboru.\"],\"aquarius\":[\"Wodnik - Wynalazczość, niezależność oraz przekraczanie granic pozwalają zasmakować umiejętności, które dotychczas były niedostępne, aż do zatracenia.\",\"Szkoła z najwyższym poziomem zostaje zablokowana. Najsłabsza szkoła uzyskuje jej poziom. Brak efektu w przypadku szkół o równym poziomie bądź braku jednej, najsilniejszej szkoły.\"],\"pisces\":[\"Ryby - Ucieczka od rzeczywistości w iluzje, które stają się sztuką, znacząco wzmacniają możliwości maga. Jednakże złożoność wyobrażeń uniemożliwia kooperację z innymi.\",\"Podstawowe iluzje nie zużywają energii. Zablokowane korzystanie z atrybutu teoria magiczna.\"]}');\n\n//# sourceURL=webpack://nerthusaddon/./res/descriptions/zodiac.json?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	!function() {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = function(exports, definition) {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	!function() {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = function(exports) {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	}();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.js");
/******/ 	
/******/ })()
;